(this.webpackJsonpzimboland=this.webpackJsonpzimboland||[]).push([[0],{146:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},277:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},314:function(e,t){},316:function(e,t){},325:function(e,t){},327:function(e,t){},352:function(e,t){},354:function(e,t){},355:function(e,t){},360:function(e,t){},362:function(e,t){},368:function(e,t){},370:function(e,t){},389:function(e,t){},401:function(e,t){},404:function(e,t){},430:function(e,t){},527:function(e,t,n){},529:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),i=n(94),s=n.n(i),r=(n(248),n(3)),o=(n(249),n(133)),l=(n(250),n(531),n(530),o.a.initializeApp({apiKey:"AIzaSyAESYV0JuqsscaMTKsTyp0NEjXAZd2wlck",authDomain:"zimboland-6591f.firebaseapp.com",projectId:"zimboland-6591f",storageBucket:"zimboland-6591f.appspot.com",messagingSenderId:"97798678376",appId:"1:97798678376:web:ea0d580bcfd8554a5e18dd",measurementId:"G-FZ8J4Z8PSR"})),d=l.firestore(),u=l.storage(),j=o.a.auth(),m=n(11),b=n(18),h=n(0),O=Object(c.createContext)(),A=function(e){var t=e.reducer,n=e.initialState,a=e.children;return Object(h.jsx)(O.Provider,{value:Object(c.useReducer)(t,n),children:a})},f=function(){return Object(c.useContext)(O)},p=n(12),g=n.n(p),v=n(23),x=n(46),C=n.n(x),y=(n(254),function(e){var t=e.imageLinks,n=e.lotIndex,a=e.isPreview,i=Object(c.useState)(0),s=Object(r.a)(i,2),o=s[0],l=s[1],d=Object(c.useState)("none"),j=Object(r.a)(d,2),m=j[0],b=j[1],O=Object(c.useState)([]),A=Object(r.a)(O,2),f=A[0],p=A[1];Object(c.useEffect)((function(){var e=f;a?(t.map((function(t,n){return e.push(t),0})),document.getElementById("image".concat(n)).src=URL.createObjectURL(t[0])):t.map((function(t,c){return u.ref("".concat(t)).getDownloadURL().then((function(t){e.push(t),p(e);var c=document.getElementById("image".concat(n));c?c.setAttribute("src",t):console.log("error")})).catch((function(e){console.log(e)})),0}))}),[f,n,t,a]);var g=function(e){e&&t.length>1?b("block"):b("none")};return Object(h.jsxs)("div",{className:"itemImage",onMouseEnter:function(e){return g(!0)},onMouseLeave:function(e){return g(!1)},children:[Object(h.jsx)("div",{className:"previousImage",onClick:function(){return function(){var e=o;l((e-=1)<0?t.length-1:e)}()},style:{display:m},children:"<"}),Object(h.jsx)("img",{className:"itemImage_image",id:"image".concat(n),src:f[o],alt:"loading"}),Object(h.jsx)("div",{className:"nextImage",onClick:function(){return function(){var e=o;(e+=1)>t.length-1?l(0):l(e)}()},style:{display:m},children:">"})]})}),w=(n(255),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKKSURBVGhD7ZkxduowEEVdUlJSejksgSVQsgNKlkDJMrw0yuSBHspEJopmRsI48a0+Ao/eHWn+Of+7+5g5i8DULAJTswhMzSIwNXUEhmHoH3RZ+KO+xyN82IdXIERnOiVVNFwC2H69XjOOCTzudLALjNPv93t+lwU/4wN3nA5GgSR9YXSJ1PA4qAWwU3LpDekDyVHYRkItsNlsuOEdc/pA4oDi/KIYnQA6xK3uONMHEgftISgEUFree65WgkX186DIIS9Pld5L5DmoLpJCgOUbpA9IBy4VYBHg5wZwg0XgOaz9BwQulwuXqoKy3KCRwGq1CtXxBy5VxVZfIXA6ncIGgEtVYemuw0ZcKkAXhTs0FuDnMv6rQPU5tk0w0P263RybK+sE2s0xiyonGKhzcJ9mAvxcjF2g4hiYBwCoH2gxBp6aaoEWY8By+gEAlhCxYYb9xsSO2I7UInA4HDxbJsR2oCyXNFgErtdr2BI4R1mOL8pyVYPxHse2OQ/BX8coIEfZfAiy/eZxMgoAf/P8FYBdwHkIVdoP7ALA08Iq7QcuAfMh1Go/cAkA2chCB/ysVvuBV0AeAuj7PqOBr5L/mne2H3gFQOIQQVZ8Ow4d8acHFQTATw4ZqqQHdQQChRq1ogdcAoPjHWsAj2vfaCSUCvizlqOy+kUgM4IvAFtn/k4LPBdQ9dv8vkO+0ciTOZNUIB+90bsZScbqqcaXwE/Rd7ud7Z8aTrAptmYIQaJBAVw1+QYy8IJ+lzA+E0SNs3ETOB6P/ObBm0SXjDUQG+vd+Xzmwp03jC5JNG7h483ZbreT3HUtCImoIfO3az+L9AFEZejIm9+cMelIcHlWMHqAa7OC0cHs7k/gdou67hOO+8b/KP8gswAAAABJRU5ErkJggg=="),S=function(e){var t=e.user,n=e.index;return Object(c.useEffect)((function(){t&&u.ref(JSON.parse(JSON.parse(t).photoURL).photoURL).getDownloadURL().then((function(e){var t=document.getElementById("".concat(n,"userImage"));t?t.setAttribute("src",e):console.log("error: "+e)}))}),[t,n]),Object(h.jsxs)("div",{className:"userBidItem",children:[Object(h.jsx)("img",{id:"".concat(n,"userImage"),className:"userImage",src:w,alt:"User"}),Object(h.jsx)("div",{className:"userName",children:t?JSON.parse(t).displayName:""})]})},E=n(53),D=n.n(E),I=function(e){var t=e.currentBid,n=e.allBids,a=e.removeBid,i=e.isClosed,s=f(),o=Object(r.a)(s,1)[0].user,l=Object(c.useState)(!1),d=Object(r.a)(l,2),u=d[0],j=d[1];return Object(h.jsxs)("div",{className:"currentBid",children:[Object(h.jsx)("div",{className:"bidValue",children:t.user?"Current bid: ".concat(t.amount):"Starting bid: ".concat(t.amount)}),Object(h.jsx)("div",{className:"bidUser",children:t.user?"Highest bid by: ".concat(t.user):"Be the first to bid..."}),Object(h.jsx)("div",{className:"showBids",onClick:function(){return n.length>0?j(!u):console.log()},style:{color:n.length>0?"Black":"Silver"},children:u?"hide bids":"show bids("+n.length+")"}),u?Object(h.jsx)("div",{className:"allBids",children:n.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"bidUser",children:e.user},"user".concat(t)),Object(h.jsx)("div",{className:"bidAmount",children:e.amount},"amount".concat(t)),Object(h.jsx)("div",{className:"bidTime",children:e.time},"time".concat(t)),Object(h.jsx)("div",{className:"removeBid",onClick:function(){return a(t)},children:o?o.uid!==e.id||i?"":Object(h.jsx)(D.a,{className:"removeAuctionItem",style:{fill:"greenyellow"}}):""},"remove".concat(t))]},t)}))}):Object(h.jsx)(h.Fragment,{})]})},N=function(e){var t=e.endTimeDate,n=e.isClosed,a=e.setAuctionClose,i=[],s=f(),o=Object(r.a)(s,1)[0].timeVariance,l=Object(c.useState)(0),d=Object(r.a)(l,2),u=d[0],j=d[1],m=t;return Object(c.useEffect)((function(){var e=setTimeout((function(){j(function(){var e=+new Date(m)-+new Date-+new Date(o),t={};return e>0?t={days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}:a(),t}())}),1e3);return function(){return clearTimeout(e)}})),n||Object.keys(u).forEach((function(e){u[e]&&i.push(Object(h.jsxs)("span",{children:[u[e]," ",e," "]},i.length))})),Object(h.jsxs)("div",{className:"bidEndDetail",children:[Object(h.jsxs)("div",{className:"bidEnd",children:["Bid Ends: ",m]}),Object(h.jsx)("div",{className:"timeRemaining",children:i.length?i:Object(h.jsx)("span",{children:"Time's up!"})})]})},B=n(39),k=n.n(B),P=function(e){var t=e.updateBid,n=e.nextBid,a=Object(c.useState)(0),i=Object(r.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(!1),d=Object(r.a)(l,2),u=d[0],j=d[1],m=f(),b=Object(r.a)(m,1)[0].user,O=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare").then((function(e){return e.data.formatted})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(v.a)(g.a.mark((function e(){var c,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:c=e.sent,j(!0),a=setTimeout((function(){j(!1),clearTimeout(a)}),5e3),t(n,b.displayName,b.uid,c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(v.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,t(s,b.displayName,b.uid,n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:b?Object(h.jsxs)("div",{className:"placeBid",children:[Object(h.jsxs)("div",{children:["Next Bid: ",n]}),Object(h.jsx)("div",{onClick:function(e){return A()},style:{color:u?"Grey":"Red"},children:"Place Bid"}),"$",Object(h.jsx)("input",{value:"".concat(s),onChange:function(e){return t=e.target.value,void o(t);var t}}),Object(h.jsx)("div",{onClick:function(e){return p()},style:{color:"Red"},children:"Place Bid"})]}):Object(h.jsx)("div",{children:"You must sign in to be able to bid."})})},L=function(e,t,n){var c={user:"",time:"",amount:t};return e.map((function(e,t){return(e.amount>=c.amount||e.amount===c.amount&&e.time>c.time&&e.time<n)&&(c=e),!0})),c},T=(n(277),function(e){var t=e.comments,n=e.addComment,a=e.removeComment,i=e.addImage,s=e.isComment,o=Object(c.useState)(!1),l=Object(r.a)(o,2),d=l[0],j=l[1],m=Object(c.useState)(""),b=Object(r.a)(m,2),O=b[0],A=b[1],p=f(),g=Object(r.a)(p,1)[0].user,v=function(){j(!d),d||C()},x="",C=function(){t&&t.map((function(e,t){return e.image&&u.ref("".concat(e.comment)).getDownloadURL().then((function(e){var n=document.getElementById("imageComment".concat(t));n&&n.setAttribute("src",e)})),u.ref(JSON.parse(JSON.parse(e.user).photoURL).photoURL).getDownloadURL().then((function(e){var n=document.getElementById("userImage".concat(t));n&&n.setAttribute("src",e)})),0}))};return g?Object(h.jsx)(h.Fragment,{children:d?Object(h.jsxs)("div",{className:"auctionItemComments",children:[Object(h.jsx)("div",{className:"hideShowComments",onClick:function(){v()},children:s?"hide comments":"hide chat"}),Object(h.jsx)("div",{className:"commentsGroup",children:t?t.map((function(e,t){return Object(h.jsxs)("div",{className:"comments",children:[Object(h.jsx)("img",{id:"userImage".concat(t),className:"userImage",src:"",alt:"loading"},"userImage".concat(t)),Object(h.jsx)("div",{className:"userName",children:JSON.parse(e.user).displayName},"user".concat(t)),e.image?Object(h.jsx)("img",{id:"imageComment".concat(t),className:"imageComment",src:"",alt:"loading"},"image".concat(t)):Object(h.jsx)("div",{className:"userComment",children:e.comment},"comment".concat(t)),JSON.parse(e.user).uid===g.uid?Object(h.jsx)(D.a,{className:"removeComment",style:{fill:"greenyellow"},onClick:function(){return a(t)}},"remove".concat(t)):Object(h.jsx)("div",{})]},"holder".concat(t))})):""}),Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"newComment",children:[Object(h.jsx)("input",{type:"text",className:"newComment",placeholder:"new comment?",onChange:function(e){return A(e.target.value)},value:O}),Object(h.jsx)("input",{style:{display:"none"},accept:"image/*",type:"file",onChange:function(e){i(e.target.files[0],g),C()},ref:function(e){return x=e}}),Object(h.jsx)("div",{className:"addImage",onClick:function(){return x.click()},children:"Add image"})]}),Object(h.jsx)("button",{onClick:function(e){e.preventDefault();var t={comment:O,user:JSON.stringify(g),image:!1};n(t),A("")},type:"submit",className:"hiddenSumbit",children:"Hidden submit"})]})]}):Object(h.jsxs)("div",{className:"hideShowComments",onClick:function(){v()},style:{color:t&&t.length>0?"Black":"Silver"},children:[s?"show comments":"show chat"," (",t?t.length:0,")"]})}):Object(h.jsx)("div",{})}),U=function(e){var t=e.paymentMethods;return Object(h.jsx)("div",{className:"paymentTypes",children:Object(h.jsxs)("label",{children:["Accepted Payment Methods:",t.toString()]})})},Y=function(e){var t=e.isClosed,n=e.sellerID,a=e.buyerID,i=e.chats,s=e.addChat,o=e.removeChat,l=e.addChatImage,d=e.updateClose,u=e.iscompleteSeller,j=e.iscompleteBuyer,m=f(),b=Object(r.a)(m,1)[0].user,O=Object(c.useState)(!1),A=Object(r.a)(O,2),p=A[0],g=A[1],v=function(e){g(e)},x=function(e,t){d(e,t),t||g(!1)};return b&&t?b.uid===JSON.parse(n).uid?a.id?Object(h.jsxs)("div",{className:"auctionChat",children:[a.user," has won your item. Use the private chat below to confirm collection and payment details. When done tick the box below.",Object(h.jsx)(T,{comments:i,addComment:s,removeComment:o,addImage:l,isComment:!1}),Object(h.jsx)("input",{type:"checkbox",className:"sellerCheck",style:{display:p?"inline":"none"},checked:u,onChange:function(e){return x("seller",e.target.checked)}}),p&&!u?"Confirm closed by clicking again":"",Object(h.jsx)("input",{type:"checkbox",className:"sellerCheck mask",style:{display:p?"none":"inline"},checked:p,onChange:function(e){return v(!0)}})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"The item was unsold. Try re-post it. Check the box below to close this item"}),Object(h.jsx)("input",{type:"checkbox",className:"unsoldCheck",style:{display:p?"inline":"none"},checked:u,onChange:function(e){return x("both",e.target.checked)}}),p&&!u?"Confirm closed by clicking again":"",Object(h.jsx)("input",{type:"checkbox",className:"unsoldCheck mask",style:{display:p?"none":"inline"},checked:p,onChange:function(e){return v(!0)}})]}):b.uid===a.id?Object(h.jsxs)("div",{className:"auctionChat",children:["You have won ",JSON.parse(n).displayName," item. Use the private chat below to confirm collection and payment details. When done tick the box below.",Object(h.jsx)(T,{comments:i,addComment:s,removeComment:o,addImage:l,isComment:!1}),Object(h.jsx)("input",{type:"checkbox",className:"buyerCheck",style:{display:p?"inline":"none"},checked:j,onChange:function(e){return x("buyer",e.target.checked)}}),p&&!u?"Confirm closed by clicking again":"",Object(h.jsx)("input",{type:"checkbox",className:"buyerCheck mask",style:{display:p?"none":"inline"},checked:p,onChange:function(e){return v(!0)}})]}):Object(h.jsx)("div",{children:"This auction is complete."}):Object(h.jsx)("div",{})},M=(n(146),n(240)),Q=n.n(M),J=n(96),W=n.n(J),H=n(241),V=n.n(H),F=function(e){var t=e.itemData,n=e.index,a=e.addWatchList,i=e.removeAuctionItem,s=Object(c.useState)(0),o=Object(r.a)(s,2),l=o[0],j=o[1],m=Object(c.useState)("."),b=Object(r.a)(m,2),O=b[0],A=b[1],p=Object(c.useState)(!1),g=Object(r.a)(p,2),v=g[0],x=g[1],w=Object(c.useState)({}),E=Object(r.a)(w,2),B=E[0],k=E[1],M=f(),J=Object(r.a)(M,1)[0].user,H=Object(c.useState)(!1),F=Object(r.a)(H,2),R=F[0],G=F[1],Z=Object(c.useState)(!1),K=Object(r.a)(Z,2),z=K[0],_=K[1];Object(c.useEffect)((function(){if(t.data.bids.length>0){var e=L(t.data.bids,t.data.startBid,t.data.endTime);k(e),$(e.amount,!1)}else{var n={user:"",time:"",amount:t.data.startBid};k(n),$(n.amount,!0)}x(!1),t.data.watching.map((function(e,t){return e===(!!J&&J.uid)&&x(!0),0})),_(!1),t.data.flagged&&t.data.flagged.map((function(e,t){return e===(!!J&&J.uid)&&_(!0),!1})),G(!1);return function(){k({}),j(0)}}),[t,J]);var q=function(e){var n=t.data.comments?t.data.comments:[];n.push(e),d.collection("auctionItems").doc(t.id).update({comments:n})},X=function(e){var n=t.data.chats?t.data.chats:[];n.push(e),d.collection("auctionItems").doc(t.id).update({chats:n})},$=function(e,t){j(t?1*e:1*e+1)};return Object(h.jsxs)("div",{className:"auctionItem",children:[Object(h.jsx)("div",{className:"removedItem",children:t.data.deleted?"This item was removed by poster.":""}),Object(h.jsx)(S,{user:t.data.user,index:n}),J&&J.uid===JSON.parse(t.data.user).uid?R?Object(h.jsxs)("div",{children:["Are you sure?",Object(h.jsx)(D.a,{className:"removeAuctionItem",style:{fill:"red"},onClick:function(e){return i(t)+G(!1)}}),Object(h.jsx)(D.a,{className:"removeAuctionItem",style:{fill:"green"},onClick:function(e){return G(!1)}})]}):Object(h.jsx)(D.a,{className:"removeAuctionItem",style:{fill:"greenyellow"},onClick:function(e){G(!0)}}):Object(h.jsx)("div",{}),Object(h.jsx)("div",{className:"watchList",onClick:function(e){return a(t)},children:J?v?Object(h.jsx)(W.a,{style:{fill:"greenyellow"}}):Object(h.jsx)(Q.a,{style:{fill:"greenyellow"}}):Object(h.jsx)("div",{})}),Object(h.jsx)("div",{className:"itemName",children:t.data.short_description}),Object(h.jsx)("div",{className:"itemDescription",children:t.data.long_description}),Object(h.jsx)(y,{imageLinks:t.data.images,lotIndex:n}),Object(h.jsx)(I,{currentBid:B,allBids:t.data.bids,removeBid:function(e){t.data.bids.splice(e,1),d.collection("auctionItems").doc(t.id).update({bids:t.data.bids})},isClosed:t.data.closed}),Object(h.jsx)(N,{endTimeDate:t.data.endTime,isClosed:t.data.closed,setAuctionClose:function(){d.collection("auctionItems").doc(t.id).update({closed:!0})}}),Object(h.jsx)(U,{paymentMethods:t.data.paymentMethods}),t.data.closed?Object(h.jsx)("div",{children:"This auction is closed."}):Object(h.jsx)(P,{updateBid:function(e,n,c,a){if(A("."),c===JSON.parse(t.data.user).uid)return A("You cannot bid on your own items."),0;if(a>t.data.endTime)return A("Bid is out of time. Lot is closed."),0;if(1*e>1*B.amount||!B.user.displayName&&1*e===1*B.amount){var i={user:n,id:c,time:a,amount:e},s=[];t.data.bids&&(s=t.data.bids),s.push(i),d.collection("auctionItems").doc(t.id).update({bids:s})}else A("New bids must be higher than current bid.")},nextBid:l,isClosed:t.data.closed}),Object(h.jsx)("div",{className:"bidError",children:O}),Object(h.jsxs)("label",{children:["Collection Details:",Object(h.jsx)("div",{className:"itemCollection",children:t.data.collectionDetails})]}),Object(h.jsx)("div",{className:"place",children:t.data.place}),Object(h.jsx)(T,{comments:t.data.comments,addComment:q,removeComment:function(e){var n=t.data.comments.splice(e,1);n[0].image&&u.ref(n[0].comment).delete().then((function(){})).catch((function(e){console.log("Error has occured while trying to remove image: ".concat(e,"."))}));d.collection("auctionItems").doc(t.id).update({comments:t.data.comments})},addImage:function(e,t){var n=C.a.str(e.name+e.lastModified+e.size+Math.random()).toString(32);u.ref("/".concat(t.uid,"/").concat(n,"/images/comments/").concat(e.name)).put(e,{contentType:"image/jpeg"});var c={comment:"/".concat(t.uid,"/").concat(n,"/images/comments/").concat(e.name),user:JSON.stringify(t),image:!0};q(c)},isComment:!0}),Object(h.jsx)(Y,{isClosed:t.data.closed,sellerID:t.data.user,buyerID:L(t.data.bids,t.data.startBid,t.data.endTime),chats:t.data.chats,addChat:X,removeChat:function(e){var n=t.data.chats.splice(e,1);n[0].image&&u.ref(n[0].chat).delete().then((function(){})).catch((function(e){console.log("Error has occured while trying to remove image: ".concat(e,"."))}));d.collection("auctionItems").doc(t.id).update({chats:t.data.chats})},addChatImage:function(e,t){var n=C.a.str(e.name+e.lastModified+e.size+Math.random()).toString(32);u.ref("/".concat(t.id,"/").concat(n,"/images/chats/").concat(e.name)).put(e,{contentType:"image/jpeg"});var c={chat:"/".concat(t.id,"/").concat(n,"/images/chats/").concat(e.name),user:t,image:!0};X(c)},updateClose:function(e,n){"seller"===e?d.collection("auctionItems").doc(t.id).update({completeSeller:n}):"buyer"===e?d.collection("auctionItems").doc(t.id).update({completeBuyer:n}):"both"===e&&d.collection("auctionItems").doc(t.id).update({completeSeller:n,completeBuyer:n})},iscompleteSeller:t.data.completeSeller,iscompleteBuyer:t.data.completeBuyer}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),J?Object(h.jsx)(V.a,{style:{fill:z?"red":"grey"},onClick:function(e){return function(){var e=t.data.flagged?t.data.flagged:[],n=-1;e.map((function(e,t){return e===J.uid&&(n=t),0})),-1===n?e.push(J.uid):e.splice(n,1),d.collection("auctionItems").doc(t.id).update({flagged:e})}()}}):Object(h.jsx)("div",{})]})},R=function(e){var t=e.auctionItems,n=e.setFilter,c=e.user;return t.length<1?Object(h.jsxs)("div",{className:"auctionList",children:["You currently do not have any items on the auction.",c?Object(h.jsx)(m.b,{to:"/create-auction",children:"Click here to add an item."}):Object(h.jsx)(m.b,{to:"/login",children:"Login to post new Items."})]}):Object(h.jsxs)("div",{className:"auctionList",children:[Object(h.jsx)("div",{onClick:function(){return n("myAuction")},children:"You currently have ".concat(t.length," item").concat(t.length>1?"s":""," on the auction:")}),t.map((function(e,t){return Object(h.jsx)("div",{onClick:function(){return n("byAuctionID",e.id)},children:e.data.short_description},"desc".concat(t))})),Object(h.jsx)(m.b,{to:"/create-auction",children:"Click here to add more items."})]})},G=(n(279),function(e){var t=e.auctionItems,n=e.setFilter,c=e.addWatchList,a=function(){};return Object(h.jsxs)("div",{className:"watchList",children:[Object(h.jsx)("div",{className:"watchListTitle",onClick:function(){return n("watchList")},children:"Your Watchlist:"}),0===t.length?"You have no items in your watch list.":"",t.map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{onClick:function(){return n("byAuctionID",e.id)},children:e.data.short_description},"descWatch".concat(t)),Object(h.jsx)("div",{children:Object(h.jsx)(N,{endTimeDate:e.data.endTime,isClosed:e.data.isClosed,setAuctionClose:a},"bidDetail".concat(t))},"timeWatch".concat(t)),Object(h.jsx)("div",{onClick:function(){return c(e)},children:Object(h.jsx)(W.a,{style:{fill:"greenyellow"}})})]},"watchList".concat(t))}))]})}),Z=function(e){var t=e.auctionItems,n=e.setFilter;return Object(h.jsxs)("div",{className:"endedBids",children:[Object(h.jsx)("div",{className:"endedBidsTitle",onClick:function(){return n("endedBid")},children:"Ended Bids:"}),t.map((function(e,t){return Object(h.jsx)("div",{onClick:function(){return n("byAuctionID",e.id)},children:e.data.short_description},"descEnd".concat(t))}))]})},K=function(e){var t=e.auctionItems,n=e.setFilter;return Object(h.jsxs)("div",{className:"highestBid",children:[Object(h.jsx)("div",{className:"highestBidTitle",onClick:function(){return n("highestBid")},children:"You currently have the highest bids on:"}),t.map((function(e,t){return Object(h.jsxs)("div",{onClick:function(){return n("byAuctionID",e.id)},children:[Object(h.jsx)("div",{children:e.data.short_description},"descHigh".concat(t)),Object(h.jsx)("div",{children:L(e.data.bids,e.data.startBid,e.data.endTime).amount},"bidHigh".concat(t))]},"holderHigh".concat(t))}))]})},z=function(e){var t=e.auctionItems,n=e.setFilter;return Object(h.jsxs)("div",{className:"wonAuction",children:[Object(h.jsx)("div",{className:"wonAuctionTitle",onClick:function(){return n("wonAuction")},children:"You have won the following:"}),t.map((function(e,t){return Object(h.jsx)("div",{onClick:function(){return n("byAuctionID",e.id)},children:Object(h.jsx)("div",{children:e.data.short_description},"descWon".concat(t))},"holderWon".concat(t))}))]})},_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAIAAAC6s0uzAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABJeSURBVHhe7dlrdtvWloXR9LwadztWirV2chiSECkCOA/M+YteG6TllOlv3FF//Q8AOJ0AA0AHAgwAHQgwAHQgwADQgQADQAcCDAAdCDAAdCDAANCBAANABwIMAB0IMAB0IMAA0IEAA0AHAgwAHQgwAHQgwADQgQADQAcCDAAdHBjg/9tbPhcA5ndUgNPMMeRnAoBhXCLAb8kfAACOJMBvy58QAD4w0/8PeHz5kwPATw4M8O5SuQnlDwAAZaYAfyIlHEZ+LACu6ioBfl0K2UN+AgAuQIDflloeL78fACsS4D2lnMfI7wHAEgT4cOnn3vLpAMxJgPtIRXeSDwVgHgI8irT0Y/k4AMYmwINKTj+QDwJgSAI8h0T1t/IpAAxDgKeUrr4v7wegNwGeXtL6prwZgE4EeCmp6zvyTgDOJcDLSmBflrcBcAoBXl8C+7K8DYAjCfC1pLEvyBsAOIYAX1Qy+4K8AYBdCfClpbEvyBsA2IkA87dk9id5GoCPCTA3UtpNeRSADwgwD6S0m/IoAL8iwGxJbJ/LcwC8SYD5WWL7RB4C4B0CzKvS2yfyEACvEWDek94+kYcA+IkA8xvp7SN5AoBNAswvpbdP5CEAnhBgPpLePpInAHhEgNlBknsnZwDuCDD7SHIfyRMANASYPSW5d3IGoAgwO0ty7+QMwB8CzCFS3Vu5ASDAHCfVvZUbwOUJMAdKde/kDHBhAsyxktw7OQNclQBzuCT3Vm4X89dfT79xz05f+z8y3Xq2f9k4Ad35fnKShLeRw2X8aehWLO+v32Mrh/Jw/Mf2FejLl5PzJLyNHC7jWREf7t/jl4e//Ha/tLavQF++nJwn1b2V2zU8K+L9/r18ya//yNSM//nlf2xfgb58OTlVqnsrt2u4j+Kz5Ut+3cihTu3re9tXoC9fTs6W6t7K7QLuo/jK0mqv7et721egL19OOkh1b+V2AW0X29f/eDj+o722r+9tX4G+fDnpI9Vt5HABbRfb1/94OP6jvbav721fgb58Oekm4W3kcAHfafyWqfFs/9Ze29f3tq9AX76c9JTwNnJY3Xcav2VqPNu/tdf29b3tK9CXLyc9pbqNHC5go44bpy/ttX19b/sK9OXLSWcJbyOH1W3UceP0pb22r+9tX4G+fDnpL+Ft5LC0jTpunL601/b1ve0r0JcvJ/2luo0clrZRx43Tl/bavr63fQX68uVkCAlvybq0jTpunL601/b1ve0r0JcvJ0NIeBs5rGujjhunL+21fX1v+wr05cvJKBLeknVdG3XcOH1pr+3re9tXoC9fTkaR8DZyWNRGHTdOX9pr+/re9hXoy5eTgSS8JeuiNur4ffqSXzdyuA3wl+9ftnIQYBiVLycDSXgbOaxou47f1y/59R+ZfjsCQ/H9ZCwJb8m6oh8D+f3Al4e/bOXwwpPAOHxFGUvCW7Ku6JVGfj/TyuFOzo0cgFH5ljKWhLeRw3JezOT3Y98yPZGH/sgEDMwXleEkvCUrwFoEmOEkvCUrwFoEmOEkvCUrwFoEmBGlvSUrwEIEmBElvCUrwEIEmBElvCUrwEIEmBElvCUrwEIEmEGlvSUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmEElvCUrwCoEmBGluiUrwEIEmBElvCUrwEIEmBElvCUrwEIEmBElvCUrwEIEmBElvCUrwEIEmOGkuo0cABYiwAwn1S1ZAdYiwAwn4S1ZAdYiwAwn4S1ZAdYiwAwn4S1ZAdYiwIwl1W3kALAWAWYsqW7JCrAcAWYsCW/JCrAcAWYsCW/JCrAcAWYgqW7JCrAiAWYgCW/JCrAiAWYgCW/JCrAiAWYUqW4jB4AVCTCjSHVLVoBFCTCjSHhLVoBFCTBDSHUbOQAsSoAZQqpbsgKsS4AZQsJbsgKsS4DpL9Vt5ACwLgGmv1S3ZAVYmgDTX8JbsgIsTYDpLNVt5ACwNAGms1S3ZAVYnQDTWcJbsgKsToDpKdVt5ACwOgGmp1S3ZAW4AAGmp4S3ZAW4AAGmm1S3kQPABQgw3aS6JSvANQgwfaS6jRwArkGA6SPVLVkBLkOA6SPhLVkBLkOA6SDVbeQAcBkCTAepbskKcCUCzNlS3UYOAFciwJwt1S1ZAS5GgDlVqtvIAeBiBJhTpbolK8D1CDCnSnhLVoDrEWDOk+o2cgC4HgHmPKluyQpwSQLMSVLdRg4AlyTAnCTVLVkBrkqAOUOq28gB4KoEmDOkuiUrwIUJMIdLdRs5AFyYAHO4VLeRA8CFCTCHS3VLVoBrE2COleo2cgC4NgHmWKluyQpweQLMgVLdRg4AlyfAHCjVLVkBEGCOk+o2cgBAgDlOqluyAvCHAHOIVLeRAwB/CDCHSHVLVgCKALO/VLeRAwBFgNlfqluyAtAQYHaW6jZyAKAhwOws1S1ZAbglwOwp1W3kAMAtAWZPqW7JCsAdAWY3qW4jBwDuCDC7SXVLVgAeEWD2keo2cgDgEQFmH6luyQrAEwLMDlLdRg4APCHA7CDVLVkBeE6A+VSq28gBgOcEmE+luiUrAJsEmI+kuo0cANgkwHwk1S1ZAfiJAPN7qW4jBwB+IsD8XqpbsgLwAgHml1LdRg4AvECA+aVUt2QF4DUCzG+kuo0cAHiNAPMbqW7JCsDLBJi3pbqNHAB4mQDzniS3kQMA7xBg3pPqNnIA4B0CzBuS3EYOALxJgHlDqtvIAYA3CTCvSnIbOQDwPgHmValuyQrArwgwL0l1GzkA8CsCzEtS3ZIVgN8SYH6W6jZyAOC3BJifpbolKwAfEGB+kOo2cgDgAwLMD1LdkhWAzwgwW1LdRg4AfEaA2ZLqlqwAfEyAeSrVbeQAwMcEmKdS3ZIVgD0IMI+luo0cANiDAPNYqluyArATAeaBVLeRAwA7EWD+K8lt5ADAfgSY/0p1GzkAsB8B5kaS28gBgF0JMDdS3UYOAOxKgPlXktvIAYC9CTD/SnUbOQCwNwEmktxGDgAcQICJVLdkBeAYAszfUt1GDgAcQ4D5W6pbsgJwGAHG//wF6ECA8T9/AToQ4KtLdRs5AHAkAb66VLdkBeBgAnxpqW4jBwAOJsCXluqWrAAcT4CvK9Vt5ADA8QT4ulLdkhWAUwjwRaW6jRwAOIUAX1SqW7ICcBYBvqJUt5EDAGcR4CtKdUtWAE4kwJeT6jZyAOBEAnw5qW7JCsC5BPhaUt1GDgCcS4CvJdUtWQE4nQBfSKrbyAGA0wnwhaS6JSsAPQjwVaS6jRwA6EGAryLVLVkB6ESALyHVbeQAQCcCfAmpbskKQD8CvL5Ut5EDAP0I8PpS3ZIVgK4EeHGpbiMHALoS4MWluiUrAL0J8MpS3UYOAPQmwCtLdUtWAAYgwMtKdRs5ADAAAV5WqluyAjAGAV5TqtvIAYAxCPCaUt2SFYBhCPCaEt6SFYBhCPCCUt1GDgAMQ4AXlOqWrACMRIBXk+o2cgBgJAK8mlS3ZAVgMAK8lFS3kQMAgxHgpaS6JSsA4xHgdaS6jRwAGI8AryPVLVkBGJIAryPhLVkBGJIALyLVbeQAwJAEeBGpbskKwKgEeAWpbiMHAEYlwCtIdUtWAAYmwCtIeEtWAAYmwNNLdUtWAMYmwNNLeEtWAMYmwHNLdRs5ADA2AZ5bqluyAjA8AZ5bwluyAjA8AZ5YqtvIAYDhCfDEUt2SFYAZCPCsUt1GDgDMQIBnleqWrABMQoBnlfCWrABMQoCnlOo2cgBgEgI8pVS3ZAVgHgI8pYS3ZAVgHgI8n1S3kQMA8xDg+aS6JSsAUxHg+SS8JSsAUxHgyaS6jRwAmIoATybVLVkBmI0ATybhLVkBmI0AzyTVbeQAwGwEeCapbskKwIQEeCYJb8kKwIQEeBqpbiMHACYkwNNIdUtWAOYkwNNIeEtWAOYkwNNIeEtWAOYkwHNIdRs5ADAnAZ5DqluyAjAtAZ5DwluyAjAtAZ5DwluyAjAtAZ5AqluyAjAzAZ5AwluyAjAzAZ5AwluyAjAzAZ5AwluyAjAzAZ5AwluyAjAzAR5dqluyAjA5AR5dwluyAjA5AR5dwluyAjA5AR5dwluyAjA5AR5aqtvIAYDJCfDQUt2SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfC4Ut2SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPC4Et6SFYAlCPDQ0t6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDQEt6SFYD5CfDo0t6SFYDJCfDoEt6SFYDJCfDoEt6SFYDJCfDoEt6SFYDJCfDoEt5GDgDMTIAnkPCWrADMTIAnkPCWrADMTIAnkPA2cgBgWgI8h4S3ZAVgWgI8h4S3ZAVgWgI8h4S3kQMAcxLgaSS8JSsAcxLgaSS8JSsAcxLgaSS8jRwAmJAAzyThLVkBmJAAzyThbeQAwGwEeDIJb8kKwGwEeDIJbyMHAKYiwPNJeEtWAKYiwPNJeBs5ADAPAZ5SwtvIAYBJCPCUUt1GDgBMQoBnlfA2cgBgBgI8sYS3ZAVgBgI8sYS3kQMAwxPguSW8jRwAGJsAzy3VbeQAwNgEeHoJbyMHAAYmwCtIeBs5ADAqAV5BqnsrNwCGJMCLSHVv5QbAeAR4HanurdwAGIwALyXVvZUbACMR4NWkuo0cABiJAC8o4W3kAMAwBHhBqe6t3AAYgwCvKdW9lRsAAxDgZaW6t3IDoDcBXlmqeys3ALoS4MWlundyBqATAV5fknsnZwB6EOBLSHLv5AzA6QT4KpLcOzkDcC4BvpZU907OAJxFgC8nyb2TMwCnEOArSnLv5AzA8QT4opLcR/IEAEcS4EtLcu/kDMBhBPjqktxH8gQABxBgNBigAwEmktxH8gQA+xFg/pXePpGHANiDAPNf6e0jeQKAjwkwD6S3T+QhAD4gwDyV3j6RhwD4FQFmS2L7XJ4D4E0CzM8S2+fyHAAvE2Beldg+l+cAeIEA857E9rk8B8AmAeY3Etvn8hwATwgwv5fYPpfnALgjwHwqsd2URwEoAsw+UtpNeRQAAWZfKe1P8jTAhQkw+0tmf5KnAS5JgDlKMvuCvAHgSgSYwyWzL8gbAC5AgDlJGvuavAdgXQLM2dLY1+Q9AMsRYPpIYF+WtwGsQoDpLIF9Wd4GMDkBZhQJ7DvyToAJCTDDSV3fkXcCzEOAGVfq+qa8GWBsAswEktb35f0A4xFgZpKu/ko+AmAMAsys0tVfyUcA9CPArCBd/a18CsCJBJilpKifyWcBHEmAWVZy+rF8HMCuBJirSE4/lo8D+IwAc0Vp6U7yoQDvEGCuLhXdVT4a4DkBhhtJ6N7y6QBFgGFL+nmM/B7AJQkwvCHlPFh+M2BpAgwfSTNPkd8SWIIAw85Sy3Pl9wbmIcBwhnSyk/wQwMvy5fkj094EGLrJl3sM+ZlgRflb/oF80K4EGMaSr/vA8oPCufL3r5P8ELsSYJhG/iWYTX56rid/A5aQP9KuBBhWkH8klpY/KnvLf1825T/WrgQY1pd/QoCX5ctzJAEG/pZ/dWA5+Ss+HgEG3pN/1eAs+Zu3HAEGDpd/R7mY/J+fJwQYmEb+XWdX+Y/L6QQYADoQYADoQIABoAMBBoAOBBgAOhBgAOhAgAGgAwEGgA4EGAA6EGAA6ECAAaADAQaADgQYADoQYADoQIABoAMBBoAOBBgAOhBgAOhAgAGgAwEGgA4EGAA6EGAA6ECAAaADAQaADgQYADoQYADoQIABoAMBBoAOBBgAOhBgAOhAgAGgAwEGgNP973//D7lu0XedZnnhAAAAAElFTkSuQmCC",q=(n(280),function(){return Object(h.jsxs)("div",{className:"leftPanel__container",children:[Object(h.jsx)("img",{className:"mainAd__img",src:_,alt:"ad"}),Object(h.jsx)("img",{className:"mainAd__img",src:_,alt:"ad"}),Object(h.jsx)("img",{className:"mainAd__img",src:_,alt:"ad"})]})}),X=["Harare","Bulawayo","Beitbridge","Bindura","Chegutu","Chinhoyi","Chipinge","Chiredzi","Chitungwiza","Epworth","Gokwe","Gweru","Gwanda","Hwange","Kadoma","Kariba","Karoi","Kwekwe","Lupane","Marondera","Masvingo","Mutare","Norton","Redcliff","Rusape","Ruwa","Shurugwi","Victoria Falls","Zvishavane","Other"],$=function(){var e=f(),t=Object(r.a)(e,2),n=t[0],a=n.user,i=n.timeVariance,s=t[1],o=Object(c.useState)([]),l=Object(r.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)(!1),O=Object(r.a)(b,2),A=O[0],p=O[1],x=Object(c.useState)(!1),C=Object(r.a)(x,2),y=C[0],w=C[1],S=Object(c.useState)(!1),E=Object(r.a)(S,2),D=E[0],I=E[1],N=Object(c.useState)(!1),B=Object(r.a)(N,2),P=B[0],T=B[1],U=Object(c.useState)(!1),Y=Object(r.a)(U,2),M=Y[0],Q=Y[1],J=Object(c.useState)("latest"),W=Object(r.a)(J,2),H=W[0],V=W[1],_=Object(c.useState)(""),$=Object(r.a)(_,2),ee=$[0],te=$[1],ne=Object(c.useState)(""),ce=Object(r.a)(ne,2),ae=ce[0],ie=ce[1];Object(c.useEffect)((function(){d.collection("auctionItems").orderBy("timeStamp").onSnapshot((function(e){return j(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(c.useEffect)((function(){a&&ie(JSON.parse(a.photoURL).place)}),[a]),Object(c.useEffect)((function(){s({type:"SET_AUCTION_ITEMS",auctionItems:u})}),[u,s]),Object(c.useEffect)((function(){(function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=+new Date,e.t1=Date,e.next=4,oe();case 4:e.t2=e.sent,e.t3=+new e.t1(e.t2),e.t4=e.t0-e.t3,e.t5=-1,t=e.t4*e.t5,s({type:"SET_TIME_VARIANCE",timeVariance:t});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var se=function(e){var t=e.data.watching?e.data.watching:[],n=-1;t.map((function(e,t){return e===a.uid&&(n=t),0})),-1===n?t.push(a.uid):t.splice(n,1),d.collection("auctionItems").doc(e.id).update({watching:t})},re=function(e){d.collection("auctionItems").doc(e.id).update({deleted:!0})},oe=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare").then((function(e){return e.data.formatted})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){p(!1),w(!1),I(!1),T(!1),Q(!1),te("")},de=function(e,t){le(),"watchList"===e?p(!0):"endedBid"===e?w(!0):"highestBid"===e?I(!0):"wonAuction"===e?T(!0):"myAuction"===e?Q(!0):"byAuctionID"===e&&te(t)},ue=function(e){return!!a&&JSON.parse(e.data.user).uid===a.uid},je=function(e){return L(e.data.bids,e.data.startBid,e.data.endTime).id===(!!a&&a.uid)},me=function(e){return e.data.closed},be=function(e){return!e.data.closed},he=function(e){return!(e.data.flagged&&5<=e.data.flagged.length)&&(A?!!a&&e.data.watching.includes(a.uid):y?!!a&&JSON.parse(e.data.user).uid===a.uid&&e.data.closed&&!e.data.completeSeller:D?L(e.data.bids,e.data.startBid,e.data.endTime).id===(!!a&&a.uid)&&!e.data.closed:P?e.data.closed&&L(e.data.bids,e.data.startBid,e.data.endTime).id===(!!a&&a.uid)&&!e.data.completeBuyer:M?!!a&&JSON.parse(e.data.user).uid===a.uid&&!e.data.closed:ee?e.id===ee:!e.data.closed&&(void 0===e.data.deleted||!e.data.deleted)&&e.data.place===ae)};return Object(h.jsxs)("div",{className:"auctionScreen",children:[Object(h.jsx)("div",{className:"leftPanel",children:Object(h.jsx)(q,{})}),Object(h.jsxs)("div",{className:"auctionItemHolder",children:[Object(h.jsxs)("div",{className:"auctionHeaders",children:[Object(h.jsx)(m.b,{to:a?"/create-auction":"/login",children:Object(h.jsx)("div",{className:"newAuctionItem",children:a?"Add Item to Auction.":"Login to post new Items."})}),Object(h.jsx)("hr",{}),Object(h.jsx)("label",{children:A||y||D||P||M||ee?Object(h.jsx)("div",{}):Object(h.jsx)("select",{className:"places",value:ae,onChange:function(e){return ie(e.target.value)},children:X.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},"place".concat(t))}))})}),Object(h.jsx)("div",{children:Object(h.jsx)("small",{children:"(Showing ".concat(u.filter(he).length," items)")})}),A?"To an item to your watchlist click on the 'eye' icon on any post you want to keep an eye on.":"",y?"Your auction items that have ended: ":"",D?"You have the highest bid so far on the following: ":"",P?"You have won the following items: ":"",M?"You have the following items in the aution: ":"",ee?"Showing single item:":"",A||y||D||P||M||ee?Object(h.jsx)("div",{}):Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"Sort items by..."}),Object(h.jsxs)("select",{className:"sortOrder",value:H,onChange:function(e){return V(e.target.value)},children:[Object(h.jsx)("option",{value:"latest",children:"Post Time"}),Object(h.jsx)("option",{value:"bidEndTime",children:"Closing Time"})]})]})]}),u.filter(he).sort((function(e,t){return"latest"===H?new Date(t.data.timeStamp)-new Date(e.data.timeStamp):"bidEndTime"!==H||new Date(e.data.endTime)-new Date(t.data.endTime)})).map((function(e,t){return Object(h.jsx)(F,{itemData:e,index:t,addWatchList:se,removeAuctionItem:re},t)}))]}),Object(h.jsxs)("div",{className:"rightPanel",children:[Object(h.jsxs)("div",{className:"timeVariance",children:["Your device's time is ",Object(h.jsx)("b",{children:function(e){var t,n,c,a="",i=!1;return e>864e5?"more than one day a head. Please check your date/time on your device":e<-864e5?"more than one day behind. Please check your date/time on your device":(e<0&&(i=!0,e*=-1),e-=36e5*(c=Math.floor(e/36e5)),n=Math.floor(e/6e4),console.log(e),e-=6e4*n,console.log(e),t=(e/1e3).toFixed(1),a+=c?"".concat(c," hours, "):"",a+=n?"".concat(n," minutes, "):"",a+="".concat(t," seconds "),a+=i?"behind":"ahead")}(i)}),"."]}),Object(h.jsx)("hr",{}),Object(h.jsx)("div",{className:"showAll",onClick:function(){return le()},children:"Show all items"}),Object(h.jsx)("hr",{}),Object(h.jsx)(R,{auctionItems:u.filter(ue).filter(be),setFilter:de,user:a}),Object(h.jsx)("hr",{}),Object(h.jsx)(G,{auctionItems:u.filter((function(e){return!!a&&e.data.watching.includes(a.uid)})),setFilter:de,addWatchList:se}),Object(h.jsx)("hr",{}),Object(h.jsx)(Z,{auctionItems:u.filter(ue).filter(me).filter((function(e){return!e.data.completeSeller})),setFilter:de}),"  ",Object(h.jsx)("hr",{}),Object(h.jsx)(K,{auctionItems:u.filter(je).filter(be),setFilter:de}),Object(h.jsx)("hr",{}),Object(h.jsx)(z,{auctionItems:u.filter(me).filter(je).filter((function(e){return!e.data.completeBuyer})),setFilter:de})]})]})},ee=(n(281),function(){var e=f(),t=Object(r.a)(e,1)[0].user,n=Object(b.f)();return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsxs)("div",{className:"leftSide",children:[Object(h.jsx)(m.b,{className:"links",to:"/",children:"Home"}),Object(h.jsx)(m.b,{className:"links",to:"/auction",children:"Auction"}),Object(h.jsx)(m.b,{className:"links",to:"/store",children:"Store"}),Object(h.jsx)(m.b,{className:"links",to:"/notice-board",children:"Notice Board"})]}),Object(h.jsxs)("div",{className:"rightSide",children:[Object(h.jsx)(m.b,{className:"links linkAbout",to:"/about",children:"About"}),t?Object(h.jsx)(m.b,{className:"links linkAbout",to:"/profile/"+t.uid,children:t.displayName}):Object(h.jsx)("div",{}),t?Object(h.jsx)("div",{onClick:function(){j.signOut(),n.push("/")},className:"logoutOption links",children:"Logout"}):Object(h.jsx)(m.b,{className:"links",to:"/login",children:Object(h.jsx)("div",{className:"loginOption",children:"Login/Signup"})})]})]})}),te=(n(282),function(){var e=Object(b.f)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(""),o=Object(r.a)(s,2),l=o[0],d=o[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),A=O[0],f=O[1],p=Object(c.useState)(""),g=Object(r.a)(p,2),v=g[0],x=g[1],y=Object(c.useState)(""),S=Object(r.a)(y,2),E=S[0],D=S[1],I=Object(c.useState)(""),N=Object(r.a)(I,2),B=N[0],k=N[1],P="";return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("div",{className:"signUp",children:[Object(h.jsx)("h1",{children:"Sign In"}),Object(h.jsxs)("form",{children:[Object(h.jsx)("h4",{children:"E-mail"}),Object(h.jsx)("input",{type:"text",value:a,onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("h4",{children:"Password"}),Object(h.jsx)("input",{type:"password",value:A,onChange:function(e){return f(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),j.signInWithEmailAndPassword(a,A).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton",children:"Sign In"})})]})]}),Object(h.jsxs)("div",{className:"signIn",children:[Object(h.jsx)("h1",{children:"Sign Up"}),Object(h.jsxs)("form",{children:[Object(h.jsx)("h4",{children:"Username"}),Object(h.jsx)("input",{type:"text",value:E,onChange:function(e){return D(e.target.value)}}),Object(h.jsxs)("label",{children:[Object(h.jsx)("h4",{children:"Select your default Town/City:"}),Object(h.jsx)("select",{className:"places",id:"userPlace",children:X.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},"place".concat(t))}))})]}),Object(h.jsx)("h4",{children:"Add Profile Picture"}),Object(h.jsx)("img",{className:"image",id:"profilePicturePreview",src:w,alt:""}),Object(h.jsx)("div",{}),Object(h.jsx)("input",{style:{display:"none"},accept:"image/*",type:"file",onChange:function(e){k(e.target.files[0]),document.getElementById("profilePicturePreview").src=URL.createObjectURL(e.target.files[0])},ref:function(e){return P=e}}),Object(h.jsx)("button",{type:"button",onClick:function(){return P.click()},className:"addProfileImage",children:"Add Image"}),Object(h.jsx)("h4",{children:"E-mail"}),Object(h.jsx)("input",{type:"text",value:l,onChange:function(e){return d(e.target.value)}}),Object(h.jsx)("h4",{children:"Password"}),Object(h.jsx)("input",{type:"password",value:v,onChange:function(e){return x(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(t){t.preventDefault();var n=C.a.str(B.name+B.lastModified+B.size+Math.random()).toString(32);j.createUserWithEmailAndPassword(l,v).then((function(t){if(t){var c={tier:0,payments:[],photoURL:"/"+t.user.uid+"/images/profile/".concat(n,"/").concat(B.name),place:document.getElementById("userPlace").value};t.user.updateProfile({displayName:E,photoURL:JSON.stringify(c)});console.log(c.photoURL),u.ref(c.photoURL).put(B,{contentType:"image/jpeg"}),e.push("/")}})).catch((function(e){return alert(e.message)}))},className:"login__registerButton",children:"Create your Zimboland Account"})})]}),Object(h.jsx)("p",{children:"By join and /or signing-in you agree to Zimboland's Conditions of Use & Sale. Please see our Privacy Notice, our Cookie Notice and our Interest-Based Ads Notice."})]})]})}),ne=n(9),ce=["USD","ZAR","ZIM$"],ae=["Cash","Ecocash","Zipit","OneWallet","ROtD"],ie=[{activePosts:3,maxAuctionLength:3,maxWatchedItems:10,imagePerItem:1,tierName:"Free Tier",cost:0,active:!0,code:10},{activePosts:5,maxAuctionLength:5,maxWatchedItems:20,imagePerItem:3,tierName:"Bronze Tier",cost:1,active:!0,code:20},{activePosts:10,maxAuctionLength:10,maxWatchedItems:20,imagePerItem:5,tierName:"Silver Tier",cost:5,active:!0,code:30},{activePosts:50,maxAuctionLength:30,maxWatchedItems:100,imagePerItem:10,tierName:"Gold Tier",cost:12,active:!0,code:40}],se=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],i=f(),s=Object(r.a)(i,2),o=s[0],l=o.user,u=o.auctionItem,j=s[1],O=Object(b.f)(),A={id:"",short_description:u?u.auctionObject.short_description:"",long_description:u?u.auctionObject.long_description:"",images:u?u.auctionObject.images:[],bidCurrency:u?u.auctionObject.bidCurrency:"USD",startBid:u?u.auctionObject.startBid:0,endDate:u?u.auctionObject.endTime.substr(0,10):"",endTime:u?u.auctionObject.endTime.substr(11,8):"",collectionDetails:u?u.auctionObject.collectionDetails:"",paymentMethods:u?u.auctionObject.paymentMethods:[],place:u?u.auctionObject.place:"",uploading:!!u&&u.auctionObject.paymentMethods};Object(c.useEffect)((function(){if(u){var e=u.auctionObject.paymentMethods,t="";ae.map((function(n,c){return(t=document.getElementById("currency".concat(c)))&&(t.checked=e.includes(t.value)),0})),(t=document.getElementById("userPlace"))&&(t.value=u.auctionObject.place,x({type:"setPlace",data:u.auctionObject.place})),(t=document.getElementById("currency"))&&(t.value=u.auctionObject.bidCurrency,x({type:"setBidCurrency",data:u.auctionObject.bidCurrency}))}}),[u]);var p=Object(c.useReducer)((function(e,t){switch(t.type){case"setId":return Object(ne.a)(Object(ne.a)({},e),{},{id:t.data});case"setShort_description":return Object(ne.a)(Object(ne.a)({},e),{},{short_description:t.data});case"setLong_description":return Object(ne.a)(Object(ne.a)({},e),{},{long_description:t.data});case"setImages":return Object(ne.a)(Object(ne.a)({},e),{},{images:t.data});case"setBidCurrency":return Object(ne.a)(Object(ne.a)({},e),{},{bidCurrency:t.data});case"setStartBid":return Object(ne.a)(Object(ne.a)({},e),{},{startBid:t.data});case"setEndDate":return Object(ne.a)(Object(ne.a)({},e),{},{endDate:t.data});case"setEndTime":return Object(ne.a)(Object(ne.a)({},e),{},{endTime:t.data});case"setCollectionDetails":return Object(ne.a)(Object(ne.a)({},e),{},{collectionDetails:t.data});case"setPaymentMethods":return Object(ne.a)(Object(ne.a)({},e),{},{paymentMethods:t.data});case"setPlace":return Object(ne.a)(Object(ne.a)({},e),{},{place:t.data});case"setUploading":return Object(ne.a)(Object(ne.a)({},e),{},{uploading:t.data});default:throw console.log(t.type),new Error}}),A),g=Object(r.a)(p,2),v=g[0],x=g[1];Object(c.useEffect)((function(){d.collection("auctionItems").where("user.id","==",l.uid).orderBy("timeStamp").onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),x({type:"setPlace",data:v.place?v.place:JSON.parse(l.photoURL).place});return function(){a([])}}),[l,v.place]);var C="";return console.log(l.tier),n.length<ie[l.tier].activePosts?Object(h.jsx)("div",{className:"newAuctionItem",children:Object(h.jsxs)("form",{className:"newAuctionForm",children:[Object(h.jsxs)("label",{children:["Item:",Object(h.jsx)("input",{className:"shortDescription",type:"text",value:v.short_description,onChange:function(e){return x({type:"setShort_description",data:e.target.value})}})]}),Object(h.jsxs)("label",{children:["Description:",Object(h.jsx)("input",{className:"longDescription",type:"text",value:v.long_description,onChange:function(e){return x({type:"setLong_description",data:e.target.value})}})]}),Object(h.jsxs)("label",{children:["Upload Images:",Object(h.jsx)("img",{id:"make",src:"",alt:""}),Object(h.jsx)("input",{style:{display:"none"},accept:"image/*",type:"file",onChange:function(e){var t=v.images;t.push(e.target.files[0]),x({type:"setImages",data:t}),document.getElementById("make").src=URL.createObjectURL(e.target.files[0])},ref:function(e){return C=e}}),Object(h.jsx)("button",{type:"button",onClick:function(){return C.click()},children:"Select File"})]}),Object(h.jsxs)("label",{children:["Select Currency:",Object(h.jsx)("select",{className:"currency",id:"currency",onChange:function(e){return x({type:"setBidCurrency",data:e.target.value})},children:ce.map((function(e,t){return Object(h.jsx)("option",{value:"".concat(e),children:e},t)}))})]}),Object(h.jsxs)("label",{children:["Payment Methods:",Object(h.jsx)("div",{className:"currency",children:ae.map((function(e,t){return Object(h.jsx)("div",{children:Object(h.jsxs)("label",{children:[e,Object(h.jsx)("input",{id:"currency".concat(t),type:"checkbox",value:"".concat(e),onChange:function(e){return function(e){var t=v.paymentMethods,n=e.target.value;e.target.checked?t.push(n):t=t.filter((function(e){return e!==n})),x({type:"setPaymentMethods",data:t})}(e)}},t)]})},t)}))})]}),Object(h.jsxs)("label",{children:["Minimum Accept Bid:",Object(h.jsx)("input",{className:"startBid",type:"number",value:v.startBid,onChange:function(e){return x({type:"setStartBid",data:e.target.value})}})]}),Object(h.jsxs)("label",{children:["Auction ends:",Object(h.jsx)("input",{className:"endBid",type:"date",value:v.endDate,onChange:function(e){return x({type:"setEndDate",data:e.target.value})}}),Object(h.jsx)("input",{className:"endBid",type:"time",value:v.endTime,onChange:function(e){return x({type:"setEndTime",data:e.target.value})}})]}),Object(h.jsxs)("label",{children:["Collection Details:",Object(h.jsx)("input",{className:"collectionDetails",type:"text",value:v.collectionDetails,onChange:function(e){return x({type:"setCollectionDetails",data:e.target.value})}})]}),Object(h.jsx)("label",{children:Object(h.jsx)("select",{className:"places",id:"userPlace",value:v.place?v.place:JSON.parse(l.photoURL).place,onChange:function(e){return x({type:"setPlace",data:e.target.value})},children:X.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},"place".concat(t))}))})}),Object(h.jsx)("button",{onClick:function(e){if(e.preventDefault(),!v.short_description)return alert("Please enter a name for your item."),!1;if(!v.long_description)return alert("Please enter a description for your item."),!1;if(v.images.length<1)return alert("Please upload an image for your item."),!1;if(!v.paymentMethods)return alert("Please select at least one payment method for your item."),!1;if(!v.endDate)return alert("Please select an end date for your item."),!1;if(!v.endTime)return alert("Please select an end time for your item."),!1;if(!v.collectionDetails)return alert("Please enter collection details for your item."),!1;if(!v.place)return alert("Please enter a town or city for collection, for your item."),!1;var t=v.endDate+" "+v.endTime+":00",n={id:v.id,short_description:v.short_description,long_description:v.long_description,images:v.images,bidCurrency:v.bidCurrency,startBid:v.startBid,endTime:t,collectionDetails:v.collectionDetails,paymentMethods:v.paymentMethods,place:v.place};j({type:"SET_NEW_AUCTION_ITEM",auctionItem:{auctionObject:n}}),O.push("/confirm")},type:"submit",className:"addAuction",children:"Submit"}),Object(h.jsx)(m.b,{to:"/",children:Object(h.jsx)("button",{className:"cancelAuction",children:"Cancel"})})]})}):Object(h.jsx)("div",{children:"Too many items"})},re=function(){var e=f(),t=Object(r.a)(e,2),n=t[0],a=n.user,i=n.auctionItem,s=t[1];console.log(i);var o=Object(c.useState)([]),l=Object(r.a)(o,2),j=l[0],O=l[1],A=C.a.str(i.auctionObject.short_description+i.auctionObject.long_description+i.auctionObject.startBid+i.auctionObject.collectionDetails+i.auctionObject.endTime+Math.random()).toString(32),p=Object(b.f)();Object(c.useEffect)((function(){var e=j;i.auctionObject.images.map((function(t,n){return e.push("/".concat(a.uid,"/").concat(A,"/images/").concat(t.name)),0})),O(e);return function(){O([])}}),[j,i.auctionObject,a.uid,A]);var x=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare").then((function(e){return e.data.formatted})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x();case 3:n=e.sent,d.collection("auctionItems").add({bidCurrency:i.auctionObject.bidCurrency,bids:[],collectionDetails:i.auctionObject.collectionDetails,comments:[],images:j,long_description:i.auctionObject.long_description,paymentMethods:i.auctionObject.paymentMethods,short_description:i.auctionObject.short_description,startBid:i.auctionObject.startBid,endTime:i.auctionObject.endTime,place:i.auctionObject.place,user:JSON.stringify(a),timeStamp:n,closed:!1,watching:[],completeSeller:!1,completeBuyer:!1,chat:[]}),i.auctionObject.images.map((function(e,t){return u.ref("/".concat(a.uid,"/").concat(A,"/images/").concat(e.name)).put(e,{contentType:"image/jpeg"}),0})),p.push("/auction"),s({type:"SET_NEW_AUCTION_ITEM",auctionItem:null});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"confirmAuctionItem",children:Object(h.jsxs)("form",{children:[Object(h.jsx)(S,{user:JSON.stringify(a)}),Object(h.jsx)("div",{className:"itemName",children:i.auctionObject.short_description}),Object(h.jsx)("div",{className:"itemDescription",children:i.auctionObject.long_description}),Object(h.jsx)(y,{imageLinks:i.auctionObject.images,lotIndex:0,isPreview:!0}),"  ",Object(h.jsx)(N,{endTimeDate:i.auctionObject.endTime,isClosed:!1,setAuctionClose:function(){}}),Object(h.jsx)(U,{paymentMethods:i.auctionObject.paymentMethods}),Object(h.jsx)("div",{className:"bidError",children:""}),Object(h.jsx)("div",{className:"itemCollection",children:i.auctionObject.collectionDetails}),Object(h.jsx)("div",{className:"place",children:i.auctionObject.place}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:w,type:"submit",className:"savePost",children:"Confirm"}),Object(h.jsx)("button",{onClick:function(){p.push("/create-auction")},className:"editPost",children:"Edit"}),Object(h.jsx)(m.b,{to:"/",children:Object(h.jsx)("button",{className:"cancelPost",children:"Cancel"})})]})})},oe=(n(283),function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)([]),s=Object(r.a)(i,2),o=(s[0],s[1],f()),l=Object(r.a)(o,1)[0],j=l.user,O=l.auctionItems,A=Object(b.g)().name;Object(c.useEffect)((function(){j&&d.collection("payments").where("userID","==",j.uid).onSnapshot((function(e){return a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){a([])}}),[j]);var p=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare").then((function(e){return e.data.formatted})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Date(p);case 2:return e.sent,n.map((function(e,t){console.log(e)})),e.abrupt("return","4 it run");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=j?JSON.parse(j.photoURL):"";Object(c.useEffect)((function(){u.ref(C.photoURL).getDownloadURL().then((function(e){var t=document.getElementById("profilePicture");t?t.setAttribute("src",e):console.log("error"+e)}))}));return j?A===j.uid?Object(h.jsxs)("div",{className:"userProfile",children:[Object(h.jsxs)("div",{children:[j.displayName,"'s Profile Page"]}),Object(h.jsx)("img",{id:"profilePicture",className:"profilePicture",scr:C.photoURL,alt:""}),Object(h.jsxs)("div",{children:["You are currenly on ",Object(h.jsxs)("b",{children:[" ",x," "]})," tier."]})," ",Object(h.jsx)(m.b,{className:"paymentLink",to:"/payments",children:Object(h.jsx)("div",{children:"Make Payment"})}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"Change Password"}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"Auction Details:"}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"All Auction items"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"You currently have the following items on auction:"}),O.filter((function(e){return!!j&&JSON.parse(e.data.user).uid===j.uid})).filter((function(e){return!e.data.closed})).map((function(e,t){return JSON.parse(e.data.user).uid===j.uid?Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:e.data.short_description})}):Object(h.jsx)("div",{})})),Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"You have sold X-number items"}),Object(h.jsx)("div",{children:"You have bought X-number items"})," ",Object(h.jsx)("br",{}),Object(h.jsx)("div",{children:"Change Settings"})]}):Object(h.jsx)("div",{className:"userProfile",children:Object(h.jsx)("div",{children:j.uid})}):Object(h.jsx)("div",{children:"You need to login in to view profile pages."})}),le=function(){return Object(h.jsx)("div",{className:"confirmPayment",children:"Thank you!"})},de=(n(284),function(){var e=f(),t=Object(r.a)(e,1)[0].user;return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("h1",{children:Object(h.jsx)("span",{className:"zimboland",children:"Welcome to Zimboland!"})}),Object(h.jsx)("h3",{children:"We have three parts to our website: The Auction, The Store, and the Notice Board."}),Object(h.jsx)(m.b,{className:"links",to:"/auction",children:Object(h.jsx)("h2",{children:"The Auction"})}),Object(h.jsx)("div",{children:"Post your items in the live always on auction. Other users of the website can bid on your items, and the highest bidder wins."}),Object(h.jsx)(m.b,{className:"links",to:"/store",children:Object(h.jsx)("h2",{children:"The Store"})}),Object(h.jsx)("div",{children:"Want to sell your items or advertive your service. Do so on our store page. Post you details for other users to see."}),Object(h.jsx)(m.b,{className:"links",to:"/notice-board",children:Object(h.jsx)("h2",{children:"The Notice Board"})}),Object(h.jsx)("div",{children:"Have something to say, ask, or just rant about. Post here on the notice board."}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),t?Object(h.jsx)("div",{}):Object(h.jsxs)("div",{children:["You are not login in. Sign up today for use of full features.",Object(h.jsx)("b",{children:Object(h.jsx)(m.b,{className:"links",to:"/login",children:Object(h.jsx)("span",{className:"signin",children:"Click here"})})}),"to login/sign-up."]})]})}),ue=function(e){var t=e.paymentItemDetail;return Object(h.jsxs)("div",{className:"paymentItem",children:[Object(h.jsx)("div",{className:"paymentItem__name",children:t.tierName}),Object(h.jsxs)("div",{className:"paymentItem__posts",children:[t.activePosts," active posts"]}),Object(h.jsxs)("div",{className:"paymentItem__days",children:["Length of auction: ",t.maxAuctionLength]}),Object(h.jsxs)("div",{className:"paymentItem__watched",children:["Watched item: ",t.maxWatchedItems]}),Object(h.jsxs)("div",{className:"paymentItem__pictures",children:["Pictures per item: ",t.imagePerItem]}),Object(h.jsxs)("div",{className:"paymentItem__cost",children:["US$",t.cost,".00"]})]})},je=n(242),me=(n(527),function(){return Object(h.jsx)("div",{className:"loadingIcon",children:Object(h.jsx)("div",{className:"loadingio-spinner-double-ring-atqazp9yo7e",children:Object(h.jsxs)("div",{className:"ldio-ce1mgx8e4nq",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{})}),Object(h.jsx)("div",{children:Object(h.jsx)("div",{})})]})})})}),be=function(e){var t=e.payments,n=function(){return t.sort((function(e,t){return e.startDate-t.startDate})).map((function(e,t){return Object(h.jsxs)("div",{className:"holderListPayments".concat(t),children:[Object(h.jsx)("div",{className:"tierNameListPayments".concat(t),children:e.tier.tierName},"tierNameListPayments".concat(t)),Object(h.jsx)("div",{className:"endDateListPayments".concat(t),children:"".concat(e.startDate," to ").concat(e.endDate)},"endDateListPayments".concat(t))]},"holderListPayments".concat(t))}))};return n(),Object(h.jsx)("div",{className:"currentTier",children:0===t.length?Object(h.jsx)("div",{children:"You currently using Free Tier."}):Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:n()})})})},he=function(e){var t=e.selectedTier,n=void 0===t?20:t,a=Object(b.f)(),i=f(),s=Object(r.a)(i,2),o=s[0],l=o.user,u=o.timeVariance,j=s[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),A=O[0],p=O[1],x=Object(c.useState)(""),y=Object(r.a)(x,2),w=y[0],S=y[1],E=Object(c.useState)(0),D=Object(r.a)(E,2),I=D[0],N=D[1],B=Object(c.useState)(1),P=Object(r.a)(B,2),L=P[0],T=P[1],U=Object(c.useState)(0),Y=Object(r.a)(U,2),M=Y[0],Q=Y[1],J=Object(c.useState)(!1),W=Object(r.a)(J,2),H=W[0],V=W[1],F=Object(c.useState)([]),R=Object(r.a)(F,2),G=R[0],Z=R[1],K=Object(c.useState)("none"),z=Object(r.a)(K,2),_=z[0],q=z[1],X=Object(c.useState)(0),$=Object(r.a)(X,2),ee=$[0],te=$[1],ne=Object(c.useState)(0),ce=Object(r.a)(ne,2),ae=ce[0],se=ce[1],re=Object(c.useState)(0),oe=Object(r.a)(re,2),le=oe[0],de=oe[1],he=Object(c.useState)(0),Oe=Object(r.a)(he,2),Ae=Oe[0],fe=Oe[1],pe="",ge=new je.Paynow("12579","61633d89-80d0-4177-a015-fca9d915e858"),ve="",xe="",Ce=Object(c.useCallback)((function(){return+new Date-+new Date(u)}),[u]),ye=function(e){return!e.expired},we=function(e){return!e.changed},Se=Object(c.useCallback)((function(e){var t=new Date(Ce()).setHours(0,0,0,0);return new Date(e.endDate)>t}),[Ce]);Object(c.useEffect)((function(){l&&(d.collection("payments").where("userID","==",l.uid).onSnapshot((function(e){return Z(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),ie.map((function(e,t){return e.code===n&&Te(e),0})));return function(){Z([]),Te(0)}}),[l,n,Ce]),Object(c.useEffect)((function(){if(G.length>0&&G[0].data&&G[0].data.payments){var e=G[0].data.payments.filter(ye).filter(we).filter(Se).map((function(e,t){return e.endDate})).reduce((function(e,t){return e>t?e:t}));te(e);return function(){te(0)}}}),[G,Se]),Object(c.useEffect)((function(){Q(parseFloat(L*I.cost*87*1).toFixed(2));return function(){Q(0)}}),[L,I.cost,87]),Object(c.useEffect)((function(){(function(){var e=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=+new Date,e.t1=Date,e.next=4,Ee();case 4:e.t2=e.sent,e.t3=+new e.t1(e.t2),e.t4=e.t0-e.t3,e.t5=-1,t=e.t4*e.t5,j({type:"SET_TIME_VARIANCE",timeVariance:t});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j]);var Ee=function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare").then((function(e){return e.data.formatted})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=Object(c.useCallback)((function(){var e=new Date(Ce()).setHours(0,0,0,0);if(G.length>0&&G[0].data&&G[0].data.payments){var t=G[0].data.payments.filter(ye).filter(we).filter(Se).map((function(t,n){var c=new Date(t.endDate).setHours(0,0,0,0)-e,a=new Date(t.endDate)-new Date(t.startDate),i=0;return 0!==a&&(i=Math.round((parseInt(t.amount)+parseInt(t.additionalAmount))*c/a)),e=new Date(t.endDate),i})).reduce((function(e,t){return e+t}));se(Math.ceil(30.5*t/(87*I.cost))),de(Math.ceil(t))}}),[G,I,87,Ce,Se]);Object(c.useEffect)((function(){De()}),[De]);var Ie=function(){var e=new Date(Ce()),t=new Date(ee);return console.log(e),console.log(t),e},Ne=function(e){var t=new Date(e);return t.setDate(t.getDate()+Math.ceil(30.5*L)+("convert"===_&&Ye()?ae:0)),console.log(t),t},Be=function(){if(fe(Ae+1),G.length>0&&G[0].data&&G[0].data.payments){var e=new Date(Ce()).setHours(0,0,0,0)+72e5,t=0;G[0].data.payments.sort((function(e,t){return t.tier.code-e.tier.code})),G[0].data.payments.filter(ye).filter(Se).map((function(n,c){var a=new Date(n.startDate),i=new Date(n.endDate);return t=e-a,i=Date.parse(i)+t,a=Date.parse(a)+t,n.startDate=new Date(a).toISOString().split("T")[0],n.endDate=new Date(i).toISOString().split("T")[0],e=i,0}))}},ke=function(){if(G.length>0&&G[0].data&&G[0].data.payments)if(M>le)G[0].data.payments.filter(ye).filter(Se).map((function(e,t){return e.expired=!0,0}));else{var e=M,t=new Date(Ce()).setHours(0,0,0,0)+72e5;G[0].data.payments.sort((function(e,t){return e.tier.code-t.tier.code})),G[0].data.payments.filter(ye).filter(we).filter(Se).map((function(n,c){var a=new Date(n.startDate),i=new Date(n.endDate),s=0;if((s=a>t?n.amount:Math.round((i-t)/(i-a)*n.amount))>e){var r=Math.round(e/s*(i-a));n.endDate=new Date(a+r).toISOString().split("T")[0],e=0}else n.expired=!0,e-=n.amount;return 0}))}},Pe=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n,c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!("discount"===_&&Ye()&&le>=M)){e.next=5;break}t={status:"paid"},e.next=8;break;case 5:return e.next=7,ge.pollTransaction(pe);case 7:t=e.sent;case 8:e.t0=!0,e.next=e.t0===("paid"===t.status||"awaiting delivery"===t.status)?11:e.t0===("cancelled"===t.status)?40:45;break;case 11:return console.log("paid"),clearInterval(ve),e.next=15,Ie();case 15:if(n=e.sent,c={date:new Date(Ce()),amount:M,additionalAmount:"convert"===_&&Ye()?le:0,tier:I,months:L,startDate:n.toISOString().split("T")[0],endDate:Ne(n).toISOString().split("T")[0],pollUrl:pe,expired:!1,changed:!1},i=function(){G.length>0&&G[0].data&&G[0].data.payments&&G[0].data.payments.push(c)},"discount"!==_||!Ye()){e.next=25;break}return console.log("discount"),e.next=22,ke();case 22:i(),e.next=36;break;case 25:if("convert"!==_||!Ye()){e.next=31;break}console.log("convert"),console.log("converting"),G.length>0&&G[0].data&&G[0].data.payments&&G[0].data.payments.filter(ye).filter(we).filter(Se).map((function(e,t){return console.log("changing"),e.changed=!0,0})),i(),e.next=36;break;case 31:return console.log("sort"),i(),e.next=35,Be();case 35:console.log(G);case 36:return G.length>0&&G[0].data&&G[0].data.payments?d.collection("payments").doc(G[0].id).update({payments:G[0].data.payments}):(d.collection("payments").add({userID:l.uid,payments:[c]}),console.log("done"),console.log(c)),xe&&xe.close(),a.push("/paymentConfirmed"),e.abrupt("break",47);case 40:return clearInterval(ve),V(!1),xe.closed||xe.close(),t.error?(console.log(t.error),console.log("error")):(console.log("cancelled by user.."),console.log(xe.closed)),e.abrupt("break",47);case 45:xe&&xe.closed&&console.log("cancelled?"),console.log(t.status);case 47:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("discount"===_&&Ye()&&le>=M)){e.next=5;break}V(!1),Pe(),e.next=13;break;case 5:return t=C.a.str(l.uid+I+"code").toString(32),ge.resultUrl="https://example.com/gateways/paynow/update",ge.returnUrl="httpw://www.example.com/return?gateway=paynow",e.next=10,ge.createPayment(t,l.email);case 10:(n=e.sent).add(I.tierName,M-("discount"===_&&Ye()?le:0)),"ecocash"===A||"onemoney"===A?ge.sendMobile(n,w,A).then((function(e){if(e.success){var t=e.instructions;console.log(t),pe=e.pollUrl,ve=setInterval((function(){Pe()}),1e3),V(!0);var n=setTimeout((function(){V(!1),clearInterval(ve),clearTimeout(n)}),61e3)}else alert("There was an error while trying to paid. Please try agian later."),console.log(e.error)})).catch((function(e){alert("There was an error while trying to paid. Please try agian later."),console.log("error",e)})):ge.send(n).then((function(e){if(e.success){var t=e.redirectUrl;pe=e.pollUrl,xe=window.open(t,"_blank","location=yes,height=570,width=520,scrollbars=yes,status=yes"),ve=setInterval((function(){Pe()}),1e3),V(!0);var n=setTimeout((function(){V(!1),clearInterval(ve),clearTimeout(n)}),61e3)}else alert("There was an error while trying to paid. Please try agian later."),console.log(e.error)})).catch((function(e){alert("There was an error while trying to paid. Please try agian later."),console.log("error",e)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=function(e){N(e)},Ue=function(e){p(e)},Ye=function(){var e=!1;return G.length>0&&G[0].data&&G[0].data.payments&&(e=G[0].data.payments.filter(ye).filter(we).filter(Se).map((function(e,t){return e.tier.code!==I.code})).reduce((function(e,t){return e||t}))),e};return Object(h.jsxs)("div",{className:"paymentScreen",children:[Object(h.jsx)(be,{payments:G.length>0&&G[0].data&&G[0].data.payments?G[0].data.payments.filter(ye).filter(we).filter(Se):[]}),H?Object(h.jsx)(me,{}):Object(h.jsx)("div",{}),ie.filter((function(e){return e.active})).map((function(e,t){return Object(h.jsxs)("div",{children:[Object(h.jsx)(ue,{paymentItemDetail:e},"paymentItem".concat(t)),10!==e.code&&e.code!==n?Object(h.jsx)("input",{type:"radio",id:"radioPaymentAmount".concat(t),name:"radioPaymentAmount",onChange:function(){return Te(e)}},"radioPaymentAmount".concat(t)):e.code===n?Object(h.jsx)("input",{type:"radio",id:"radioPaymentAmount".concat(t),name:"radioPaymentAmount",onChange:function(){return Te(e)},defaultChecked:!0},"radioPaymentAmount".concat(t)):Object(h.jsx)("div",{})]},"paymentHolder".concat(t))})),Object(h.jsxs)("div",{children:["Payment Method:",Object(h.jsxs)("div",{children:["Ecocash",Object(h.jsx)("input",{type:"radio",name:"radioPaymentMethod",onChange:function(){return Ue("ecocash")}})]}),Object(h.jsxs)("div",{children:["One Money",Object(h.jsx)("input",{type:"radio",name:"radioPaymentMethod",onChange:function(){return Ue("onemoney")}})]}),Object(h.jsxs)("div",{children:["Zim Switch/Master Card/VISA (local)",Object(h.jsx)("input",{type:"radio",name:"radioPaymentMethod",onChange:function(){return Ue("other")}})]}),"ecocash"===A||"onemoney"===A?Object(h.jsxs)("div",{children:["Enter Phone Number you paying from:",Object(h.jsx)("input",{className:"phoneInput",value:w,onChange:function(e){return S(e.target.value)}})]}):Object(h.jsx)("div",{})]}),"Number of Months:",Object(h.jsx)("input",{type:"number",min:"1",name:"radioPaymentMonths",value:L,onChange:function(e){return t=e.target.value,void T(t>0||""===t?t:1);var t}})," ",Object(h.jsx)("br",{}),Ye()?Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"radio",name:"previousTier",id:"previousTier1",onChange:function(e){return q("none")},defaultChecked:!0})," Keep previous tier as they are. ",Object(h.jsx)("small",{children:Object(h.jsx)("small",{children:"*High tier level will always run first."})})]}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"radio",name:"previousTier",onChange:function(e){return q("convert")}})," Convert previous tier to add ",ae," more days on to this tier."]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"radio",name:"previousTier",onChange:function(e){return q("discount")}})," Use previous tiers, to discount current payment: ",M," - ",le>M?M:le," = ",le>M?0:M-le]})})]}):Object(h.jsx)("div",{}),Object(h.jsxs)("div",{className:"totalCost",children:["ZIM$ ",M-("discount"===_&&Ye()?le>M?M:le:0)," ",Object(h.jsx)("small",{children:Object(h.jsx)("small",{children:"(not including fees from your Bank, Credit/Debit card or Mobile wallet charges.)"})})]}),Object(h.jsx)("div",{children:"discount"===_&&Ye()&&le>=M?"No payment needed, previous tiers discounts covers the total of this payment, click Pay button to comfirm changes":""}),Object(h.jsx)("div",{onClick:function(){return Le()},children:"Pay"})]})};var Oe=function(){var e=f(),t=Object(r.a)(e,2)[1];return Object(c.useEffect)((function(){j.onAuthStateChanged((function(e){if(e){var n=JSON.parse(e.photoURL);e.tier=n?n.tier:0,t({type:"SET_USER",user:e})}else t({type:"SET_USER",user:null})}))}),[t]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(m.a,{children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(ee,{}),Object(h.jsxs)(b.c,{children:[Object(h.jsx)(b.a,{path:"/login",children:Object(h.jsx)(te,{})}),Object(h.jsx)(b.a,{path:"/auction",children:Object(h.jsx)($,{})}),Object(h.jsxs)(b.a,{path:"/store",children:[Object(h.jsx)("div",{children:"Like auction but no bids, like ads"}),Object(h.jsx)("div",{children:"Coming soon"})]}),Object(h.jsxs)(b.a,{path:"/notice-board",children:[Object(h.jsx)("div",{children:"Post items to the boards for others to see and comment on"}),Object(h.jsx)("div",{children:"Coming soon"})]}),Object(h.jsx)(b.a,{path:"/create-auction",children:Object(h.jsx)(se,{})}),Object(h.jsx)(b.a,{path:"/confirm",children:Object(h.jsx)(re,{})}),Object(h.jsxs)(b.a,{path:"/about",children:[Object(h.jsx)("div",{children:" About page, with rules and FAQs..."}),Object(h.jsx)("div",{children:"Coming soon"})]}),Object(h.jsx)(b.a,{path:"/profile/:name",children:Object(h.jsx)(oe,{})}),Object(h.jsx)(b.a,{path:"/paymentConfirmed",children:Object(h.jsx)(le,{})}),Object(h.jsx)(b.a,{path:"/payments",children:Object(h.jsx)(he,{})}),Object(h.jsxs)(b.a,{path:"/",children:[" ",Object(h.jsx)(de,{})]})]})]})})})},Ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,543)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))},fe=function(e,t){switch(t.type){case"SET_USER":return Object(ne.a)(Object(ne.a)({},e),{},{user:t.user});case"SET_NEW_AUCTION_ITEM":return Object(ne.a)(Object(ne.a)({},e),{},{auctionItem:t.auctionItem});case"SET_TIME_VARIANCE":return Object(ne.a)(Object(ne.a)({},e),{},{timeVariance:t.timeVariance});case"SET_AUCTION_ITEMS":return Object(ne.a)(Object(ne.a)({},e),{},{auctionItems:t.auctionItems});default:return e}};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(A,{initialState:{user:null,auctionItem:null,timeVariance:0,auctionItems:[]},reducer:fe,children:Object(h.jsx)(Oe,{})})}),document.getElementById("root")),Ae()}},[[529,1,2]]]);
//# sourceMappingURL=main.11a76709.chunk.js.map