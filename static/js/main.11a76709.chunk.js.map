{"version":3,"sources":["firebase.js","StateProvider.js","components/ItemImage.js","images/userImage.png","components/UserBidItem.js","components/CurrentBid.js","components/BidEndDetail.js","components/PlaceBid.js","components/returnCurrentBid.js","components/AuctionItemComments.js","components/PaymentTypes.js","components/AuctionChat.js","components/AuctionItem.js","components/AuctionList.js","components/WatchList.js","components/EndedBids.js","components/HighestBid.js","components/WonAuction.js","images/adTemp.png","components/LeftPanel.js","components/cityAndTowns.js","components/AuctionScreen.js","components/Header.js","components/SignIn.js","lists/currencies.js","lists/paymentMethods.js","components/tierConsts.js","components/NewAuctionItem.js","components/ConfirmAuctionItem.js","components/UserProfile.js","components/ConfirmPayment.js","components/Home.js","components/PaymentItem.js","components/LoadingIcon.js","components/CurrentTier.js","components/PaymentScreen.js","App.js","reportWebVitals.js","reducer.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","storage","auth","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","ItemImage","imageLinks","lotIndex","isPreview","useState","index","setIndex","btnDisplay","setBbtnDisplay","imageLinksRef","setImageLinksRef","useEffect","tempImages","map","data","push","document","getElementById","src","URL","createObjectURL","ref","getDownloadURL","then","url","img","setAttribute","console","log","catch","error","showBtn","isHoving","length","className","onMouseEnter","e","onMouseLeave","onClick","tempValue","previousImage","style","display","id","alt","nextImage","UserBidItem","user","JSON","parse","photoURL","defaultImage","displayName","CurrentBid","currentBid","allBids","removeBid","isClosed","showAllBids","setShowAllBid","amount","color","time","uid","fill","BidEndDetail","endTimeDate","setAuctionClose","timerComponents","timeVariance","timeLeft","setTimeLeft","endTimeAsDate","timer","setTimeout","difference","Date","days","Math","floor","hours","minutes","seconds","calculateTimeLeft","clearTimeout","Object","keys","forEach","interval","PlaceBid","updateBid","nextBid","customBid","setCustomBid","isDisable","setIsDisable","getTimeDate","a","axios","get","res","formatted","returnBid","timeClicked","placeCustomBid","onChange","target","returnCurrentBid","bids","startBid","endTime","AuctionItemComments","comments","addComment","removeComment","addImage","isComment","showComments","setShowComments","newComment","setNewComment","changeVisilbitity","showImages","fileInputX","image","comment","type","placeholder","accept","event","files","fileInput","click","preventDefault","tempComment","stringify","PaymentTypes","paymentMethods","toString","AuctionChat","sellerID","buyerID","chats","addChat","removeChat","addChatImage","updateClose","iscompleteSeller","iscompleteBuyer","confirmClose","setConfirmClose","isClicked","checked","confirmCloseFunc","confirmType","AuctionItem","itemData","addWatchList","removeAuctionItem","setNextBid","bidError","setBidError","isWatched","setIsWatch","setCurrentBid","confirmRemove","setConfirmRemove","isFlagged","setIsFlagged","curBid","calculateNextBid","tempBid","watching","flagged","tempCommentArray","collection","doc","update","newChat","tempChatArray","newBid","noBids","deleted","short_description","long_description","images","splice","closed","loginUser","loginID","bidTime","tempBidArray","collectionDetails","place","tempRef","delete","file","tempUser","commentID","CRC32","str","name","lastModified","size","random","put","contentType","chat","chatID","tempChat","whichOne","completeSeller","completeBuyer","tempFlagList","tempIndex","makeFlagged","AuctionList","auctionItems","setFilter","to","WatchList","blankFunc","EndedBids","HighestBid","WonAuction","LeftPanel","testImage","places","AuctionScreen","dispatch","setAuctionItems","showWatchList","setShowWatchList","showEndedBid","setShowEndedBid","showHighestBid","setShowHighestBid","showWonAuction","setShowWonAuction","showMyAuction","setShowMyAuction","sortOrder","setSortOrder","byAuctionID","setByAuctionID","setPlace","orderBy","onSnapshot","snapshot","docs","tempVariance","getTimeVariance","tempItemData","tempWatchList","item","removeAllFilters","filterType","currentUser","highestBid","bidsEnded","bidsNotEnded","mainFilter","includes","undefined","filter","sort","b","timeStamp","result","behind","toFixed","formatTime","Header","history","useHistory","signOut","SignIn","signInEmail","setSignInEmail","signUpEmail","setSignUpEmail","signInPassword","setSignInPassword","signUpPassword","setSignUpPassword","signUpUsername","setSignUpUsername","profilePicture","setProfilePicture","signInWithEmailAndPassword","alert","message","profileID","createUserWithEmailAndPassword","tempDetails","tier","payments","updateProfile","currecies","tierConsts","activePosts","maxAuctionLength","maxWatchedItems","imagePerItem","tierName","cost","active","code","NewAuctionItem","auctionItem","auctionObject","bidCurrency","endDate","substr","uploading","tempPayment","tempElement","dispatchLocal","state","action","Error","where","allImages","temp","tempItem","addPaymentMethods","bidEndDateAndTime","ConfirmAuctionItem","setImages","postUID","savePost","tempTime","add","UserProfile","setTempDetails","useParams","getRealTimeDate","calculateTier","userInfo","scr","ConfirmPayment","Home","PaymentItem","paymentItemDetail","LoadingIcon","CurrentTier","showPaidServices","startDate","PaymentScreen","selectedTier","paymentMethod","setPaymentMethod","phoneNumber","setPhoneNumber","tierSelected","setTierSelected","months","setMonths","totalCost","setTotalCost","showLoading","setShowLoading","oldTierChoice","setOldTierChoice","paidForDateUntil","setPaidForDateUntil","convertedValue","setConvertedValue","discountedValue","setDiscountedValue","count","setCount","pollUrl","paynow","Paynow","paymentCheckerTimer","paymentWindow","useCallback","notExpired","expired","notChanged","changed","activateBids","today","setHours","updatePayment","highestValue","reduce","parseFloat","convertPaymentsToCurrentTier","totalValueLeft","timeRemaing","totalTime","valueLeft","round","parseInt","additionalAmount","ceil","calculateStartDate","paidUntilDate","calculateEndDate","tempEndDate","setDate","getDate","checkIfDifferentTier","sortTiers","change","toISOString","split","discountTiers","amountToPay","start","end","contractValue","newDays","checkReceived","status","pollTransaction","clearInterval","payment","date","pushNewPayment","userID","close","makePayment","paymentId","resultUrl","returnUrl","createPayment","email","sendMobile","success","instructions","setInterval","paymentCheckCounter","ex","send","link","redirectUrl","window","open","updatePayemntMethod","method","tempCal","defaultChecked","min","App","onAuthStateChanged","authUser","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.11a76709.chunk.js","sourcesContent":["// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nimport firebase from \"firebase/app\";\r\nimport 'firebase/auth'\r\nimport 'firebase/firestore'\r\nimport 'firebase/storage'\r\n\r\n//firebase-admin crash the program\r\n//import * as admin from \"firebase-admin\";\r\n\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAESYV0JuqsscaMTKsTyp0NEjXAZd2wlck\",\r\n  authDomain: \"zimboland-6591f.firebaseapp.com\",\r\n  //databaseURL: \"https://clone-6c316.firebaseio.com\",\r\n  projectId: \"zimboland-6591f\",\r\n  storageBucket: \"zimboland-6591f.appspot.com\",\r\n  messagingSenderId: \"97798678376\",\r\n  appId: \"1:97798678376:web:ea0d580bcfd8554a5e18dd\",\r\n  measurementId: \"G-FZ8J4Z8PSR\"\r\n};\r\n\r\n//auth.listUsers list all users\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebaseApp.firestore();\r\nconst storage = firebaseApp.storage();\r\nconst auth = firebase.auth();\r\n//const userList = admin.auth();\r\n\r\n\r\nexport { db, auth, storage,  }; //userList\r\n","import React, {createContext, useContext, useReducer} from \"react\";\r\n\r\n//prepare the datalayer\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({reducer, initialState, children}) => (\r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\n//pull info from datalayer\r\nexport const useStateValue = () => useContext(StateContext);","import React, { useEffect, useState } from 'react'\r\nimport { storage } from '../firebase'\r\nimport \"./ItemImage.css\"\r\n\r\n\r\nconst ItemImage = ({ imageLinks, lotIndex, isPreview }) => {\r\n    const [index, setIndex] = useState(0)\r\n    const [btnDisplay, setBbtnDisplay] = useState(\"none\")\r\n    const [imageLinksRef, setImageLinksRef] = useState([])\r\n    let altText = \"loading\"\r\n\r\n    useEffect(() => {\r\n        let tempImages = imageLinksRef\r\n\r\n        if (isPreview) {\r\n            imageLinks.map((data,index) => {\r\n                tempImages.push(data)\r\n                return 0\r\n            })\r\n            var img = document.getElementById(`image${lotIndex}`);\r\n            img.src = URL.createObjectURL(imageLinks[0])\r\n            //img.setAttribute('src', URL.createObjectURL(imageLinks[0]));            \r\n            \r\n\r\n        } else {\r\n            imageLinks.map((data, index) => {\r\n                storage.ref(`${data}`).getDownloadURL()\r\n                    .then((url) => {\r\n                        tempImages.push(url)\r\n                        setImageLinksRef(tempImages)\r\n\r\n                        var img = document.getElementById(`image${lotIndex}`);\r\n                        img ? img.setAttribute('src', url) : console.log(\"error\"); //does this not sho last image remove fropm map maybe.\r\n\r\n                    }) //look this up...\r\n                    .catch((error)=>{\r\n                        console.log(error)\r\n                    })\r\n                return 0\r\n            })\r\n        }\r\n\r\n    }, [imageLinksRef, lotIndex, imageLinks, isPreview])\r\n\r\n    const nextImage = () => {\r\n        var tempValue = index\r\n        tempValue += 1\r\n\r\n        if (tempValue > imageLinks.length - 1) {\r\n            setIndex(0)\r\n        } else {\r\n            setIndex(tempValue)\r\n        }\r\n    }\r\n\r\n    const previousImage = () => {\r\n        var tempValue = index\r\n        tempValue -= 1\r\n\r\n        if (tempValue < 0) {\r\n            setIndex(imageLinks.length - 1)\r\n        } else {\r\n            setIndex(tempValue)\r\n        }\r\n    }\r\n\r\n    const showBtn = (isHoving) => {\r\n        if (isHoving && imageLinks.length > 1) {\r\n            setBbtnDisplay(\"block\")\r\n        } else {\r\n            setBbtnDisplay(\"none\")\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"itemImage\"\r\n            onMouseEnter={(e) => showBtn(true)}\r\n            onMouseLeave={(e) => showBtn(false)}\r\n        >\r\n            <div className=\"previousImage\"\r\n                onClick={() => previousImage()}\r\n                style={{ display: btnDisplay }} >{\"<\"}\r\n            </div>\r\n\r\n            <img className=\"itemImage_image\"\r\n                id={`image${lotIndex}`}\r\n                src={imageLinksRef[index]}  //URL.createObjectURL()\r\n                alt={altText}\r\n            />\r\n\r\n            <div className=\"nextImage\"\r\n                onClick={() => nextImage()}\r\n                style={{ display: btnDisplay }} >{\">\"}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ItemImage\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKKSURBVGhD7ZkxduowEEVdUlJSejksgSVQsgNKlkDJMrw0yuSBHspEJopmRsI48a0+Ao/eHWn+Of+7+5g5i8DULAJTswhMzSIwNXUEhmHoH3RZ+KO+xyN82IdXIERnOiVVNFwC2H69XjOOCTzudLALjNPv93t+lwU/4wN3nA5GgSR9YXSJ1PA4qAWwU3LpDekDyVHYRkItsNlsuOEdc/pA4oDi/KIYnQA6xK3uONMHEgftISgEUFree65WgkX186DIIS9Pld5L5DmoLpJCgOUbpA9IBy4VYBHg5wZwg0XgOaz9BwQulwuXqoKy3KCRwGq1CtXxBy5VxVZfIXA6ncIGgEtVYemuw0ZcKkAXhTs0FuDnMv6rQPU5tk0w0P263RybK+sE2s0xiyonGKhzcJ9mAvxcjF2g4hiYBwCoH2gxBp6aaoEWY8By+gEAlhCxYYb9xsSO2I7UInA4HDxbJsR2oCyXNFgErtdr2BI4R1mOL8pyVYPxHse2OQ/BX8coIEfZfAiy/eZxMgoAf/P8FYBdwHkIVdoP7ALA08Iq7QcuAfMh1Go/cAkA2chCB/ysVvuBV0AeAuj7PqOBr5L/mne2H3gFQOIQQVZ8Ow4d8acHFQTATw4ZqqQHdQQChRq1ogdcAoPjHWsAj2vfaCSUCvizlqOy+kUgM4IvAFtn/k4LPBdQ9dv8vkO+0ciTOZNUIB+90bsZScbqqcaXwE/Rd7ud7Z8aTrAptmYIQaJBAVw1+QYy8IJ+lzA+E0SNs3ETOB6P/ObBm0SXjDUQG+vd+Xzmwp03jC5JNG7h483ZbreT3HUtCImoIfO3az+L9AFEZejIm9+cMelIcHlWMHqAa7OC0cHs7k/gdou67hOO+8b/KP8gswAAAABJRU5ErkJggg==\"","import React, { useEffect } from 'react'\r\nimport \"./UserBidItem.css\"\r\nimport defaultImage from \"../images/userImage.png\"\r\nimport { storage } from '../firebase'\r\n\r\nconst UserBidItem = ({ user, index }) => {\r\n    //JSON.parse(user).uid is avaible to link to user profile page... to be added\r\n    \r\n    useEffect(()=> {\r\n        if (user) {\r\n            storage.ref(JSON.parse((JSON.parse(user).photoURL)).photoURL).getDownloadURL()\r\n                .then((url) => {\r\n                    var img = document.getElementById(`${index}userImage`);\r\n                    img ? img.setAttribute('src', url) : console.log(\"error: \" + url); \r\n            })\r\n        }\r\n    }, [user, index])\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"userBidItem\">\r\n            <img id={`${index}userImage`} className=\"userImage\" src={defaultImage} alt=\"User\"/>\r\n            \r\n            <div className=\"userName\">\r\n                {user ? JSON.parse(user).displayName : \"\"}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserBidItem\r\n","import React, { useState } from 'react'\r\nimport { useStateValue } from '../StateProvider';\r\n\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\n\r\n//disallow delete bid after auction ends\r\n\r\n//change allBids, (user part to full user object JSon)\r\nconst CurrentBid = ({ currentBid, allBids, removeBid, isClosed }) => {\r\n    const [{ user }] = useStateValue();\r\n    const [showAllBids, setShowAllBid] = useState(false)\r\n    //currentBidUser will be the ID, need to look it up...\r\n    //do we need to chane th currentBid.user to a full user object, instead of a string of the user name.?\r\n    return (\r\n        <div className=\"currentBid\">\r\n\r\n            <div className=\"bidValue\">{currentBid.user ? `Current bid: ${currentBid.amount}` : `Starting bid: ${currentBid.amount}`}</div>\r\n            <div className=\"bidUser\">{currentBid.user ? `Highest bid by: ${currentBid.user}` : \"Be the first to bid...\"}</div>\r\n            <div className=\"showBids\" onClick={() => allBids.length > 0 ? setShowAllBid(!showAllBids) : console.log()}\r\n                                      style={{color: allBids.length > 0 ? \"Black\" : \"Silver\"}}\r\n                >\r\n                    {showAllBids ? \"hide bids\" : \"show bids(\"+allBids.length+\")\"}\r\n            </div>\r\n\r\n            {showAllBids ?\r\n                <div className=\"allBids\">\r\n                    {allBids.map((data, index) => {\r\n                        return (\r\n                            <div key={index}>\r\n                                <div className=\"bidUser\" key={`user${index}`}>\r\n                                    {data.user}\r\n                                </div>\r\n\r\n                                <div className=\"bidAmount\" key={`amount${index}`}>\r\n                                    {data.amount}\r\n                                </div>\r\n\r\n                                <div className=\"bidTime\" key={`time${index}`}>\r\n                                    {data.time}\r\n                                </div>\r\n\r\n                                {/* maybe replace div with ClearICon totally*/}\r\n                                <div className=\"removeBid\" key={`remove${index}`} onClick={() =>removeBid(index)}>\r\n                                    {user ? (user.uid === data.id && !isClosed) ? <ClearIcon className=\"removeAuctionItem\" style={{fill: \"greenyellow\"}}/> : \"\" : \"\"}\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n\r\n                :\r\n                    <></>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CurrentBid\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n\r\nconst BidEndDetail = ({endTimeDate, isClosed, setAuctionClose}) => {\r\n    //following is to calculate remaining time on bid...\r\n    //if we get the time once from the server when loading in the data, and then use local clock...\r\n    //eg: endtime = 14:00\r\n    //    currentServerTime = 13:23\r\n    //    minLeft = 37\r\n    //    localTime = 13:40\r\n    //    localEndTime = 14:17\r\n    //    and countdown can be based on local time....\r\n    //monkey12\r\n    //const [{ time }] = useStateValue()\r\n    const timerComponents = [];\r\n    const [{ timeVariance }] = useStateValue()\r\n    const [timeLeft, setTimeLeft] = useState(0);\r\n    \r\n    \r\n    //this seems unneeded...\r\n    //let endTimeAsDate = endTimeDate ? endTimeDate.seconds * 1000 + endTimeDate.miliseconds : 0\r\n    let endTimeAsDate = endTimeDate\r\n\r\n\r\n    //const getTimeDate = async () => {\r\n    //    return (time)\r\n    //}\r\n    //const getTimeDate = async () => {\r\n    //    return (axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n    //      .then(res => { return res.data.formatted }\r\n    //    ))\r\n    //}\r\n\r\n\r\n    const calculateTimeLeft = () => {\r\n        //this seems wrong +new Date() should be based on axios input...\r\n        //let tempTime = await getTimeDate()        \r\n        //////console.log(timeVariance) \r\n        const difference = +new Date(endTimeAsDate) - +new Date() - +new Date(timeVariance);\r\n        \r\n\r\n        let timeLeft = {};\r\n        \r\n        if (difference > 0) {\r\n            timeLeft = {\r\n                days:    Math.floor( difference / (1000 * 60 * 60 * 24)),\r\n                hours:   Math.floor((difference / (1000 * 60 * 60)) % 24),\r\n                minutes: Math.floor((difference /  1000 / 60) % 60),\r\n                seconds: Math.floor((difference /  1000) % 60)\r\n            };\r\n        } else {\r\n            setAuctionClose()\r\n        }\r\n        return timeLeft;\r\n    };\r\n  \r\n    useEffect(() => {\r\n        \r\n\r\n        const timer = setTimeout(() => {\r\n            setTimeLeft(calculateTimeLeft());\r\n        }, 1000);\r\n        // Clear timeout if the component is unmounted\r\n        return () => clearTimeout(timer);\r\n    });\r\n\r\n    if (!isClosed) {\r\n        Object.keys(timeLeft).forEach((interval) => {\r\n            if (!timeLeft[interval]) {\r\n                return;\r\n            }   \r\n            timerComponents.push(\r\n                <span key = {timerComponents.length}>\r\n                    {timeLeft[interval]} {interval}{\" \"}\r\n                </span>\r\n            );\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"bidEndDetail\">\r\n            <div className=\"bidEnd\">Bid Ends: {endTimeAsDate}</div>  \r\n            <div className=\"timeRemaining\">{timerComponents.length ? timerComponents : <span>Time's up!</span>}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BidEndDetail\r\n","import React, { useState } from 'react'\r\nimport axios from 'axios';\r\nimport { useStateValue } from '../StateProvider';\r\n\r\nconst PlaceBid = ({ updateBid, nextBid }) => {\r\n    //https://firebase.google.com/docs/auth/web/manage-users \r\n\r\n    const [customBid, setCustomBid] = useState(0) //not 0 but import minimum bid...\r\n    const [isDisable, setIsDisable] = useState(false)\r\n    const [{ user }] = useStateValue()\r\n\r\n    ////////<div className={isHighlight?\"row__rowNumber redborder\":\"row__rowNumber\"}></div>\r\n\r\n    \r\n    const placeBid = (value) => {\r\n        //change (add to this) so that funny value can not be inputted whole number only, (and maybe cents)\r\n        setCustomBid(value)//.substring(1))\r\n    }\r\n\r\n    const getTimeDate = async () => {\r\n        return(axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n            .then(res => { return res.data.formatted }\r\n        ))\r\n    }\r\n//https://itnext.io/async-and-await-in-javascript-the-extension-to-a-promise-f4e0048964ac\r\n    \r\n    const returnBid = async () => {\r\n        let timeClicked = await getTimeDate()\r\n        setIsDisable(true)\r\n\r\n        const timer = setTimeout(() => {\r\n            setIsDisable(false)\r\n            clearTimeout(timer)\r\n        }, 5000)\r\n\r\n        updateBid(nextBid, user.displayName, user.uid, timeClicked)\r\n    }\r\n\r\n    const placeCustomBid = async () => {\r\n        let tempValue = await getTimeDate()\r\n        updateBid(customBid, user.displayName, user.uid, tempValue)\r\n    }\r\n\r\n    let isDisableX = false //not sure if i want second button to be disabled..\r\n    return (\r\n        //style={{display: btnDisplay}}\r\n        <>\r\n            {user ?\r\n                <div className=\"placeBid\">\r\n                    <div>Next Bid: {nextBid}</div>\r\n                    <div onClick={(e) => returnBid()} style={{color: isDisable ? \"Grey\" : \"Red\" }}>Place Bid</div>\r\n                    {/* disable teh above for when there is 5 or 10 sec let on the counter, to avoid people spaming it. */}\r\n                    {/* maybe alos have a 5 sec cool down timer */}\r\n\r\n                    $<input value={`${customBid}`}\r\n                            onChange={(e) => placeBid(e.target.value)} />\r\n                    <div onClick={(e) =>  placeCustomBid()} style={{color: isDisableX ? \"Grey\" : \"Red\" }}>Place Bid</div>\r\n                </div>\r\n            :\r\n                <div>You must sign in to be able to bid.</div>\r\n            }   \r\n        </>\r\n    )\r\n}\r\n\r\nexport default PlaceBid\r\n","const returnCurrentBid = ( bids, startBid, endTime ) => {\r\n    ////this calculates the current bid based on the following\r\n    ////must be equal to or greater than the start bid,\r\n    ////must be into ie less than endTime\r\n    ////must be greater than any other bid\r\n    ////if two bids are equal must be first by timeStamp.\r\n\r\n    //no bid less than start bid\r\n    //no bid greater than endtime\r\n    //highest bid (in time) is current bid\r\n    // if two bids are the same (first chronologly is current)\r\n    /* {\"user\": \"_id\",\r\n        \"time\": \"20210713 14:00:37:21\",\r\n        \"amount\": 7},\r\n       {\"user\": \"_id\",\r\n        \"time\": \"20210713 14:04:37:21\",\r\n        \"amount\": 8},*/\r\n    let currentBid = {\r\n        user: \"\",\r\n        time: \"\",\r\n        amount: startBid\r\n    };\r\n\r\n    bids.map((data, index)=>{\r\n        if (data.amount >= currentBid.amount) {\r\n            currentBid = data\r\n        } else if (data.amount === currentBid.amount) {\r\n            if (data.time > currentBid.time && data.time < endTime) {\r\n                currentBid = data\r\n            }\r\n        }\r\n        return (true)\r\n    })\r\n\r\n    return (currentBid)\r\n}\r\n\r\nexport default returnCurrentBid\r\n\r\n\r\n","import React, { useState } from 'react'\r\nimport { storage } from '../firebase'\r\nimport { useStateValue } from '../StateProvider'\r\nimport \"./AuctionItemComments.css\"\r\n\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\n\r\n//may need to add children to comments so people and match a replay to a question?\r\n//showImages() mayeb runs too often...\r\nconst AuctionItemComments = ({ comments, addComment, removeComment, addImage, isComment }) => {\r\n    const [showComments, setShowComments] = useState(false)\r\n    const [newComment, setNewComment] = useState(\"\")\r\n    const [{ user }] = useStateValue();\r\n\r\n    const changeVisilbitity = () => {\r\n        setShowComments(!showComments)\r\n        if (!showComments) {\r\n            showImages()\r\n        }\r\n    }\r\n\r\n    const addNewComment = (e) => {\r\n        e.preventDefault();\r\n        //let tempUser = {\r\n        //    id: user.uid,\r\n        //    name: user.displayName\r\n        //}\r\n        let tempComment = {\r\n            comment: newComment,\r\n            user: JSON.stringify(user),\r\n            image: false\r\n        }\r\n        addComment(tempComment)\r\n        setNewComment(\"\")\r\n    }\r\n\r\n    let fileInputX = \"\"\r\n\r\n    const fileSelectedHandler = (event) => {\r\n        //let tempUser = {\r\n        //    id: user.uid,\r\n        //    name: user.displayName\r\n        //}\r\n        //maybe change this to be user data, as I did to the images\r\n        addImage(event.target.files[0], user) //tempUser\r\n        showImages()\r\n    }\r\n\r\n    const showImages = () => {\r\n        if (comments){\r\n            comments.map((data, index) => {\r\n                if (data.image) {\r\n                    storage.ref(`${data.comment}`).getDownloadURL()\r\n                        .then((url) => {\r\n                            var img = document.getElementById(`imageComment${index}`)\r\n                            if (img) { img.setAttribute('src', url) }\r\n                        })\r\n                }\r\n                storage.ref(JSON.parse(JSON.parse(data.user).photoURL).photoURL).getDownloadURL()\r\n                    .then((url) => {\r\n                        var img = document.getElementById(`userImage${index}`)\r\n                        if (img) { img.setAttribute('src', url) }\r\n                    })\r\n\r\n                return 0\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        user ?\r\n            <>\r\n                {showComments ?\r\n                    <div className=\"auctionItemComments\">\r\n                        <div className=\"hideShowComments\" onClick={() => { changeVisilbitity() }}>\r\n                            {isComment ? \"hide comments\" : \"hide chat\"}\r\n                        </div>\r\n                        <div className=\"commentsGroup\">\r\n                            {comments ? comments.map((data, index) => {\r\n                                return (\r\n                                    <div key={`holder${index}`} className=\"comments\">\r\n                                        <img key={`userImage${index}`} id={`userImage${index}`} className=\"userImage\" src={\"\"} alt={\"loading\"}/>\r\n\r\n                                        <div key={`user${index}`} className=\"userName\">{JSON.parse(data.user).displayName}</div>\r\n                                        {data.image ?\r\n                                            <img key={`image${index}`}\r\n                                                id={`imageComment${index}`}\r\n                                                className=\"imageComment\"\r\n                                                src={\"\"}\r\n                                                alt={\"loading\"}\r\n                                            />\r\n                                        :\r\n                                            <div key={`comment${index}`} className=\"userComment\" >{data.comment}</div>\r\n                                        }\r\n\r\n                                        {JSON.parse(data.user).uid === user.uid ?\r\n                                            <ClearIcon className=\"removeComment\"\r\n                                                       style={{fill: \"greenyellow\"}}\r\n                                                       key={`remove${index}`}\r\n                                                       onClick={() => removeComment(index)}\r\n                                            />\r\n                                        :\r\n                                            <div></div>}\r\n                                        \r\n                                    </div>\r\n                                )\r\n                            }) : \"\"}\r\n                        </div>\r\n                        <form>\r\n                            <div className=\"newComment\" >\r\n                                <input type=\"text\"\r\n                                    className=\"newComment\"\r\n                                    placeholder=\"new comment?\"\r\n                                    onChange={(e) => setNewComment(e.target.value)}\r\n                                    value={newComment} />\r\n\r\n                                <input style={{ display: \"none\" }}\r\n                                    accept=\"image/*\"\r\n                                    type=\"file\"\r\n                                    onChange={fileSelectedHandler}\r\n                                    ref={fileInput => fileInputX = fileInput}\r\n                                />\r\n\r\n                                <div className=\"addImage\" onClick={() => fileInputX.click()}>Add image</div>\r\n                            </div>\r\n                            <button onClick={addNewComment} type=\"submit\" className=\"hiddenSumbit\">\r\n                                Hidden submit\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                    :\r\n                    <div className=\"hideShowComments\" onClick={() => { changeVisilbitity() }} style={{color: comments && comments.length > 0 ? \"Black\" : \"Silver\"}}>                                                                \r\n                        {isComment ? \"show comments\" : \"show chat\"} ({comments ? comments.length : 0})\r\n                    </div>}\r\n            </>\r\n        :\r\n            <div></div>\r\n    )\r\n}\r\n\r\nexport default AuctionItemComments\r\n","import React from 'react'\r\n\r\nconst PaymentTypes = ({ paymentMethods }) => {\r\n    return (\r\n        <div className=\"paymentTypes\">\r\n            <label>Accepted Payment Methods:\r\n                {paymentMethods.toString()}\r\n            </label>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PaymentTypes\r\n","import React, { useState } from 'react'\r\nimport { useStateValue } from '../StateProvider'\r\nimport AuctionItemComments from \"./AuctionItemComments\"\r\n\r\nconst AuctionChat = ({ isClosed, sellerID, buyerID, chats, addChat, removeChat, addChatImage, updateClose, iscompleteSeller, iscompleteBuyer}) => {\r\n    const [{ user }] = useStateValue()\r\n    const [confirmClose, setConfirmClose] = useState(false)\r\n    \r\n    const isClicked = (checked) => {\r\n        setConfirmClose(checked)\r\n    }\r\n\r\n    const confirmCloseFunc = (confirmType, checked) =>{        \r\n        updateClose(confirmType, checked)\r\n        if (!checked) {\r\n            setConfirmClose(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        user && isClosed ?\r\n              //test this...\r\n            user.uid === JSON.parse(sellerID).uid ?\r\n                buyerID.id ?\r\n                    <div className=\"auctionChat\">\r\n                        {buyerID.user} has won your item.\r\n                        Use the private chat below to confirm collection and payment details.\r\n                        When done tick the box below.\r\n                        <AuctionItemComments comments={chats} addComment={addChat} removeComment={removeChat} addImage={addChatImage} isComment={false}/>\r\n                        <input type=\"checkbox\" className=\"sellerCheck\" style={{display: confirmClose ? \"inline\" : \"none\"}} checked={iscompleteSeller} onChange={(e) => confirmCloseFunc(\"seller\", e.target.checked)} />\r\n                        {confirmClose && !iscompleteSeller ? \"Confirm closed by clicking again\" : \"\"}\r\n                        <input  type=\"checkbox\" className=\"sellerCheck mask\" style={{display: confirmClose ? \"none\" : \"inline\"}} checked={confirmClose}  onChange={(e) => isClicked(true)} />\r\n                    </div>\r\n                :\r\n                    <div>\r\n                        <div>The item was unsold. Try re-post it. Check the box below to close this item</div>\r\n                        {/*onClick={(e) => isClicked()}*/}\r\n                        \r\n                        <input  type=\"checkbox\" className=\"unsoldCheck\" style={{display: confirmClose ? \"inline\" : \"none\"}} checked={iscompleteSeller}  onChange={(e) => confirmCloseFunc(\"both\", e.target.checked)} />\r\n                        {confirmClose && !iscompleteSeller ? \"Confirm closed by clicking again\" : \"\"}\r\n                        <input  type=\"checkbox\" className=\"unsoldCheck mask\" style={{display: confirmClose ? \"none\" : \"inline\"}} checked={confirmClose}  onChange={(e) => isClicked(true)} />\r\n\r\n                    </div>\r\n            :\r\n                user.uid === buyerID.id ?\r\n                    <div className=\"auctionChat\">\r\n                        You have won {JSON.parse(sellerID).displayName} item.\r\n                        Use the private chat below to confirm collection and payment details.\r\n                        When done tick the box below.\r\n                        <AuctionItemComments comments={chats} addComment={addChat} removeComment={removeChat} addImage={addChatImage} isComment={false}/>\r\n                        <input type=\"checkbox\" className=\"buyerCheck\" style={{display: confirmClose ? \"inline\" : \"none\"}} checked={iscompleteBuyer} onChange={(e) => confirmCloseFunc(\"buyer\", e.target.checked)}/>\r\n                        {confirmClose && !iscompleteSeller ? \"Confirm closed by clicking again\" : \"\"}\r\n                        <input  type=\"checkbox\" className=\"buyerCheck mask\" style={{display: confirmClose ? \"none\" : \"inline\"}} checked={confirmClose}  onChange={(e) => isClicked(true)} />\r\n\r\n\r\n                    </div>\r\n                :\r\n                    //this show not run at any time\r\n                    //login on not seller not buyer...\r\n                    <div>This auction is complete.</div>\r\n        :\r\n            //not login on\r\n            <div></div>\r\n    )\r\n}\r\n\r\nexport default AuctionChat\r\n","//console.log(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Asia/Taipei&time=1625734630\")\r\nimport React, { useEffect, useState } from 'react'\r\nimport CRC32 from \"crc-32\"\r\n\r\nimport ItemImage from \"./ItemImage\"\r\nimport UserBidItem from \"./UserBidItem\"\r\nimport CurrentBid from \"./CurrentBid\"\r\nimport BidEndDetail from \"./BidEndDetail\"\r\nimport PlaceBid from \"./PlaceBid\"\r\nimport returnCurrentBid from \"./returnCurrentBid\"\r\nimport AuctionItemComments from \"./AuctionItemComments\"\r\nimport PaymentTypes from \"./PaymentTypes\"\r\nimport AuctionChat from \"./AuctionChat\"\r\n\r\nimport \"./AuctionItem.css\"\r\nimport { db, storage } from '../firebase'\r\nimport { useStateValue } from '../StateProvider'\r\n\r\nimport VisibilityIcon from '@material-ui/icons/Visibility'\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff'\r\nimport ClearIcon from '@material-ui/icons/Clear'\r\nimport FlagIcon from '@material-ui/icons/Flag';\r\n\r\n//when delete an item from auciton using the X, X it still appears in user (poster) list, but it needs to be closed on its not counter on the actiate auction\r\n\r\n//firebase server timestamp...\r\n//var docRef = db.collection('objects').doc('some-id');\r\n// Update the timestamp field with the value from the server\r\n//var updateTimestamp = docRef.update({\r\n//    timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n//});\r\n\r\n//saving images for comments/chats seems to be broken\r\n\r\nconst AuctionItem = ({ itemData, index, addWatchList, removeAuctionItem }) => {\r\n    const [nextBid, setNextBid] = useState(0)\r\n    const [bidError, setBidError] = useState(\".\")\r\n    const [isWatched, setIsWatch] = useState(false)\r\n    const [currentBid, setCurrentBid] = useState({})\r\n    const [{ user }] = useStateValue()\r\n    const [confirmRemove, setConfirmRemove] = useState(false)\r\n    const [isFlagged, setIsFlagged]  = useState(false)\r\n    \r\n    useEffect(() => {\r\n        //load bids:\r\n        if (itemData.data.bids.length > 0) {\r\n            let curBid = returnCurrentBid(itemData.data.bids, itemData.data.startBid, itemData.data.endTime)\r\n            setCurrentBid(curBid)\r\n            calculateNextBid(curBid.amount, false)\r\n        } else {\r\n            let tempBid = {\"user\": \"\",\r\n                           \"time\": \"\",\r\n                           \"amount\": itemData.data.startBid}\r\n            setCurrentBid (tempBid)\r\n            calculateNextBid(tempBid.amount, true)\r\n        }\r\n\r\n        //load watched:\r\n        setIsWatch(false)\r\n        itemData.data.watching.map((data, index) => {\r\n            if (data === (user ? user.uid : false)) {\r\n                setIsWatch(true)\r\n            }\r\n            return 0\r\n        })\r\n\r\n        //load flagged\r\n        setIsFlagged(false)\r\n        if (itemData.data.flagged) {\r\n            itemData.data.flagged.map((data, index) => {\r\n                if (data === (user ? user.uid : false)) {\r\n                    setIsFlagged(true)\r\n                }\r\n                return false\r\n            })\r\n        }\r\n\r\n        //set confirmBacktoFalse\r\n        setConfirmRemove(false)\r\n\r\n\r\n        const unmount = () => {\r\n            setCurrentBid({})\r\n            setNextBid(0)\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n\r\n\r\n    }, [itemData, user])\r\n        \r\n    const removeBid = (index) => {\r\n        itemData.data.bids.splice(index,1)\r\n\r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            bids: itemData.data.bids\r\n        })\r\n    }\r\n\r\n    const updateBid = (newBid, loginUser, loginID, bidTime) => {\r\n        \r\n        setBidError(\".\")///change to to something invisible\r\n        if (loginID === JSON.parse(itemData.data.user).uid) {\r\n            setBidError(\"You cannot bid on your own items.\")\r\n            return 0\r\n        }\r\n\r\n        if (bidTime > itemData.data.endTime) {\r\n            setBidError(\"Bid is out of time. Lot is closed.\") //re-english this //lot\r\n            return 0\r\n        }\r\n\r\n        if (newBid * 1 > currentBid.amount * 1 || (!currentBid.user.displayName && newBid * 1 === currentBid.amount * 1 )) {\r\n                                \r\n            let tempBid= {\"user\": loginUser,  \r\n                          \"id\": loginID,\r\n                          \"time\": bidTime, //maybe change this to have a timestamp from firebase itself, idk...\r\n                          \"amount\": newBid} \r\n\r\n            //add new bid to DB here...\r\n            let tempBidArray = []\r\n            if (itemData.data.bids) {\r\n                tempBidArray = itemData.data.bids\r\n            }\r\n\r\n            tempBidArray.push(tempBid)\r\n                \r\n            db.collection(\"auctionItems\").doc(itemData.id).update({\r\n                bids: tempBidArray\r\n            })                \r\n        } else {\r\n            setBidError(\"New bids must be higher than current bid.\")\r\n        }   \r\n    }\r\n\r\n    const updateClose = (whichOne, value) =>{\r\n        if (whichOne === \"seller\") {\r\n            db.collection(\"auctionItems\").doc(itemData.id).update({\r\n                completeSeller: value\r\n            })\r\n        } else if (whichOne === \"buyer\") {\r\n            db.collection(\"auctionItems\").doc(itemData.id).update({\r\n                completeBuyer: value\r\n            })\r\n        } else if (whichOne === \"both\") {\r\n            db.collection(\"auctionItems\").doc(itemData.id).update({\r\n                completeSeller: value,\r\n                completeBuyer: value\r\n            })\r\n        }\r\n    }\r\n\r\n\r\n    //make the 2 func below into one..\r\n    const addComment = (newComment) => {\r\n        let tempCommentArray = itemData.data.comments ? itemData.data.comments : []\r\n        \r\n        tempCommentArray.push(newComment)\r\n                \r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            comments: tempCommentArray\r\n        })\r\n    }\r\n    const addChat = (newChat) => {\r\n        let tempChatArray = itemData.data.chats ? itemData.data.chats : []\r\n        tempChatArray.push(newChat)\r\n\r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            chats: tempChatArray\r\n        })\r\n    }\r\n\r\n    //make the 2 func below into one..\r\n    const addCommentImage = (file, tempUser) => {        \r\n        let commentID = CRC32.str(\r\n            file.name +\r\n            file.lastModified +\r\n            file.size + \r\n            Math.random()\r\n        ).toString(32)\r\n\r\n        var metadata = {\r\n            contentType: 'image/jpeg'\r\n        }\r\n        \r\n        storage.ref(`/${tempUser.uid}/${commentID}/images/comments/${file.name}`).put(file, metadata)  \r\n        //add JSon stingify, so will need to parse when reading, and images work\r\n        let tempComment = {\r\n            comment: `/${tempUser.uid}/${commentID}/images/comments/${file.name}`,\r\n            user: JSON.stringify(tempUser),\r\n            image: true\r\n        }\r\n        addComment(tempComment)    \r\n    }\r\n    const addChatImage = (file, tempUser) => {\r\n        let chatID = CRC32.str(\r\n            file.name +\r\n            file.lastModified +\r\n            file.size + \r\n            Math.random()\r\n        ).toString(32)\r\n\r\n        var metadata = {\r\n            contentType: 'image/jpeg'\r\n        }\r\n\r\n        storage.ref(`/${tempUser.id}/${chatID}/images/chats/${file.name}`).put(file, metadata)  \r\n        \r\n        let tempChat = {\r\n            chat: `/${tempUser.id}/${chatID}/images/chats/${file.name}`,\r\n            user: tempUser,\r\n            image: true\r\n        }\r\n        addChat(tempChat)\r\n    }\r\n\r\n    //make the 2 func below into one..\r\n    const removeComment = (index) => {\r\n        let tempRef = itemData.data.comments.splice(index,1)\r\n\r\n        if (tempRef[0].image) {\r\n            // Create a reference to the file to delete\r\n            var desertRef = storage.ref(tempRef[0].comment);\r\n\r\n            // Delete the file\r\n            desertRef.delete().then(() => {\r\n                // File deleted successfully\r\n            }).catch((error) => {\r\n                // Uh-oh, an error occurred!\r\n                console.log(`Error has occured while trying to remove image: ${error}.`)\r\n            });\r\n        }\r\n\r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            comments: itemData.data.comments\r\n        })        \r\n    }\r\n\r\n    const removeChat = (index) => {\r\n        let tempRef = itemData.data.chats.splice(index,1)\r\n\r\n        if (tempRef[0].image) {\r\n            // Create a reference to the file to delete\r\n            var desertRef = storage.ref(tempRef[0].chat);\r\n\r\n            // Delete the file\r\n            desertRef.delete().then(() => {\r\n                // File deleted successfully\r\n            }).catch((error) => {\r\n                // Uh-oh, an error occurred!\r\n                console.log(`Error has occured while trying to remove image: ${error}.`)\r\n            });\r\n        }\r\n\r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            chats: itemData.data.chats\r\n        })  \r\n    }\r\n\r\n\r\n    const calculateNextBid = (newBid, noBids) => {\r\n        if (noBids) {\r\n            setNextBid(newBid * 1)\r\n        } else {\r\n            setNextBid(newBid * 1 + 1)\r\n        }\r\n    }\r\n\r\n    const setAuctionClose = () => {\r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            closed: true\r\n        })\r\n    }\r\n\r\n    const confirmRemoveItem = () => {\r\n        setConfirmRemove(true)        \r\n    }\r\n\r\n    //also marked as flagged on load\r\n    const makeFlagged = () => {\r\n        let tempFlagList = itemData.data.flagged ? itemData.data.flagged : []\r\n        let tempIndex = -1\r\n        \r\n        tempFlagList.map((data, index) => {\r\n            if (data === user.uid) {\r\n                tempIndex = index\r\n            }\r\n            return 0;\r\n        })\r\n        if (tempIndex === -1){\r\n            tempFlagList.push(user.uid)\r\n        } else {\r\n            tempFlagList.splice(tempIndex, 1)\r\n        }\r\n                \r\n        db.collection(\"auctionItems\").doc(itemData.id).update({\r\n            flagged: tempFlagList\r\n        })     \r\n    }\r\n\r\n    return (\r\n        <div className=\"auctionItem\">\r\n            <div className=\"removedItem\">\r\n                {itemData.data.deleted ? \"This item was removed by poster.\" : \"\" }\r\n            </div>\r\n            <UserBidItem user={itemData.data.user} index ={index}/>\r\n            {(user && user.uid === JSON.parse(itemData.data.user).uid) ? \r\n\r\n                confirmRemove ?\r\n                    <div>Are you sure?                          \r\n                        {/*Not sure if the + work here, monkey */}\r\n                        <ClearIcon className=\"removeAuctionItem\" style={{fill: \"red\"}} onClick={(e) =>  removeAuctionItem(itemData)+setConfirmRemove(false)} />\r\n                        <ClearIcon className=\"removeAuctionItem\" style={{fill: \"green\"}} onClick={(e) =>  setConfirmRemove(false)} />\r\n                    </div>\r\n                :\r\n                    <ClearIcon className=\"removeAuctionItem\" style={{fill: \"greenyellow\"}} onClick={(e) =>  confirmRemoveItem()} />\r\n                            //on hover do something\r\n            :\r\n                <div />}\r\n\r\n            <div className=\"watchList\" onClick={(e) =>  addWatchList(itemData)}>\r\n                {user ? (isWatched ? <VisibilityOffIcon style={{fill: \"greenyellow\"}}/> : <VisibilityIcon style={{fill: \"greenyellow\"}}/>) : <div /> }\r\n                \r\n            </div>\r\n            <div className=\"itemName\">\r\n                {itemData.data.short_description}\r\n            </div>\r\n            <div className=\"itemDescription\">\r\n                {itemData.data.long_description}\r\n            </div>\r\n            <ItemImage imageLinks={itemData.data.images} lotIndex={index} />\r\n            <CurrentBid currentBid = {currentBid} allBids={itemData.data.bids} removeBid={removeBid} isClosed={itemData.data.closed}/>\r\n            <BidEndDetail endTimeDate={itemData.data.endTime} isClosed={itemData.data.closed} setAuctionClose={setAuctionClose}/>\r\n            <PaymentTypes paymentMethods={itemData.data.paymentMethods} />\r\n            {itemData.data.closed ? <div>This auction is closed.</div> : <PlaceBid updateBid={updateBid} nextBid={nextBid} isClosed={itemData.data.closed} /> }\r\n            <div className=\"bidError\">{bidError}</div>\r\n            <label>Collection Details:\r\n                <div className=\"itemCollection\">\r\n                    {itemData.data.collectionDetails}\r\n                </div>\r\n            </label>\r\n            <div className=\"place\">{itemData.data.place}</div>\r\n            <AuctionItemComments comments={itemData.data.comments} addComment={addComment} removeComment={removeComment} addImage={addCommentImage} isComment={true}/>\r\n            {/*maybe just send itemData.data belwo instead? */}\r\n            <AuctionChat isClosed={itemData.data.closed} \r\n                         sellerID={itemData.data.user} \r\n                         buyerID={returnCurrentBid(itemData.data.bids, itemData.data.startBid, itemData.data.endTime)}\r\n                         chats={itemData.data.chats}\r\n                         addChat={addChat}\r\n                         removeChat={removeChat}\r\n                         addChatImage={addChatImage}\r\n                         updateClose={updateClose}\r\n                         iscompleteSeller={itemData.data.completeSeller}\r\n                         iscompleteBuyer={itemData.data.completeBuyer}\r\n            />\r\n            {/*comments*/}\r\n            <br />\r\n            <br />\r\n            {user ?\r\n                <FlagIcon style={{fill: isFlagged ? \"red\" : \"grey\"}} onClick={(e) =>  makeFlagged()} />\r\n            : <div></div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuctionItem\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useStateValue } from '../StateProvider';\r\n\r\nconst AuctionList = ({ auctionItems, setFilter, user }) => {\r\n    \r\n    return (\r\n        auctionItems.length < 1 ?\r\n            <div className=\"auctionList\">\r\n                You currently do not have any items on the auction. \r\n                {user ?\r\n                    <Link to={\"/create-auction\"}>\r\n                        Click here to add an item.\r\n                    </Link>\r\n                :\r\n                    <Link to={\"/login\"}>\r\n                        Login to post new Items.\r\n                \r\n                    </Link>\r\n                }\r\n            </div>\r\n        :\r\n        <div className=\"auctionList\">\r\n            <div onClick={() => setFilter(\"myAuction\")}>\r\n                {`You currently have ${auctionItems.length} item${auctionItems.length>1 ? 's':''} on the auction:`}\r\n            </div>\r\n            {auctionItems.map((data, index) => {\r\n                return( \r\n                    <div key={`desc${index}`} onClick={() => setFilter(\"byAuctionID\", data.id)}>\r\n                        {/*link to the auction item*/}\r\n                        {data.data.short_description}\r\n                    </div>\r\n                )\r\n            })}\r\n\r\n            <Link to={\"/create-auction\"}>\r\n                Click here to add more items.\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuctionList\r\n","import React from 'react'\r\nimport BidEndDetail from './BidEndDetail'\r\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\r\n\r\nconst WatchList = ({ auctionItems, setFilter, addWatchList }) => {\r\n    const blankFunc = () => {}\r\n\r\n    return (\r\n        <div className=\"watchList\">\r\n            <div className=\"watchListTitle\" onClick={() => setFilter(\"watchList\")}>\r\n                Your Watchlist: \r\n            </div>\r\n            {auctionItems.length === 0 ? \"You have no items in your watch list.\" : \"\"}\r\n            \r\n            {auctionItems.map((data, index) => {\r\n                return (\r\n                    <div key={`watchList${index}`}>\r\n                        <div key={`descWatch${index}`} onClick={() => setFilter(\"byAuctionID\", data.id)}>\r\n                            {data.data.short_description}\r\n                        </div>\r\n                        <div key={`timeWatch${index}`}>\r\n                            <BidEndDetail key={`bidDetail${index}`} endTimeDate={data.data.endTime} isClosed={data.data.isClosed} setAuctionClose={blankFunc} />\r\n                        </div>\r\n                        <div onClick={() => addWatchList(data)}>\r\n                            <VisibilityOffIcon style={{fill: \"greenyellow\"}}/>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WatchList\r\n","import React from 'react'\r\n\r\nconst EndedBids = ({ auctionItems, setFilter }) => {\r\n    return (\r\n        <div className=\"endedBids\" >\r\n            <div className=\"endedBidsTitle\" onClick={() => setFilter(\"endedBid\")}>Ended Bids:</div>\r\n            {auctionItems.map((data, index) => {\r\n                return (\r\n                    <div key={`descEnd${index}`} onClick={() => setFilter(\"byAuctionID\", data.id)}>\r\n                        {data.data.short_description}\r\n                    </div>\r\n                )\r\n            })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EndedBids\r\n","import React from 'react'\r\nimport returnCurrentBid from './returnCurrentBid'\r\n\r\nconst HighestBid = ({ auctionItems, setFilter }) => {\r\n    return (\r\n        <div className=\"highestBid\">\r\n            <div className=\"highestBidTitle\"onClick={() => setFilter(\"highestBid\")} >You currently have the highest bids on:</div>\r\n            \r\n            {auctionItems.map((data, index) => {\r\n                return (\r\n                    <div key={`holderHigh${index}`} onClick={() => setFilter(\"byAuctionID\", data.id)}>\r\n                        <div key={`descHigh${index}`}>\r\n                            {data.data.short_description}\r\n                        </div>\r\n                        <div key={`bidHigh${index}`}>\r\n                            {returnCurrentBid(data.data.bids, data.data.startBid, data.data.endTime).amount}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default HighestBid\r\n","import React from 'react'\r\n\r\nconst WonAuction = ({ auctionItems, setFilter }) => {\r\n    return (\r\n        <div className=\"wonAuction\"> \r\n            <div className=\"wonAuctionTitle\" onClick={() => setFilter(\"wonAuction\")}>You have won the following:</div>\r\n            {auctionItems.map((data, index) => {\r\n                return (\r\n                    <div key={`holderWon${index}`} onClick={() => setFilter(\"byAuctionID\", data.id)}>\r\n                        <div key={`descWon${index}`}>\r\n                            {data.data.short_description}\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WonAuction\r\n","export default \"data:image/png;base64,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\"","import React from 'react'\r\nimport testImage from \"../images/adTemp.png\"\r\nimport \"./LeftPanel.css\"\r\n\r\n//when not showing becasue of screen size need some where to show between posts.\r\n\r\nconst LeftPanel = () => {\r\n    return (\r\n        <div className=\"leftPanel__container\">\r\n            \r\n            <img className=\"mainAd__img\" src={testImage} alt=\"ad\"/>\r\n\r\n            <img className=\"mainAd__img\" src={testImage} alt=\"ad\"/>\r\n\r\n            <img className=\"mainAd__img\" src={testImage} alt=\"ad\"/>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LeftPanel\r\n","let places = [\"Harare\",\r\n              \"Bulawayo\",\r\n              \"Beitbridge\",\r\n              \"Bindura\",\r\n              \"Chegutu\",\r\n              \"Chinhoyi\",\r\n              \"Chipinge\",\r\n              \"Chiredzi\",\r\n              \"Chitungwiza\",\r\n              \"Epworth\",\r\n              \"Gokwe\",\r\n              \"Gweru\",\r\n              \"Gwanda\",\r\n              \"Hwange\",\r\n              \"Kadoma\",\r\n              \"Kariba\",\r\n              \"Karoi\",\r\n              \"Kwekwe\",\r\n              \"Lupane\",\r\n              \"Marondera\",\r\n              \"Masvingo\",\r\n              \"Mutare\",\r\n              \"Norton\",\r\n              \"Redcliff\",\r\n              \"Rusape\",\r\n              \"Ruwa\",\r\n              \"Shurugwi\",\r\n              \"Victoria Falls\",\r\n              \"Zvishavane\",\r\n              \"Other\"]\r\n          \r\n\r\nexport default places","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { useStateValue } from '../StateProvider'\r\nimport AuctionItem from \"./AuctionItem\"\r\nimport AuctionList from './AuctionList';\r\nimport \"./AuctionScreen.css\"\r\nimport { db } from '../firebase';\r\nimport WatchList from './WatchList';\r\nimport EndedBids from './EndedBids';\r\nimport HighestBid from './HighestBid';\r\nimport WonAuction from './WonAuction';\r\nimport returnCurrentBid from \"./returnCurrentBid\";\r\nimport LeftPanel from \"./LeftPanel\";\r\nimport axios from 'axios'\r\nimport places from './cityAndTowns';\r\n//if we saving all item to reducer, then we show read from there,?\r\n\r\n//https://www.javascripttutorial.net/javascript-dom/javascript-scrollintoview/\r\n\r\n//disallow deleting post after auction is done.\r\nconst AuctionScreen = () => {\r\n    const [{ user, timeVariance }, dispatch] = useStateValue();\r\n    const [auctionItems, setAuctionItems] = useState([])\r\n    const [showWatchList, setShowWatchList] = useState(false)\r\n    const [showEndedBid, setShowEndedBid] = useState(false)\r\n    const [showHighestBid, setShowHighestBid] = useState(false)\r\n    const [showWonAuction, setShowWonAuction] = useState(false)\r\n    const [showMyAuction, setShowMyAuction] = useState(false)\r\n    const [sortOrder, setSortOrder] = useState(\"latest\")\r\n    const [byAuctionID, setByAuctionID] = useState(\"\")\r\n    const [place, setPlace] = useState(\"\")\r\n    const flagLimit = 5 //if this number of users flag a post, it must not be shown\r\n\r\n\r\n    useEffect(() => {\r\n        //https://firebase.google.com/docs/firestore/query-data/order-limit-data also includes where \r\n        //look at lmiting items, so only certain amount load, // this seems like a very big job here....\r\n        //this will need to be looked at careful to load ones people want to see... (and not those they seen already?)\r\n\r\n        //build a filter to load items onto the list.\r\n        db.collection(\"auctionItems\").orderBy(\"timeStamp\") //.where(\"deleted\", '==', false)\r\n            //.orderBy(\"timestamp\")  //(\"timestamp\", \"something else\")\r\n            .onSnapshot((snapshot) =>\r\n                setAuctionItems(snapshot.docs.map((doc) => ({ id: doc.id, data: doc.data() }))),\r\n            )\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setPlace(JSON.parse(user.photoURL).place)\r\n        }\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: \"SET_AUCTION_ITEMS\",\r\n            auctionItems: auctionItems\r\n        })\r\n    }, [auctionItems, dispatch])\r\n\r\n    //moved in from AuctioItem, to try stop it from loading so much....\r\n    //this effect and getTimeDate\r\n    useEffect(() => {\r\n        const getTimeVariance = async () => {\r\n            const tempVariance = (+new Date() - +new Date(await getTimeDate())) * -1\r\n            dispatch({\r\n                type: \"SET_TIME_VARIANCE\",\r\n                timeVariance: tempVariance\r\n            })\r\n        }\r\n\r\n        getTimeVariance()\r\n    }, [dispatch])\r\n\r\n\r\n    const addWatchList = (tempItemData) => {\r\n        //adds or removed logged in user from a bid's watched list.\r\n        let tempWatchList = tempItemData.data.watching ? tempItemData.data.watching : []\r\n        let tempIndex = -1\r\n\r\n        tempWatchList.map((data, index) => {\r\n            if (data === user.uid) {\r\n                tempIndex = index\r\n            }\r\n            return 0;\r\n        })\r\n        if (tempIndex === -1) {\r\n            tempWatchList.push(user.uid)\r\n        } else {\r\n            tempWatchList.splice(tempIndex, 1)\r\n        }\r\n\r\n        db.collection(\"auctionItems\").doc(tempItemData.id).update({\r\n            watching: tempWatchList\r\n        })\r\n\r\n    }\r\n\r\n    const removeAuctionItem = (item) => {\r\n        //remove all comment and images,\r\n        //remove all chats and images\r\n        //remove item and images\r\n\r\n\r\n        //check watched list\r\n\r\n        db.collection(\"auctionItems\").doc(item.id).update({\r\n            deleted: true\r\n        })\r\n\r\n\r\n\r\n    }\r\n\r\n    //runs for each auction item loaded maybe change to have to have it run when AuctionScreen is loaded?\r\n    const getTimeDate = async () => {\r\n        return (axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n            .then(res => { return res.data.formatted }\r\n            ))\r\n    }\r\n\r\n    const removeAllFilters = () => {\r\n        setShowWatchList(false)\r\n        setShowEndedBid(false)\r\n        setShowHighestBid(false)\r\n        setShowWonAuction(false)\r\n        setShowMyAuction(false)\r\n        setByAuctionID(\"\")\r\n    }\r\n\r\n    const setFilter = (filterType, id) => {\r\n        removeAllFilters()\r\n\r\n        if (filterType === \"watchList\") {\r\n            setShowWatchList(true)\r\n        } else if (filterType === \"endedBid\") {\r\n            setShowEndedBid(true)\r\n        } else if (filterType === \"highestBid\") {\r\n            setShowHighestBid(true)\r\n        } else if (filterType === \"wonAuction\") {\r\n            setShowWonAuction(true)\r\n        } else if (filterType === \"myAuction\") {\r\n            setShowMyAuction(true)\r\n        } else if (filterType === \"byAuctionID\") {\r\n            setByAuctionID(id)\r\n        }\r\n    }\r\n\r\n    //filters\r\n    const currentUser = (e) => {\r\n        return user ? JSON.parse(e.data.user).uid === user.uid : false\r\n    }\r\n\r\n    const watchList = (e) => {\r\n        return user ? e.data.watching.includes(user.uid) : false\r\n    }\r\n\r\n    const highestBid = (e) => {\r\n        //check all bids from the 'best' one (highest in time bid...)\r\n        return returnCurrentBid(e.data.bids, e.data.startBid, e.data.endTime).id === (user ? user.uid : false)\r\n    }\r\n\r\n    const bidsEnded = (e) => {\r\n        return e.data.closed\r\n    }\r\n    const bidsNotEnded = (e) => {\r\n        return !e.data.closed\r\n    }\r\n\r\n    const notCompleteSeller = (e) => {\r\n        return !e.data.completeSeller\r\n    }\r\n    const notCompleteBuyer = (e) => {\r\n        return !e.data.completeBuyer\r\n    }\r\n\r\n    const mainFilter = (e) => {\r\n        //do not show post that has reached teh flagged limit\r\n        if (e.data.flagged ? flagLimit <= e.data.flagged.length : false) {\r\n            return false\r\n        }\r\n\r\n\r\n        if (showWatchList) {\r\n            return user ? e.data.watching.includes(user.uid) : false\r\n        } else if (showEndedBid) {\r\n            return (user ? JSON.parse(e.data.user).uid === user.uid : false) && e.data.closed && !e.data.completeSeller\r\n        } else if (showHighestBid) {\r\n            return returnCurrentBid(e.data.bids, e.data.startBid, e.data.endTime).id === (user ? user.uid : false) && !e.data.closed\r\n        } else if (showWonAuction) {\r\n            return e.data.closed && returnCurrentBid(e.data.bids, e.data.startBid, e.data.endTime).id === (user ? user.uid : false) && !e.data.completeBuyer\r\n        } else if (showMyAuction) {\r\n            return (user ? JSON.parse(e.data.user).uid === user.uid : false) && !e.data.closed\r\n        } else if (byAuctionID) {\r\n            return e.id === byAuctionID\r\n        }\r\n\r\n        //show all bids\r\n        //change this to show only live auctions, and create some type of filter method... (plus a sort func by date added, by ending time etc)\r\n        //does not show closed items or deleted items                                  or other places items (at the top removes flagged items)\r\n        return !e.data.closed && (e.data.deleted === undefined || !e.data.deleted) && e.data.place === place\r\n\r\n\r\n    }\r\n\r\n    const formatTime = (time) => {\r\n        let seconds = 0\r\n        let minutes = 0\r\n        let hours = 0\r\n        let result = \"\"\r\n        let behind = false\r\n\r\n        if (time > 86400000) {\r\n            return \"more than one day a head. Please check your date/time on your device\"\r\n        }\r\n        if (time < -86400000) {\r\n            return \"more than one day behind. Please check your date/time on your device\"\r\n        }\r\n\r\n        if (time<0){\r\n            behind=true\r\n            time *=-1\r\n        }\r\n\r\n\r\n\r\n        hours = Math.floor(time / 3600000)\r\n        time -= hours * 3600000\r\n        minutes = Math.floor(time / 60000)\r\n        console.log(time)\r\n        time -= minutes * 60000\r\n        console.log(time)\r\n        seconds = (time/1000).toFixed(1)\r\n\r\n        result += hours ? `${hours} hours, ` : \"\"\r\n        result += minutes ? `${minutes} minutes, ` : \"\"\r\n        result += `${seconds} seconds `\r\n\r\n        if (behind) {\r\n            result += \"behind\"\r\n        } else {\r\n            result += \"ahead\"\r\n        }\r\n        \r\n        return result\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"auctionScreen\">\r\n            <div className=\"leftPanel\">\r\n                <LeftPanel />\r\n            </div>\r\n\r\n            <div className=\"auctionItemHolder\">\r\n                <div className=\"auctionHeaders\">\r\n                    <Link to={user ? \"/create-auction\" : \"/login\"}>\r\n                        <div className=\"newAuctionItem\" >\r\n                            {user ? \"Add Item to Auction.\" : \"Login to post new Items.\"}\r\n                        </div>\r\n                    </Link>\r\n                    <hr/>\r\n                    <label>\r\n                        {(!showWatchList && !showEndedBid && !showHighestBid && !showWonAuction && !showMyAuction && !byAuctionID) ?\r\n                            <select className=\"places\"\r\n                                value={place} //JSON.parse(user.photoURL).place\r\n                                onChange={(e) => setPlace(e.target.value)}\r\n                            >\r\n                                {places.map((data, index) => {\r\n                                    return (\r\n                                        <option key={`place${index}`} value={data}>{data}</option>\r\n                                    )\r\n                                })}\r\n                            </select>\r\n                            :\r\n                            <div></div>}\r\n\r\n                    </label>\r\n                    \r\n                    <div><small>{`(Showing ${auctionItems.filter(mainFilter).length} items)`}</small></div>\r\n                    {showWatchList ? \"Your Watch List: \" + (auctionItems.length < 1) ? \"To an item to your watchlist click on the 'eye' icon on any post you want to keep an eye on.\" : \"\" : \"\"}\r\n                    {showEndedBid ? \"Your auction items that have ended: \" : \"\"}\r\n                    {showHighestBid ? \"You have the highest bid so far on the following: \" : \"\"}\r\n                    {showWonAuction ? \"You have won the following items: \" : \"\"}\r\n                    {showMyAuction ? \"You have the following items in the aution: \" : \"\"}\r\n                    {byAuctionID ? \"Showing single item:\" : \"\"}\r\n                    \r\n                    {(!showWatchList && !showEndedBid && !showHighestBid && !showWonAuction && !showMyAuction && !byAuctionID) ?\r\n                        //latest    \r\n                        <div>\r\n                            <div>Sort items by...</div>\r\n                            <select className=\"sortOrder\"\r\n                                value={sortOrder} //JSON.parse(user.photoURL).place\r\n                                onChange={(e) => setSortOrder(e.target.value)}\r\n                            >\r\n                                <option value={\"latest\"}>Post Time</option>\r\n                                <option value={\"bidEndTime\"}>Closing Time</option>\r\n                            </select>\r\n                        </div>\r\n                        :\r\n                        <div></div>}\r\n                </div>\r\n\r\n                {/*loop though list of lists if none display something else... */}\r\n                {/*endTime */}\r\n                {auctionItems.filter(mainFilter).sort((a, b) => { return sortOrder === \"latest\" ? new Date(b.data.timeStamp) - new Date(a.data.timeStamp) : sortOrder === \"bidEndTime\" ? new Date(a.data.endTime) - new Date(b.data.endTime) : true }).map((data, index) => {\r\n                    //function(a,b) {return new Date(b.data.timeStamp)-new Date(a.data.timeStamp)}\r\n\r\n                    //\r\n                    //\r\n                    return <AuctionItem key={index} itemData={data} index={index} addWatchList={addWatchList} removeAuctionItem={removeAuctionItem} />\r\n                })}\r\n            </div>\r\n\r\n            <div className=\"rightPanel\">\r\n                <div className=\"timeVariance\">\r\n                    Your device's time is <b>{formatTime(timeVariance)}</b>.\r\n                </div>\r\n                <hr/>\r\n                <div className=\"showAll\" onClick={() => removeAllFilters()}>Show all items</div>\r\n                {/* remove with a filter auction that have been moved as complet */}\r\n                <hr/>\r\n                <AuctionList auctionItems={auctionItems.filter(currentUser).filter(bidsNotEnded)} setFilter={setFilter} user={user} />\r\n                <hr/>\r\n                <WatchList auctionItems={auctionItems.filter(watchList)} setFilter={setFilter} addWatchList={addWatchList} />\r\n                <hr/>\r\n                <EndedBids auctionItems={auctionItems.filter(currentUser).filter(bidsEnded).filter(notCompleteSeller)} setFilter={setFilter} />  {/*.filter(currentUser)*/}\r\n                <hr/>\r\n                <HighestBid auctionItems={auctionItems.filter(highestBid).filter(bidsNotEnded)} setFilter={setFilter} />\r\n                <hr/>\r\n                <WonAuction auctionItems={auctionItems.filter(bidsEnded).filter(highestBid).filter(notCompleteBuyer)} setFilter={setFilter} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuctionScreen\r\n","import React from 'react'\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { useStateValue } from '../StateProvider';\r\n\r\nimport \"./Header.css\"\r\n\r\nconst Header = () => {\r\n    const [{ user }] = useStateValue();\r\n    let history = useHistory();\r\n\r\n    const handleAuthentitcation = () => {\r\n        if ({user}) {\r\n            auth.signOut();\r\n            history.push(\"/\")\r\n        }\r\n    }\r\n    return (\r\n        \r\n        <div className=\"header\">\r\n            <div className=\"leftSide\">\r\n                <Link className=\"links\" to={\"/\"}>Home</Link>\r\n                <Link className=\"links\" to={\"/auction\"}>Auction</Link>\r\n                <Link className=\"links\" to={\"/store\"}>Store</Link>\r\n                <Link className=\"links\" to={\"/notice-board\"}>Notice Board</Link>\r\n            </div>\r\n\r\n            <div className=\"rightSide\">\r\n                <Link className=\"links linkAbout\" to={\"/about\"} >About</Link>\r\n                {user ?\r\n                    <Link className=\"links linkAbout\" to={\"/profile/\" + user.uid} >\r\n                        {user.displayName}\r\n                    </Link>\r\n                :\r\n                    <div></div>\r\n                }\r\n\r\n                {user ?\r\n                    <div onClick={handleAuthentitcation} className=\"logoutOption links\">\r\n                        Logout\r\n                    </div>\r\n                :\r\n                    <Link className=\"links\" to={\"/login\"}>\r\n                        <div className=\"loginOption\">\r\n                            Login/Signup\r\n                        </div>\r\n                    </Link>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header","import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { auth, storage } from \"../firebase\";\r\nimport CRC32 from \"crc-32\"\r\nimport places from './cityAndTowns';\r\nimport \"./SignIn.css\"\r\nimport defaultImage from \"../images/userImage.png\"\r\n//import defaultImage from \"../images/userImage.png\"\r\n\r\nconst SignIn = () => {\r\n    const history = useHistory();\r\n    const [signInEmail, setSignInEmail] = useState(\"\")\r\n    const [signUpEmail, setSignUpEmail] = useState(\"\")\r\n    const [signInPassword, setSignInPassword] = useState(\"\")\r\n    const [signUpPassword, setSignUpPassword] = useState(\"\")\r\n    const [signUpUsername, setSignUpUsername] = useState(\"\")\r\n    //change useState(\"\") to be default pic instead\r\n    //defaultImage\r\n    //problem is the rest of the program is trying to find defaultImage on firebase.\r\n    const [profilePicture, setProfilePicture] = useState(\"\")\r\n\r\n    const signIn = e => {\r\n        e.preventDefault();\r\n        //not sure about here... since username is all ready there, should not need the input,\r\n        //so i need two screen then...?\r\n        //link to sign-up form, which includes username and images options...\r\n\r\n        auth.signInWithEmailAndPassword(signInEmail, signInPassword)\r\n            .then(auth => {\r\n                history.push(\"/\")\r\n            }).catch(error => alert(error.message))\r\n    }\r\n\r\n    const register = e => {\r\n        e.preventDefault();\r\n\r\n        let profileID = CRC32.str(\r\n            profilePicture.name +\r\n            profilePicture.lastModified +\r\n            profilePicture.size +\r\n            Math.random()\r\n        ).toString(32)\r\n\r\n        auth.createUserWithEmailAndPassword(signUpEmail, signUpPassword).then((auth) => {\r\n            if (auth) {\r\n                let tempDetails = {\r\n                    tier: 0,\r\n                    payments: [],\r\n                    photoURL: \"/\" + auth.user.uid + `/images/profile/${profileID}/${profilePicture.name}`,\r\n                    place: document.getElementById(\"userPlace\").value\r\n                }\r\n\r\n                auth.user.updateProfile({\r\n                    displayName: signUpUsername,\r\n                    photoURL: JSON.stringify(tempDetails)\r\n                })\r\n\r\n\r\n                var metadata = {\r\n                    contentType: 'image/jpeg'\r\n                }\r\n                console.log(tempDetails.photoURL)\r\n                storage.ref(tempDetails.photoURL).put(profilePicture, metadata)\r\n\r\n                history.push(\"/\")\r\n            }\r\n\r\n        })\r\n            .catch(error => alert(error.message))\r\n    }\r\n\r\n\r\n    const addProfileImage = (event) => {\r\n        setProfilePicture(event.target.files[0])\r\n\r\n        var imageX = document.getElementById(\"profilePicturePreview\")\r\n        imageX.src = URL.createObjectURL(event.target.files[0])\r\n\r\n    }\r\n\r\n\r\n    let fileInputX = \"\"\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"signUp\">\r\n                <h1>Sign In</h1>\r\n                <form>\r\n                    <h4>E-mail</h4>\r\n                    <input type=\"text\" value={signInEmail} onChange={e => setSignInEmail(e.target.value)} />\r\n\r\n                    <h4>Password</h4>\r\n                    <input type=\"password\" value={signInPassword} onChange={e => setSignInPassword(e.target.value)} />\r\n                    <br />\r\n                    <br />\r\n                    \r\n                    <br />\r\n                    \r\n                    <div><button type=\"submit\" onClick={signIn} className=\"login__signInButton\">Sign In</button></div>\r\n                </form>\r\n            </div>\r\n            <div className=\"signIn\">\r\n\r\n                <h1>Sign Up</h1>\r\n                <form>\r\n                    <h4>Username</h4>\r\n                    <input type=\"text\" value={signUpUsername} onChange={e => setSignUpUsername(e.target.value)} />\r\n\r\n                    <label><h4>Select your default Town/City:</h4>\r\n                        <select className=\"places\" id=\"userPlace\">\r\n                            {places.map((data, index) => {\r\n                                return (\r\n                                    <option key={`place${index}`} value={data}>{data}</option>\r\n                                )\r\n                            })}\r\n                        </select>\r\n                    </label>\r\n\r\n                    <h4>Add Profile Picture</h4>\r\n                    <img className=\"image\" id=\"profilePicturePreview\" src={defaultImage} alt=\"\" />\r\n                    <div></div>\r\n                    <input\r\n                        style={{ display: \"none\" }}\r\n                        accept=\"image/*\"\r\n                        type=\"file\"\r\n                        onChange={addProfileImage}\r\n                        ref={fileInput => fileInputX = fileInput}\r\n                    />\r\n                    <button type=\"button\" onClick={() => fileInputX.click()} className=\"addProfileImage\">Add Image</button>\r\n\r\n                    <h4>E-mail</h4>\r\n                    <input type=\"text\" value={signUpEmail} onChange={e => setSignUpEmail(e.target.value)} />\r\n\r\n                    <h4>Password</h4>\r\n                    <input type=\"password\" value={signUpPassword} onChange={e => setSignUpPassword(e.target.value)} />\r\n\r\n                    <br />\r\n                    <br />                    \r\n                    <br />\r\n                    <div><button onClick={register} className=\"login__registerButton\">Create your Zimboland Account</button></div>\r\n                </form>\r\n\r\n                <p>By join and /or signing-in you agree to Zimboland's Conditions of Use & Sale. Please\r\n                    see our Privacy Notice, our Cookie Notice and our Interest-Based Ads Notice.\r\n                </p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignIn\r\n","const currecies = [\"USD\", \"ZAR\", \"ZIM$\"]\r\n\r\nexport default currecies","const paymentMethods = [\"Cash\", \"Ecocash\", \"Zipit\", \"OneWallet\", \"ROtD\"]\r\n\r\nexport default paymentMethods;","const tierConsts = [\r\n        {\r\n            activePosts: 3,\r\n            maxAuctionLength: 3,\r\n            maxWatchedItems: 10,\r\n            imagePerItem: 1,\r\n            tierName: \"Free Tier\",\r\n            cost: 0,\r\n            active: true,   //allows me to disable or enable some tier for specials and events\r\n            code: 10,\r\n        },\r\n        {\r\n            activePosts: 5,\r\n            maxAuctionLength: 5,\r\n            maxWatchedItems: 20,\r\n            imagePerItem: 3,\r\n            tierName: \"Bronze Tier\",\r\n            cost: 1,\r\n            active: true,\r\n            code: 20,\r\n        },\r\n        {\r\n            activePosts: 10,\r\n            maxAuctionLength: 10,\r\n            maxWatchedItems: 20,\r\n            imagePerItem: 5,\r\n            tierName: \"Silver Tier\",\r\n            cost: 5,\r\n            active: true,\r\n            code: 30,\r\n        },\r\n        {\r\n            activePosts: 50,\r\n            maxAuctionLength: 30,\r\n            maxWatchedItems: 100,\r\n            imagePerItem: 10,\r\n            tierName: \"Gold Tier\",\r\n            cost: 12,\r\n            active: true,\r\n            code: 40,\r\n        }\r\n    ]\r\n\r\n\r\n\r\nexport default tierConsts","import React, { useEffect, useReducer, useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport currecies from \"../lists/currencies\"\r\nimport paymentMethods from \"../lists/paymentMethods\"\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useStateValue } from '../StateProvider';\r\nimport { db } from '../firebase';\r\nimport tierConsts from \"./tierConsts\"\r\nimport places from './cityAndTowns';\r\n//maybe monkey we need to dispatch all imported info...\r\n//edit func almost works\r\n\r\n//auction end dats cannot be before now\r\n//https://firebase.google.com/docs/storage/web/upload-files\r\n\r\n//when press cancel doesnt clear the forms info\r\n\r\n//maybe delay the bid from appearing for 20 second, so the images can be upload and doesnt appear blank...\r\nconst NewAuctionItem = () => {\r\n    const [auctionItems, setAuctionItems] = useState([])\r\n    const [{ user, auctionItem }, dispatch] = useStateValue();\r\n    let history = useHistory();\r\n\r\n    const initialState = {\r\n        id: \"\",\r\n        short_description: auctionItem ? auctionItem.auctionObject.short_description : \"\",\r\n        long_description: auctionItem ? auctionItem.auctionObject.long_description : \"\",\r\n        images: auctionItem ? auctionItem.auctionObject.images : [],\r\n        bidCurrency: auctionItem ? auctionItem.auctionObject.bidCurrency : \"USD\", //change this to a better way, useEffect\r\n        startBid: auctionItem ? auctionItem.auctionObject.startBid : 0,\r\n        endDate: auctionItem ? auctionItem.auctionObject.endTime.substr(0, 10) : \"\",\r\n        endTime: auctionItem ? auctionItem.auctionObject.endTime.substr(11, 8) : \"\",\r\n        collectionDetails: auctionItem ? auctionItem.auctionObject.collectionDetails : \"\",\r\n        paymentMethods: auctionItem ? auctionItem.auctionObject.paymentMethods : [],\r\n        place: auctionItem ? auctionItem.auctionObject.place : \"\",\r\n        uploading: auctionItem ? auctionItem.auctionObject.paymentMethods : false,\r\n    }\r\n\r\n    //sort out payment methods, ei check teh box\r\n    //then test everything....\r\n\r\n\r\n    useEffect(() => {\r\n        if (auctionItem) {\r\n            let tempPayment = auctionItem.auctionObject.paymentMethods\r\n            let tempElement = \"\"\r\n\r\n            paymentMethods.map((data, index) => {\r\n                tempElement = document.getElementById(`currency${index}`)\r\n                if (tempElement) {\r\n                    tempElement.checked = tempPayment.includes(tempElement.value)\r\n                }\r\n\r\n                return 0\r\n            })\r\n\r\n            tempElement = document.getElementById(`userPlace`)\r\n            if (tempElement) {\r\n                tempElement.value = auctionItem.auctionObject.place\r\n                dispatchLocal({ type: \"setPlace\", data: auctionItem.auctionObject.place })\r\n                //some point after this it get changed to undifened\r\n                //maybe monkey we need to dispatch all imported info...\r\n            }\r\n            \r\n            tempElement = document.getElementById(`currency`)\r\n            if (tempElement) {\r\n                tempElement.value = auctionItem.auctionObject.bidCurrency\r\n                dispatchLocal({ type: \"setBidCurrency\", data: auctionItem.auctionObject.bidCurrency })\r\n                //maybe monkey we need to dispatch all imported info...\r\n            }\r\n        }\r\n\r\n        //const unmount = () => {\r\n        //    ([])\r\n        //}\r\n        //return () => {\r\n        //    unmount()\r\n        //};\r\n\r\n\r\n    }, [auctionItem])\r\n\r\n    \r\n\r\n    const reducer = (state, action) => {\r\n        switch (action.type) {\r\n            case \"setId\":\r\n                return { ...state, id: action.data };\r\n            case \"setShort_description\":\r\n                return { ...state, short_description: action.data };\r\n            case \"setLong_description\":\r\n                return { ...state, long_description: action.data };\r\n            case \"setImages\":\r\n                return { ...state, images: action.data };\r\n            case \"setBidCurrency\":\r\n                return { ...state, bidCurrency: action.data };\r\n            case \"setStartBid\":\r\n                return { ...state, startBid: action.data };\r\n            case \"setEndDate\":\r\n                return { ...state, endDate: action.data };\r\n            case \"setEndTime\":\r\n                return { ...state, endTime: action.data };\r\n            case \"setCollectionDetails\":\r\n                return { ...state, collectionDetails: action.data };\r\n            case \"setPaymentMethods\":\r\n                return { ...state, paymentMethods: action.data };\r\n            case \"setPlace\":\r\n                return { ...state, place: action.data };\r\n            case \"setUploading\":\r\n                return { ...state, uploading: action.data }\r\n            default:\r\n                console.log(action.type)\r\n                throw new Error();\r\n        }\r\n    }\r\n\r\n    const [state, dispatchLocal] = useReducer(reducer, initialState);\r\n\r\n\r\n    useEffect(() => {\r\n        //dont worry about any of this (unless you think its need to be re-called for some reason)\r\n        //just get the auctionItems for reduce and use a filter on it to show only this user\r\n        //this might not work below user.id?? should it not be user.uid\r\n        db.collection(\"auctionItems\").where(\"user.id\", \"==\", user.uid).orderBy(\"timeStamp\")\r\n            //.orderBy(\"timestamp\")  //(\"timestamp\", \"something else\")\r\n            .onSnapshot((snapshot) =>\r\n                setAuctionItems(snapshot.docs.map((doc) => ({ id: doc.id, data: doc.data() }))),\r\n            )\r\n        dispatchLocal({ type: \"setPlace\", data: state.place ? state.place : JSON.parse(user.photoURL).place })\r\n\r\n        const unmount = () => {\r\n            setAuctionItems([])\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n        \r\n    }, [user, state.place])\r\n\r\n\r\n    /*const removeImage = (id) => {\r\n        \r\n    }*/\r\n\r\n    /* const onChange = (e) => {\r\n         const files = Array.fromm(e.target.files)\r\n         dispatchLocal({ type: \"setUploading\", data: true })}\r\n \r\n         const formData = new FormData()\r\n \r\n         files.forEach((file, i) => {\r\n             formData.append(i, file)\r\n         })\r\n \r\n     }*/\r\n\r\n    /*const uploadImages = () => {\r\n        switch(true) {\r\n            case initialState.uploading:\r\n                return <Spinner />\r\n            case initialState.images.length > 0:\r\n                return <Images images={initialState.images} removeImage={removeImage} />\r\n            default:\r\n                return <Buttons onChange={onChange} />\r\n        }\r\n    }*/\r\n\r\n    const addPaymentMethods = (e) => {\r\n        let temp = state.paymentMethods\r\n        let tempItem = e.target.value\r\n\r\n        if (e.target.checked) {\r\n            temp.push(tempItem)\r\n        } else {\r\n            temp = temp.filter(e => e !== tempItem)\r\n        }\r\n\r\n        dispatchLocal({ type: \"setPaymentMethods\", data: temp })\r\n\r\n    }\r\n\r\n    const addAuction = (e) => {\r\n        e.preventDefault();\r\n        //check if form is full out correctly....\r\n        //add\r\n        if (!state.short_description) {\r\n            alert(\"Please enter a name for your item.\")\r\n            return false\r\n        } else if (!state.long_description) {\r\n            alert(\"Please enter a description for your item.\")\r\n            return false\r\n        } else if (state.images.length < 1) {\r\n            alert(\"Please upload an image for your item.\")\r\n            return false\r\n        } else if (!state.paymentMethods) {\r\n            alert(\"Please select at least one payment method for your item.\")\r\n            return false\r\n        } else if (!state.endDate) {\r\n            alert(\"Please select an end date for your item.\")\r\n            return false\r\n        } else if (!state.endTime) {\r\n            alert(\"Please select an end time for your item.\")\r\n            return false\r\n        } else if (!state.collectionDetails) {\r\n            alert(\"Please enter collection details for your item.\")\r\n            return false\r\n        } else if (!state.place) {\r\n            alert(\"Please enter a town or city for collection, for your item.\")\r\n            return false\r\n        }\r\n        //check starting bid, i have not yet included it here.\r\n\r\n\r\n        let bidEndDateAndTime = state.endDate + \" \" + state.endTime + \":00\"\r\n\r\n        const auctionObject = {\r\n            id: state.id,\r\n            short_description: state.short_description,\r\n            long_description: state.long_description,\r\n            images: state.images,\r\n            bidCurrency: state.bidCurrency,\r\n            startBid: state.startBid,\r\n            endTime: bidEndDateAndTime,\r\n            collectionDetails: state.collectionDetails,\r\n            paymentMethods: state.paymentMethods,\r\n            place: state.place\r\n        }\r\n\r\n        //move this to confirm AuctionItem\r\n\r\n\r\n        dispatch({\r\n            type: \"SET_NEW_AUCTION_ITEM\",\r\n            auctionItem: { auctionObject }\r\n        })\r\n\r\n        //go to screen to confirm.\r\n        history.push(\"/confirm\")\r\n    }\r\n\r\n    const fileSelectedHandler = (event) => {\r\n        var allImages = state.images\r\n        allImages.push(event.target.files[0]) //maybe do it so if more than one file is upladed...\r\n        dispatchLocal({ type: \"setImages\", data: allImages })\r\n        /*const fd = new FormData();*/\r\n\r\n        var imageX = document.getElementById(\"make\")\r\n        imageX.src = URL.createObjectURL(event.target.files[0])\r\n\r\n    }\r\n\r\n    const checkNumberOfBids = () => {\r\n        //return true if user's bids are below allowed bids\r\n        //do not count bid that are closed....\r\n        console.log(user.tier)\r\n        //user.tier will need to look at payments to see what tier the user is using\r\n        //check today and find which tier it falls into.\r\n        if (auctionItems.length < tierConsts[user.tier].activePosts) {\r\n            return true\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n\r\n    let fileInputX = \"\"\r\n    return (\r\n        checkNumberOfBids() ?\r\n            <div className=\"newAuctionItem\">\r\n                <form className=\"newAuctionForm\">\r\n                    <label>\r\n\r\n                        Item:\r\n                        <input className=\"shortDescription\"\r\n                            type=\"text\"\r\n                            value={state.short_description}\r\n                            onChange={(e) => dispatchLocal({ type: \"setShort_description\", data: e.target.value })}\r\n                        />\r\n                    </label>\r\n\r\n                    <label>\r\n                        Description:\r\n                        <input className=\"longDescription\"\r\n                            type=\"text\"\r\n                            value={state.long_description}\r\n                            onChange={(e) => dispatchLocal({ type: \"setLong_description\", data: e.target.value })}\r\n                        />\r\n                    </label>\r\n\r\n                    <label>\r\n                        Upload Images:\r\n                        <img id=\"make\" src=\"\" alt=\"\" />\r\n                        <input style={{ display: \"none\" }}\r\n                            accept=\"image/*\"\r\n                            type=\"file\"\r\n                            onChange={fileSelectedHandler}\r\n                            ref={fileInput => fileInputX = fileInput}\r\n                        />\r\n                        <button type=\"button\" onClick={() => fileInputX.click()}>Select File</button>\r\n                    </label>\r\n\r\n                    {/* Add in acceptabele payment methods... */}\r\n\r\n                    <label>\r\n                        Select Currency:\r\n                        <select className=\"currency\" id=\"currency\"\r\n                            onChange={(e) => dispatchLocal({ type: \"setBidCurrency\", data: e.target.value })}\r\n                        >\r\n                            {currecies.map((data, index) => {\r\n                                return (<option key={index} value={`${data}`}>{data}</option>)\r\n                            })}\r\n\r\n                        </select>\r\n                    </label>\r\n\r\n                    <label>\r\n                        Payment Methods:\r\n                        <div className=\"currency\">\r\n                            {paymentMethods.map((data, index) => {\r\n                                return (\r\n                                    <div key={index}>\r\n                                        <label>{data}\r\n                                            <input key={index} id={`currency${index}`} type=\"checkbox\" value={`${data}`} onChange={(e) => addPaymentMethods(e)} />\r\n                                        </label>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </label>\r\n\r\n                    <label>\r\n                        Minimum Accept Bid:\r\n                        <input className=\"startBid\"\r\n                            type=\"number\"\r\n                            value={state.startBid}\r\n                            onChange={(e) => dispatchLocal({ type: \"setStartBid\", data: e.target.value })}\r\n                        />\r\n                    </label>\r\n\r\n                    <label>\r\n                        Auction ends:\r\n                        <input className=\"endBid\"\r\n                            type=\"date\"\r\n                            value={state.endDate}\r\n                            onChange={(e) => dispatchLocal({ type: \"setEndDate\", data: e.target.value })}\r\n                        />\r\n                        <input className=\"endBid\"\r\n                            type=\"time\"\r\n                            value={state.endTime}\r\n                            onChange={(e) => dispatchLocal({ type: \"setEndTime\", data: e.target.value })}\r\n                        />\r\n                    </label>\r\n\r\n                    <label>\r\n                        Collection Details:\r\n                        <input className=\"collectionDetails\"\r\n                            type=\"text\"\r\n                            value={state.collectionDetails}\r\n                            onChange={(e) => dispatchLocal({ type: \"setCollectionDetails\", data: e.target.value })}\r\n                        />\r\n                    </label>\r\n                    <label>\r\n                        <select className=\"places\" id=\"userPlace\"\r\n                            value={state.place ? state.place : JSON.parse(user.photoURL).place}\r\n                            onChange={(e) => dispatchLocal({ type: \"setPlace\", data: e.target.value })}\r\n                        >\r\n                            {places.map((data, index) => {\r\n                                return (\r\n                                    <option key={`place${index}`} value={data}>{data}</option>\r\n                                )\r\n                            })}\r\n                        </select>\r\n                    </label>\r\n\r\n                    <button onClick={addAuction} type=\"submit\" className=\"addAuction\">\r\n                        Submit\r\n                    </button>\r\n                    <Link to={\"/\"}>\r\n                        <button className=\"cancelAuction\">\r\n                            Cancel\r\n                        </button>\r\n                    </Link>\r\n\r\n                </form>\r\n            </div>\r\n            :\r\n            <div>\r\n                Too many items\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default NewAuctionItem","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { useStateValue } from '../StateProvider';\r\nimport CRC32 from \"crc-32\"\r\n\r\nimport BidEndDetail from './BidEndDetail';\r\n//import CurrentBid from './CurrentBid';\r\nimport ItemImage from './ItemImage';\r\nimport PaymentTypes from './PaymentTypes';\r\nimport UserBidItem from './UserBidItem';\r\n\r\nimport \"./AuctionItem.css\"\r\nimport { db, storage } from '../firebase';\r\n//import NewAuctionItem from './NewAuctionItem';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n//firebase timestmap\r\n//timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\nconst ConfirmAuctionItem = () => {\r\n    const [{ user, auctionItem }, dispatch] = useStateValue();\r\n    console.log(auctionItem)\r\n    const [images, setImages] = useState([]);\r\n    let postUID = CRC32.str(auctionItem.auctionObject.short_description +\r\n        auctionItem.auctionObject.long_description +\r\n        auctionItem.auctionObject.startBid +\r\n        auctionItem.auctionObject.collectionDetails +\r\n        auctionItem.auctionObject.endTime +\r\n        Math.random()\r\n    ).toString(32)\r\n    let history = useHistory();\r\n\r\n    useEffect(() => {\r\n        let tempImages = images\r\n        auctionItem.auctionObject.images.map((data, index) => {\r\n            tempImages.push(`/${user.uid}/${postUID}/images/${data.name}`)\r\n            return 0\r\n        })\r\n\r\n        //use map...\r\n        setImages(tempImages)\r\n\r\n        const unmount = () => {\r\n            setImages([])\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n\r\n    }, [images, auctionItem.auctionObject, user.uid, postUID])\r\n\r\n\r\n    const getTimeDate = async () => {\r\n        //return (time)\r\n        return (axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n            .then(res => { return res.data.formatted }\r\n        ))\r\n    }\r\n\r\n    const savePost = async (e) => {\r\n        e.preventDefault();\r\n        let tempTime = await getTimeDate()\r\n        db.collection(\"auctionItems\").add({\r\n            bidCurrency: auctionItem.auctionObject.bidCurrency,\r\n            bids: [],\r\n            collectionDetails: auctionItem.auctionObject.collectionDetails,\r\n            comments: [],\r\n            images: images, //get link from above images storage\r\n            long_description: auctionItem.auctionObject.long_description,\r\n            paymentMethods: auctionItem.auctionObject.paymentMethods,\r\n            short_description: auctionItem.auctionObject.short_description,\r\n            startBid: auctionItem.auctionObject.startBid,\r\n            endTime: auctionItem.auctionObject.endTime,\r\n            place: auctionItem.auctionObject.place,\r\n            user: JSON.stringify(user),// { id: user.uid, displayName: user.displayName }, //get logged in users id  not auctionItem.auctionObject.user\r\n            timeStamp: tempTime,      //get a real timestamp, from website\r\n            closed: false,\r\n            watching: [],\r\n            completeSeller: false,\r\n            completeBuyer: false,\r\n            chat: [],\r\n            //read here: https://firebase.google.com/docs/firestore/manage-data/add-data  \r\n        })\r\n\r\n        auctionItem.auctionObject.images.map((data, index) => {\r\n            var metadata = {\r\n                contentType: 'image/jpeg'\r\n            }\r\n            storage.ref(`/${user.uid}/${postUID}/images/${data.name}`).put(data, metadata)\r\n\r\n            return 0\r\n        })\r\n\r\n        \r\n        \r\n        \r\n        history.push(\"/auction\")\r\n\r\n        dispatch({\r\n            type: \"SET_NEW_AUCTION_ITEM\",\r\n            auctionItem: null\r\n        })\r\n        //\r\n    }\r\n\r\n    const returnToEdit = () => {\r\n        //go to screen to confirm.\r\n        history.push(\"/create-auction\")\r\n    }\r\n\r\n\r\n    //https://firebasestorage.googleapis.com/v0/b/zimboland-6591f.appspot.com/o/images%2F199231_slide.jpg\r\n    //gs://zimboland-6591f.appspot.com/images/199231_slide.jpg\r\n    const blankFunc = () => {}\r\n\r\n    return (\r\n        <div className=\"confirmAuctionItem\">\r\n            <form>\r\n                <UserBidItem user={JSON.stringify(user)} />\r\n                <div className=\"itemName\">\r\n                    {auctionItem.auctionObject.short_description}\r\n                </div>\r\n                <div className=\"itemDescription\">\r\n                    {auctionItem.auctionObject.long_description}\r\n                </div>\r\n                <ItemImage imageLinks={auctionItem.auctionObject.images} lotIndex={0} isPreview={true} />  {/*auctionItem.auctionObject.images*/}\r\n                {/*<CurrentBid currentBid={bidDetails} />*/}\r\n                <BidEndDetail endTimeDate={auctionItem.auctionObject.endTime} isClosed={false} setAuctionClose={blankFunc}/>\r\n                <PaymentTypes paymentMethods={auctionItem.auctionObject.paymentMethods} />\r\n                <div className=\"bidError\">{\"\"}</div>\r\n                <div className=\"itemCollection\">\r\n                    {auctionItem.auctionObject.collectionDetails}\r\n                </div>\r\n                <div className=\"place\">{auctionItem.auctionObject.place}</div>\r\n\r\n                {/*comments*/}\r\n                <br />\r\n                <br />\r\n                <button onClick={savePost} type=\"submit\" className=\"savePost\">Confirm</button>\r\n                <button onClick={() => returnToEdit()} className=\"editPost\">Edit</button>\r\n\r\n                <Link to={\"/\"}>\r\n                    <button className=\"cancelPost\">\r\n                        Cancel\r\n                    </button>\r\n                </Link>\r\n                \r\n            </form>\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default ConfirmAuctionItem;\r\n\r\n\r\n\r\n","import axios from 'axios'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { db, storage } from '../firebase'\r\nimport { useStateValue } from '../StateProvider'\r\nimport tierConsts from './tierConsts'\r\nimport \"./UserProfile.css\"\r\n//import { userList } from '../firebase'\r\n\r\n//seems to need firebase-admin, which crash teh progem when i try to install it...?\r\n//https://firebase.google.com/docs/auth/admin/manage-users#list_all_users\r\n\r\n\r\nconst UserProfile = () => {\r\n    const [tempDetails, setTempDetails] = useState([])\r\n    const [tier, setTier] = useState([])\r\n    const [{ user, auctionItems }] = useStateValue()\r\n    let {name} = useParams()\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            //works okay, just need to test it with real dates.\r\n            //seems to load very slow\r\n            db.collection(\"payments\").where(\"userID\", '==', user.uid) //.where(\"payments.expired\", \"==\", false).where(\"payments.notChanged\", \"==\", false)\r\n                .onSnapshot((snapshot) => //dont need snapshot???\r\n                    setTempDetails(snapshot.docs.map((doc) => ({ id: doc.id, data: doc.data() }))),\r\n                )\r\n        }\r\n\r\n        const unmount = () => {\r\n            setTempDetails([])\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n    }, [user])\r\n\r\n\r\n    const getRealTimeDate = async () => {\r\n        return (axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n            .then(res => { return res.data.formatted })\r\n        )\r\n    }\r\n\r\n    const calculateTier = async () => {\r\n        let currentDate = await new Date(getRealTimeDate)\r\n\r\n        tempDetails.map((data, index) => {\r\n            console.log(data)\r\n            //if (data > currentDate)\r\n        })\r\n\r\n        return \"4 it run\"\r\n        \r\n    }\r\n\r\n    //problem here, only load auctionItems, once use has viewed teh auction page.\r\n    \r\n    let userInfo = user ? JSON.parse(user.photoURL) : \"\";\r\n    //userList.getUser({name})\r\n    //    .then((userRecord) => {\r\n    //        console.log(userRecord)\r\n    //    })\r\n    useEffect(()=> {\r\n        storage.ref(userInfo.photoURL).getDownloadURL()\r\n            .then((url) => {\r\n                var img = document.getElementById(\"profilePicture\");\r\n                img ? img.setAttribute('src', url) : console.log(\"error\" + url); //does this not sho last image remove fropm map maybe.\r\n            })\r\n    })\r\n\r\n    //filters\r\n    const currentUser = (e) => {\r\n        return user ? JSON.parse(e.data.user).uid === user.uid : false\r\n    }\r\n    const bidsNotEnded = (e) => {\r\n        return !e.data.closed\r\n    }\r\n\r\n\r\n    return (\r\n        user ?\r\n            name === user.uid ?            \r\n                <div className=\"userProfile\">\r\n                    {/*own profile page*/}\r\n                    \r\n                    <div>{user.displayName}'s Profile Page</div>\r\n                    <img id=\"profilePicture\" className=\"profilePicture\"  scr={userInfo.photoURL} alt={\"\"}/>\r\n                    <div>You are currenly on <b> {calculateTier} </b> tier.</div> {/*instead on sayin 0,1,2,  use names like free, level 1, etc*/}\r\n                    <Link className=\"paymentLink\" to={\"/payments\"} >\r\n                        <div>Make Payment</div>\r\n                    </Link>\r\n\r\n                    <br />\r\n                    <div>Change Password</div>\r\n                    <br />\r\n                    <div>Auction Details:</div>\r\n                    <br />\r\n                    <div>All Auction items</div> {/* clickable to take you to a list of  */}\r\n                    <br />\r\n                    <div>You currently have the following items on auction:</div>\r\n\r\n                    {auctionItems.filter(currentUser).filter(bidsNotEnded).map((data, index) => {\r\n                        \r\n                        return(\r\n                            JSON.parse(data.data.user).uid === user.uid\r\n                            ?\r\n                                <div>\r\n                                    {/*add in link to auction item */}\r\n                                    <div>{data.data.short_description}</div>\r\n                                </div>\r\n                            :\r\n                                <div>\r\n                                </div>\r\n                            )\r\n                    })}\r\n                    \r\n                    <br />\r\n                    {/*auctionItems. isEnded .isCurrrentUser .bid.length >0 .isClosed */}\r\n                    <div>You have sold X-number items</div>\r\n                    <div>You have bought X-number items</div> {/*this might be too long of a search it their are 1000s of items.*/}\r\n                    <br />\r\n                    <div>Change Settings</div>\r\n\r\n                </div>\r\n            :\r\n                <div className=\"userProfile\">\r\n                    {/*others profile page*/}\r\n                    <div>{user.uid}</div>\r\n                </div>\r\n        :\r\n            <div>You need to login in to view profile pages.</div>\r\n    )\r\n}\r\n\r\nexport default UserProfile \r\n","import React from 'react'\r\n\r\nconst ConfirmPayment = () => {\r\n    //show payemnt, etc\r\n    return (\r\n        <div className=\"confirmPayment\">\r\n            Thank you!\r\n\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConfirmPayment\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { useStateValue } from '../StateProvider';\r\nimport \"./Home.css\"\r\n\r\nconst Home = () => {\r\n    const [{ user }] = useStateValue();\r\n\r\n\r\n    return (\r\n        <div className=\"home\">\r\n            <h1>\r\n                <span className=\"zimboland\">Welcome to Zimboland!</span>\r\n            </h1>\r\n            <h3>\r\n                We have three parts to our website: The Auction, The Store, and the Notice Board.\r\n            </h3>\r\n            <Link className=\"links\" to={\"/auction\"}><h2>The Auction</h2></Link>\r\n            <div>Post your items in the live always on auction. Other users of the website can bid on your items, and the highest bidder wins.</div>\r\n            <Link className=\"links\" to={\"/store\"}><h2>The Store</h2></Link>\r\n            <div>Want to sell your items or advertive your service. Do so on our store page. Post you details for other users to see.</div>\r\n            <Link className=\"links\" to={\"/notice-board\"}><h2>The Notice Board</h2></Link>\r\n            <div>Have something to say, ask, or just rant about. Post here on the notice board.</div>\r\n            <br />\r\n            <br />\r\n            {user ?\r\n                <div></div>\r\n                :\r\n                <div>\r\n                    You are not login in. Sign up today for use of full features. \r\n                        <b><Link className=\"links\" to={\"/login\"}><span className=\"signin\">Click here</span></Link></b>\r\n                     to login/sign-up.\r\n                </div>                \r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React from 'react'\r\n\r\nconst PaymentItem = ({ paymentItemDetail }) => {\r\n    return (\r\n        <div className=\"paymentItem\">\r\n            <div className=\"paymentItem__name\">{paymentItemDetail.tierName}</div>\r\n            <div className=\"paymentItem__posts\">{paymentItemDetail.activePosts} active posts</div>\r\n            <div className=\"paymentItem__days\">Length of auction: {paymentItemDetail.maxAuctionLength}</div>\r\n            <div className=\"paymentItem__watched\">Watched item: {paymentItemDetail.maxWatchedItems}</div>\r\n            <div className=\"paymentItem__pictures\">Pictures per item: {paymentItemDetail.imagePerItem}</div>\r\n            <div className=\"paymentItem__cost\">US${paymentItemDetail.cost}.00</div>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default PaymentItem\r\n\r\n\r\n\r\n            \r\n            ","import React from 'react'\r\nimport \"./LoadingIcon.css\"\r\n\r\nconst LoadingIcon = () => {\r\n    return (\r\n        <div className=\"loadingIcon\">\r\n            <div className=\"loadingio-spinner-double-ring-atqazp9yo7e\"><div className=\"ldio-ce1mgx8e4nq\">\r\n                <div></div>\r\n                <div></div>\r\n                <div><div></div></div>\r\n                <div><div></div></div>\r\n                </div></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoadingIcon\r\n","import React from 'react'\r\n\r\nconst CurrentTier = ({ payments }) => {\r\n    //let payment = {\r\n    //    date: \"1\",\r\n    //    amount: 1200,\r\n    //    tier: 1, //not just the level but entire tier\r\n    //    months: 20,  //cost per month=60\r\n    //    startDate: \"01/02/2021\",\r\n    //    endDate: \"01/04/2021\",\r\n    //    expired: false,\r\n    //    changed: false,\r\n    //}\r\n   \r\n    //should just filter before passing it in.,...\r\n    const showPaidServices = () => {\r\n        return (\r\n            payments.sort((a, b) => a.startDate - b.startDate).map((data, index) => {\r\n                return (\r\n                    <div key={`holderListPayments${index}`}  className={`holderListPayments${index}`}>\r\n                        <div key={`tierNameListPayments${index}`} className={`tierNameListPayments${index}`}>{data.tier.tierName}</div>\r\n                        <div key={`endDateListPayments${index}`} className={`endDateListPayments${index}`}>{`${data.startDate} to ${data.endDate}`}</div>\r\n                    </div>\r\n                )\r\n            })\r\n            \r\n        )\r\n    }\r\n    showPaidServices()\r\n    //auctionItems.filter(currentUser)\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"currentTier\">\r\n            {payments.length === 0 ?\r\n                <div>You currently using Free Tier.</div>\r\n                :\r\n                <div>\r\n                    <div>{showPaidServices()}</div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CurrentTier\r\n","import React, { useCallback, useEffect } from 'react'\r\nimport PaymentItem from \"./PaymentItem\"\r\nimport { Paynow } from \"paynow\"\r\nimport tierConsts from \"./tierConsts\"\r\nimport { useState } from 'react'\r\nimport CRC32 from \"crc-32\"\r\nimport { useStateValue } from '../StateProvider'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { db } from '../firebase';\r\n\r\n\r\nimport LoadingIcon from \"./LoadingIcon\"\r\nimport CurrentTier from \"./CurrentTier\"\r\nimport axios from 'axios'\r\n\r\n//filter tier less than today\r\n\r\n//have this show before payment is done\r\n//check if paying for a higher tier or lower\r\n//if so, give choice to change existing teir remaining to new teir\r\n//or to add it after/befre\r\n//if going down run first higher first\r\n\r\n\r\n//for some reason when un-focused then re-focus on teh paged, the amount per item drops to the default ie 1\r\n//maybe only when saving...\r\n\r\n\r\n//its still looking at changed and expired tiers when checking if previous tiers are of a deferent type - done but have a lot of filters.\r\n\r\n\r\n//the convert and discount functions are not including the rate, work on this\r\n\r\n//will open and closing of the window work on mobile?\r\n//filters\r\n    \r\n\r\nconst PaymentScreen = ({ selectedTier = 20 }) => {\r\n    let history = useHistory();\r\n    const [{ user, timeVariance }, dispatch] = useStateValue()\r\n    const [paymentMethod, setPaymentMethod] = useState(\"\")\r\n    const [phoneNumber, setPhoneNumber] = useState(\"\")\r\n    const [tierSelected, setTierSelected] = useState(0)\r\n    const [months, setMonths] = useState(1)\r\n    const [totalCost, setTotalCost] = useState(0)\r\n    const [showLoading, setShowLoading] = useState(false)\r\n    const [tempDetails, setTempDetails] = useState([])\r\n    ///const [discount, setDiscount] = useState(0)  //causes a infinate loop\r\n    const [oldTierChoice, setOldTierChoice] = useState(\"none\")\r\n    const [paidForDateUntil, setPaidForDateUntil] = useState(0)\r\n    const [convertedValue, setConvertedValue] = useState(0)\r\n    const [discountedValue, setDiscountedValue] = useState(0)\r\n    const [count, setCount] = useState(0)\r\n    \r\n\r\n    let pollUrl = \"\"\r\n    let paynow = new Paynow(\"12579\", \"61633d89-80d0-4177-a015-fca9d915e858\") //move this for security\r\n    let bankRate = 87 //be able to change this some where, had a DB i guess... for varibles\r\n    let paymentCheckerTimer = \"\"\r\n    //let discount = 0\r\n    let paymentWindow = \"\"\r\n\r\n    //do not need asnyc??????\r\n    //had async, but i dont thinkk it needs it\r\n    const getTimeDate = useCallback(() => {\r\n        const currentTime = +new Date() - +new Date(timeVariance);\r\n        return (currentTime)\r\n    }, [timeVariance])\r\n\r\n    const notExpired = (e) => {\r\n        return !e.expired\r\n    }\r\n    const notChanged = (e) => {\r\n        return !e.changed\r\n    }\r\n  \r\n    const activateBids = useCallback((e) => {\r\n        let today = new Date(getTimeDate()).setHours(0, 0, 0, 0)\r\n        let tempDate = new Date(e.endDate)\r\n\r\n        return tempDate > today\r\n    }, [getTimeDate])\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            //works okay, just need to test it with real dates.\r\n            //seems to load very slow\r\n            db.collection(\"payments\").where(\"userID\", '==', user.uid) //.where(\"payments.expired\", \"==\", false).where(\"payments.notChanged\", \"==\", false)\r\n                .onSnapshot((snapshot) => //dont need snapshot???\r\n                    setTempDetails(snapshot.docs.map((doc) => ({ id: doc.id, data: doc.data() }))),\r\n                )\r\n\r\n            //does the calculations (might not be needed in this format, idk)\r\n            tierConsts.map((data, index) => {\r\n                if (data.code === selectedTier) {\r\n                    updatePayment(data)\r\n                }\r\n                return 0\r\n            })\r\n        }\r\n\r\n        const unmount = () => {\r\n            setTempDetails([])\r\n            updatePayment(0)\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n    }, [user, selectedTier, getTimeDate])\r\n\r\n    useEffect(() => {\r\n\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            let highestValue = tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids).map((data, index) => {\r\n                return (data.endDate)\r\n            }).reduce((a, b) => { return a > b ? a : b })\r\n\r\n            setPaidForDateUntil(highestValue) //highest paid from previous payments....or today\r\n\r\n            const unmount = () => {\r\n                setPaidForDateUntil(0)\r\n            }\r\n            return () => {\r\n                unmount()\r\n            };\r\n\r\n        }\r\n    }, [tempDetails, activateBids])\r\n\r\n\r\n    //web based transaction\r\n    useEffect(() => {\r\n        let fees = 1.0 //i will absore all paynow charges... https://www.paynow.co.zw/Home/Fees\r\n\r\n        setTotalCost(parseFloat(months * tierSelected.cost * bankRate * fees).toFixed(2))\r\n\r\n        const unmount = () => {\r\n            setTotalCost(0)\r\n        }\r\n        return () => {\r\n            unmount()\r\n        };\r\n    }, [months, tierSelected.cost, bankRate])\r\n\r\n    //load time variance from local time\r\n    useEffect(() => {\r\n        const getTimeVariance = async () => {\r\n            const tempVariance = (+new Date() - +new Date(await getRealTimeDate())) * -1\r\n            dispatch({\r\n                type: \"SET_TIME_VARIANCE\",\r\n                timeVariance: tempVariance\r\n            })\r\n        }\r\n        getTimeVariance()\r\n    }, [dispatch])\r\n\r\n\r\n    const getRealTimeDate = async () => {\r\n        return (axios.get(\"http://api.timezonedb.com/v2.1/get-time-zone?key=YG00KOPFKPM7&format=json&by=zone&zone=Africa/Harare\")\r\n            .then(res => { return res.data.formatted })\r\n        )\r\n    }\r\n   \r\n\r\n    const convertPaymentsToCurrentTier = useCallback(() => {\r\n        //only if previous tier is a differnet tier level\r\n\r\n        let today = new Date(getTimeDate()).setHours(0, 0, 0, 0)\r\n\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            let totalValueLeft = tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids).map((data, index) => {\r\n                let timeRemaing = new Date(data.endDate).setHours(0, 0, 0, 0) - today //get date, calculate here real time remaining\r\n                let totalTime = new Date(data.endDate) - new Date(data.startDate)\r\n                let valueLeft = 0\r\n       \r\n                if (totalTime !== 0) {\r\n                    valueLeft = Math.round((parseInt(data.amount) + parseInt(data.additionalAmount)) * timeRemaing / totalTime) //round seems to losing 1 zim$ on silver value\r\n                }\r\n                today = new Date(data.endDate)\r\n       \r\n\r\n                return valueLeft\r\n            }).reduce((a, b) => { return a + b })\r\n            // add a bit more here to make return statement clear...\r\n            setConvertedValue(Math.ceil(totalValueLeft * 30.5 / (tierSelected.cost * bankRate)))\r\n            setDiscountedValue(Math.ceil(totalValueLeft))\r\n        }\r\n    }, [tempDetails, tierSelected, bankRate, getTimeDate, activateBids])\r\n\r\n    useEffect(() => {\r\n        convertPaymentsToCurrentTier()\r\n    }, [convertPaymentsToCurrentTier])\r\n\r\n    \r\n\r\n    const calculateStartDate =  () => {\r\n        let today = new Date(getTimeDate())\r\n        let paidUntilDate = new Date(paidForDateUntil)\r\n\r\n        console.log(today)\r\n        console.log(paidUntilDate)\r\n        //problem here when converting it uses the last date of previous tier to calculate the start date of this new one, \r\n        //which includes the one that is converted, so they having the cake and eating it too.\r\n        return today //> paidUntilDate ? today : paidUntilDate\r\n    }\r\n\r\n\r\n    const calculateEndDate = (startDate) => {\r\n        let tempEndDate = new Date(startDate)\r\n        \r\n        tempEndDate.setDate(tempEndDate.getDate() + Math.ceil(months * 30.5) + (oldTierChoice === \"convert\" && checkIfDifferentTier() ? convertedValue : 0));\r\n                                                    //include the convertedValue in the Math.ceil(), and have the convertedValue not converted, and only convert when shown\r\n        console.log(tempEndDate)\r\n        return tempEndDate//startDate + Math.ceil(months * 30.5)\r\n    }\r\n\r\n    const sortTiers = () => {\r\n        setCount(count + 1)\r\n\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            let today = new Date(getTimeDate()).setHours(0, 0, 0, 0) + 2 * 60 * 60 * 1000\r\n            //let newStart = today\r\n            //dont seem to use it\r\n            let change = 0\r\n\r\n            tempDetails[0].data.payments.sort((a, b) => { return b.tier.code - a.tier.code })\r\n\r\n            //save the data...\r\n            tempDetails[0].data.payments.filter(notExpired).filter(activateBids).map((data, index) => {\r\n\r\n                let startDate = new Date(data.startDate)\r\n                let endDate = new Date(data.endDate)\r\n                //this might not work for some options\r\n\r\n                //newStart = startDate > today ? startDate : today\r\n                change = today - startDate\r\n\r\n                endDate = Date.parse(endDate) + change\r\n                startDate = Date.parse(startDate) + change\r\n\r\n                data.startDate = new Date(startDate).toISOString().split('T')[0]\r\n                data.endDate = new Date(endDate).toISOString().split('T')[0]\r\n\r\n                today = endDate\r\n                return 0\r\n            })\r\n        }\r\n    }\r\n\r\n    const convertTiers = () => {\r\n        // {convertedValue}\r\n        console.log(\"converting\")\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids).map((data, index) => {\r\n                console.log(\"changing\")\r\n                data.changed = true\r\n                return 0\r\n            })\r\n        }\r\n    }\r\n\r\n    const discountTiers = () => {\r\n        //seems to be done, testing now :(\r\n        //should not to be sort of this since we are using the small value first???\r\n        //if discount value is more than paying, there do more things?\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            if (totalCost > discountedValue) {\r\n                //remove all previous payments                \r\n                tempDetails[0].data.payments.filter(notExpired).filter(activateBids).map((data, index) => {\r\n                    data.expired = true\r\n                    return 0\r\n                })\r\n            } else {\r\n                //starting with the smallest tier remove value until we get to a tier,\r\n                //that if we remove would be greater than totalCost,\r\n                //on that one remove days that are need to be removed.\r\n                let amountToPay = totalCost\r\n                let today = new Date(getTimeDate()).setHours(0, 0, 0, 0) + 2 * 60 * 60 * 1000\r\n\r\n                tempDetails[0].data.payments.sort((a, b) => { return a.tier.code - b.tier.code })\r\n                tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids).map((data, index) => {\r\n\r\n                    //amount of value left on contract\r\n                    let start = new Date(data.startDate)\r\n                    let end = new Date(data.endDate)\r\n                    let contractValue = 0\r\n\r\n                    if (start > today) {\r\n                        //do nothing\r\n                        contractValue = data.amount\r\n                    } else {\r\n                        //if endDate = Today data.amount = 0? seem to make sense?\r\n                        contractValue = Math.round((end - today) / (end - start) * data.amount)\r\n                    }\r\n\r\n                    if (contractValue > amountToPay) {\r\n                        //reduce days on this payment...\r\n                        let newDays = Math.round((amountToPay / contractValue) * (end - start)) //round to off\r\n                        data.endDate = new Date(start + newDays).toISOString().split('T')[0]\r\n                        amountToPay = 0\r\n                    } else {\r\n                        data.expired = true\r\n                        amountToPay -= data.amount\r\n                    }\r\n                    //if value is less that what must be take, just take and move on\r\n                    //and by that i mean mark as close.\r\n                    return 0\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    const checkReceived = async () => {\r\n        let status = \"\"\r\n        if (oldTierChoice === \"discount\" && checkIfDifferentTier() && discountedValue >= totalCost) {\r\n            //if previosu tier \r\n            status = { status: \"paid\" }\r\n        } else {\r\n            status = await paynow.pollTransaction(pollUrl)\r\n        }\r\n\r\n        //check here for more: https://forums.paynow.co.zw/t/result-url-payment-results/2193/2\r\n        switch (true) {\r\n            case status.status === \"paid\" || status.status === \"awaiting delivery\":\r\n                console.log(\"paid\")\r\n                clearInterval(paymentCheckerTimer)\r\n\r\n                let startDate = await calculateStartDate()\r\n\r\n                let payment = {\r\n                    date:  new Date(getTimeDate()),\r\n                    amount: totalCost,\r\n                    additionalAmount: oldTierChoice ===\"convert\" && checkIfDifferentTier() ? discountedValue : 0,\r\n                    tier: tierSelected,\r\n                    months: months,\r\n                    startDate: startDate.toISOString().split('T')[0],\r\n                    endDate: calculateEndDate(startDate).toISOString().split('T')[0], //+ 30.5 * months (rounded up)\r\n                    pollUrl: pollUrl,\r\n                    expired: false,\r\n                    changed: false,\r\n                }\r\n\r\n                //have to add payment to list to be sort\r\n                const pushNewPayment = () => {\r\n                    if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n                        //repeat payer\r\n                        tempDetails[0].data.payments.push(payment)\r\n                    }\r\n                }\r\n\r\n                //Check id discount should be take off and if previous tiers are to be adjusted\r\n                if (oldTierChoice === \"discount\" && checkIfDifferentTier()) {\r\n                    console.log(\"discount\")\r\n                    await discountTiers()\r\n                    pushNewPayment()\r\n                } else if (oldTierChoice === \"convert\" && checkIfDifferentTier()) {\r\n                    console.log(\"convert\")\r\n                    convertTiers()\r\n                    pushNewPayment()\r\n                } else {\r\n                    console.log(\"sort\")\r\n                    pushNewPayment()\r\n                    await sortTiers()\r\n                    console.log(tempDetails)\r\n                }\r\n\r\n                //i moved this below the old tier choice part, so that we only saving to DB once.\r\n\r\n                if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n                    //repeat payer\r\n                    db.collection(\"payments\").doc(tempDetails[0].id).update({\r\n                        payments: tempDetails[0].data.payments\r\n                    })\r\n                } else {\r\n                    //new payer\r\n                    db.collection(\"payments\").add({\r\n                        userID: user.uid,\r\n                        payments: [payment],\r\n                    })\r\n                    console.log(\"done\")\r\n                    console.log(payment)\r\n                }\r\n\r\n                if (paymentWindow) { paymentWindow.close() }\r\n\r\n                history.push(\"/paymentConfirmed\")\r\n                break\r\n            case status.status === \"cancelled\":\r\n                clearInterval(paymentCheckerTimer)\r\n                setShowLoading(false)\r\n                if (!paymentWindow.closed) { paymentWindow.close() }\r\n                //check error msg here\r\n\r\n                if (status.error) {\r\n                    console.log(status.error)\r\n                    console.log(\"error\")\r\n                    //show error msg\r\n                } else {\r\n                    console.log(\"cancelled by user..\")\r\n                    console.log(paymentWindow.closed)\r\n\r\n                    //return everything back to normal, with a msg saying cancelled by user...\r\n                }\r\n                break\r\n            default:\r\n                //created\r\n                //and there is\r\n                //awaiting delivery\r\n                if (paymentWindow && paymentWindow.closed) {\r\n                    //window was closed but payment not done\r\n                    //link to re-open payment screen?\r\n                    console.log(\"cancelled?\")\r\n                    //ask if to cancel payment, or go back...\r\n                }\r\n                console.log(status.status)\r\n        }\r\n    }\r\n\r\n    const makePayment = async () => {\r\n        //if payment is zero or less...\r\n        if (oldTierChoice === \"discount\" && checkIfDifferentTier() && discountedValue >= totalCost) {\r\n            //skip raising a payment, since total value is covered by previous tiers\r\n            setShowLoading(false)\r\n            checkReceived()\r\n        } else {\r\n\r\n            let paymentId = CRC32.str(\r\n                user.uid +\r\n                tierSelected +\r\n                \"code\"\r\n            ).toString(32)            \r\n\r\n            //Result URL is the URL on the merchant website where Paynow will post transaction results to.\r\n            paynow.resultUrl = \"https://example.com/gateways/paynow/update\"\r\n            //Return URL is the URL where the customer will be redirected to after the transaction has been processed. \r\n            //If you do not specify a return URL, you will have to rely solely on polling status updates to determine \r\n            //if the transaction has been paid.\r\n            paynow.returnUrl = \"httpw://www.example.com/return?gateway=paynow\"\r\n\r\n            let payment = await paynow.createPayment(paymentId, user.email)\r\n\r\n            payment.add(tierSelected.tierName, totalCost - (oldTierChoice === \"discount\" && checkIfDifferentTier() ? discountedValue : 0))\r\n\r\n            if (paymentMethod === \"ecocash\" || paymentMethod === \"onemoney\") {\r\n                //mobile payment\r\n                paynow.sendMobile(payment, phoneNumber, paymentMethod).then(res => {\r\n                    if (res.success) {\r\n                        let instructions = res.instructions\r\n                        console.log(instructions)\r\n\r\n                        pollUrl = res.pollUrl\r\n\r\n                        paymentCheckerTimer = setInterval(() => {\r\n                            checkReceived()\r\n\r\n                        }, 1000)\r\n\r\n                        //showLoading                   \r\n                        setShowLoading(true)\r\n                        const paymentCheckCounter = setTimeout(() => {\r\n\r\n                            setShowLoading(false)\r\n                            clearInterval(paymentCheckerTimer)\r\n                            clearTimeout(paymentCheckCounter)\r\n                        }, 61000)\r\n\r\n                        //if window is still open and it hasnt got this far, but its been for than 60, check if window is open?, i dont know sometyhing like that, so if the\r\n                        //user has to regeister first before paying it might take longer than 60 seconds...\r\n\r\n                        //if still here...\r\n                        //havent got confirmation yet\r\n                        //option to try again\r\n                        //please check phone et\r\n\r\n                        //if using extranal link, show linkt and reset timer\r\n                        //or option to cancel...\r\n                        //link to re-open payment screen?\r\n\r\n                    } else {\r\n                        alert(\"There was an error while trying to paid. Please try agian later.\")\r\n                        console.log(res.error)\r\n                    }\r\n\r\n                }).catch(ex => {\r\n                    alert(\"There was an error while trying to paid. Please try agian later.\")\r\n                    console.log(\"error\", ex)\r\n                })\r\n\r\n\r\n            } else {\r\n                //pop up window here...\r\n                paynow.send(payment).then(res => {\r\n                    if (res.success) {\r\n                        let link = res.redirectUrl\r\n                        pollUrl = res.pollUrl\r\n                        //explain to follow directions on popuped window (and to close it when done paying)\r\n                        paymentWindow = window.open(link, '_blank', 'location=yes,height=570,width=520,scrollbars=yes,status=yes')\r\n\r\n                        paymentCheckerTimer = setInterval(() => {\r\n                            checkReceived()\r\n                        }, 1000)\r\n\r\n                        //showLoading                   \r\n                        setShowLoading(true)\r\n                        const paymentCheckCounter = setTimeout(() => {\r\n                            setShowLoading(false)\r\n                            clearInterval(paymentCheckerTimer)\r\n                            clearTimeout(paymentCheckCounter)\r\n                        }, 61000)\r\n\r\n\r\n\r\n                    } else {\r\n                        alert(\"There was an error while trying to paid. Please try agian later.\")\r\n                        console.log(res.error)\r\n                    }\r\n                }).catch(ex => {\r\n                    alert(\"There was an error while trying to paid. Please try agian later.\")\r\n                    console.log(\"error\", ex)\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    const updatePayment = (tier) => {\r\n        setTierSelected(tier)\r\n    }\r\n\r\n    const updatePayemntMethod = (method) => {\r\n        setPaymentMethod(method)\r\n    }\r\n\r\n    const checkIfDifferentTier = () => {\r\n        let tempCal = false\r\n\r\n        if (tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments) {\r\n            tempCal = tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids).map((data, index) => {\r\n                return data.tier.code !== tierSelected.code \r\n            }).reduce((a, b) => { return a || b })\r\n\r\n        }\r\n\r\n        return tempCal\r\n\r\n    }\r\n\r\n    const checkMonths = (value) => {\r\n        if (value > 0 || value === \"\") {\r\n            setMonths(value)\r\n        } else {\r\n            setMonths(1)\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"paymentScreen\">\r\n            <CurrentTier payments={tempDetails.length > 0 && tempDetails[0].data && tempDetails[0].data.payments ? tempDetails[0].data.payments.filter(notExpired).filter(notChanged).filter(activateBids) : []} />\r\n            {showLoading ? <LoadingIcon /> : <div></div>}\r\n            {tierConsts.filter((e) => { return e.active }).map((data, index) => {\r\n                return (\r\n                    <div key={`paymentHolder${index}`}>\r\n                        <PaymentItem key={`paymentItem${index}`} paymentItemDetail={data} />\r\n\r\n                        {(data.code !== 10 && data.code !== selectedTier) ?\r\n                            <input key={`radioPaymentAmount${index}`}\r\n                                type=\"radio\" id={`radioPaymentAmount${index}`}\r\n                                name=\"radioPaymentAmount\"\r\n                                onChange={() => updatePayment(data)}\r\n                            />\r\n\r\n                        :\r\n                            data.code === selectedTier ?\r\n                                <input key={`radioPaymentAmount${index}`}\r\n                                    type=\"radio\" id={`radioPaymentAmount${index}`}\r\n                                    name=\"radioPaymentAmount\"\r\n                                    onChange={() => updatePayment(data)}\r\n                                    defaultChecked\r\n                                />\r\n\r\n                            :\r\n                                <div></div>\r\n\r\n                        }\r\n\r\n                    </div>\r\n                )\r\n            })}\r\n\r\n            <div>\r\n                Payment Method:\r\n                <div>Ecocash<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"ecocash\")} /></div>\r\n                <div>One Money<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"onemoney\")} /></div>\r\n                {/*<div>Telecash<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"telecash\")} /></div>*/}\r\n                <div>Zim Switch/Master Card/VISA (local)<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"other\")} /></div>\r\n                {/*<div>VISA<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"visa\")}/></div>\r\n                <div>Master Card<input type=\"radio\" name=\"radioPaymentMethod\" onChange={() => updatePayemntMethod(\"mastercard\")}/></div>*/}\r\n                {paymentMethod === \"ecocash\" || paymentMethod === \"onemoney\" ?\r\n                    <div>\r\n                        Enter Phone Number you paying from:\r\n                        <input className=\"phoneInput\"\r\n                            value={phoneNumber}\r\n                            onChange={(e) => setPhoneNumber(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    :\r\n                    <div></div>\r\n                }\r\n            </div>\r\n            Number of Months:<input type=\"number\" min=\"1\" name=\"radioPaymentMonths\" value={months} onChange={(e) => checkMonths(e.target.value)} /> {/*max=\"24\"*/}\r\n            \r\n            <br />\r\n\r\n            {checkIfDifferentTier() ?\r\n                <div>\r\n                    <div>\r\n                        <input type=\"radio\" name=\"previousTier\" id=\"previousTier1\" onChange={(e) => setOldTierChoice(\"none\")} defaultChecked /> Keep previous tier as they are. <small><small>*High tier level will always run first.</small></small>\r\n                    </div>\r\n                    <div>\r\n                        <div><input type=\"radio\" name=\"previousTier\" onChange={(e) => setOldTierChoice(\"convert\")} /> Convert previous tier to add {convertedValue} more days on to this tier.</div>\r\n                    </div>\r\n                    <div>\r\n                        <div><input type=\"radio\" name=\"previousTier\" onChange={(e) => setOldTierChoice(\"discount\")} /> Use previous tiers, to discount current payment: {totalCost} - {discountedValue > totalCost ? totalCost : discountedValue} = {discountedValue > totalCost ? 0 : totalCost - discountedValue}</div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <div></div>}\r\n\r\n            {/*disable this until payed or failed.... */}\r\n            <div className=\"totalCost\">ZIM$ {totalCost - (oldTierChoice === \"discount\" && checkIfDifferentTier() ? (discountedValue > totalCost ? totalCost : discountedValue) : 0)} <small><small>(not including fees from your Bank, Credit/Debit card or Mobile wallet charges.)</small></small></div>\r\n\r\n            {/*allow popups? */}\r\n            <div>{(oldTierChoice === \"discount\" && checkIfDifferentTier() && discountedValue >= totalCost) ? \"No payment needed, previous tiers discounts covers the total of this payment, click Pay button to comfirm changes\" : \"\"}</div>\r\n            <div onClick={() => makePayment()} >Pay</div>\r\n\r\n            {/*<div onClick={() => checkReceived()} >Check</div>*/}\r\n            {/*Maybe show this /\\ only after the 60 second delay. */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PaymentScreen","import { useEffect } from 'react';\nimport './App.css';\nimport { auth } from './firebase';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useStateValue } from \"./StateProvider\";\n\nimport AuctionScreen from \"./components/AuctionScreen\"\nimport Header from \"./components/Header\"\nimport SignIn from \"./components/SignIn\"\nimport NewAuctionItem from \"./components/NewAuctionItem\"\nimport ConfirmAuctionItem from \"./components/ConfirmAuctionItem\"\nimport UserProfile from \"./components/UserProfile\"\nimport ConfirmPayment from \"./components/ConfirmPayment\"\nimport Home from \"./components/Home\"\n\n\nimport PaymentScreen from \"./components/PaymentScreen\"\n\nfunction App() {\n  const [, dispatch] = useStateValue();\n  \n  useEffect(() => {\n    auth.onAuthStateChanged(authUser => {\n      if (authUser) {\n\n        //seems to work when refresh teh pages, but doesnt work as soon as a user is created.\n        //mybe we need to wait for a promise to be fulfilled.?\n        let userInfo = JSON.parse(authUser.photoURL);\n        //userInfo.tier: 0,\n        //userInfo.payments: [{date:\"01/08/2001\", amount:500}],\n        //userInfo.photoURL: \"\",\n        //userInfo.somethingElse: \"works\"\n        authUser.tier = userInfo ? userInfo.tier : 0\n\n        dispatch({\n          type: \"SET_USER\",\n          user: authUser\n        })\n      } else {\n        dispatch({\n          type: 'SET_USER',\n          user: null\n        })\n      }\n    })\n  }, [dispatch])\n\n\n  return (\n    <>\n      <Router>\n        <div className=\"app\">\n          <Header />\n          <Switch>\n            <Route path=\"/login\">\n              <SignIn />\n            </Route>\n\n            <Route path=\"/auction\">\n              <AuctionScreen />\n            </Route>\n\n            <Route path=\"/store\">\n              <div>Like auction but no bids, like ads</div>\n              <div>Coming soon</div>\n            </Route>\n\n            <Route path=\"/notice-board\">\n              <div>Post items to the boards for others to see and comment on</div>\n              <div>Coming soon</div>\n            </Route>\n\n            <Route path=\"/create-auction\">\n              <NewAuctionItem />\n            </Route>\n\n            <Route path=\"/confirm\">\n              <ConfirmAuctionItem />\n            </Route>\n\n            <Route path=\"/about\">\n              <div> About page, with rules and FAQs...</div>\n              <div>Coming soon</div>\n            </Route>\n\n            <Route path=\"/profile/:name\">\n              <UserProfile />\n            </Route>\n\n            <Route path=\"/paymentConfirmed\">\n              <ConfirmPayment />\n            </Route>\n\n            <Route path=\"/payments\">               \n              <PaymentScreen />\n            </Route>\n\n            <Route path=\"/\"> {/* must be last route /*/}\n              {/*<AuctionScreen /> {/*for testing only to be replace with home page*/}\n              <Home />\n            </Route>\n          </Switch >\n        </div>\n      </Router>\n    </>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const initialState = {\r\n    user: null,\r\n    auctionItem: null,\r\n    timeVariance: 0,\r\n    auctionItems: [],\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n    switch(action.type) {\r\n        case \"SET_USER\":\r\n            return {\r\n                ...state,\r\n                user: action.user\r\n            }\r\n        case \"SET_NEW_AUCTION_ITEM\":\r\n            return {\r\n                ...state,\r\n                auctionItem: action.auctionItem\r\n            }\r\n        case \"SET_TIME_VARIANCE\":\r\n            return {\r\n                ...state,\r\n                timeVariance: action.timeVariance\r\n            }\r\n        case \"SET_AUCTION_ITEMS\":\r\n            return {\r\n                ...state,\r\n                auctionItems: action.auctionItems\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport reducer, { initialState } from './reducer';\nimport { StateProvider } from \"./StateProvider\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <StateProvider initialState={initialState} reducer={reducer}>\n        <App />\n      </StateProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}